


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>History of Changes &mdash; NSLS-II Software Documentation  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Software Deployment with Conda" href="conda.html" />
    <link rel="prev" title="Sandbox" href="sandbox.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> NSLS-II Software Documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="architecture-overview.html">Event-Based Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="cookbook/index.html">Cookbook (Examples)</a></li>
<li class="toctree-l1"><a class="reference internal" href="remote-access.html">Remote Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="sandbox.html">Sandbox</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">History of Changes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#cycle-beginning-2017-05">Cycle Beginning 2017-05</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#new-functionality">New functionality</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api-changes">API Changes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="conda.html">Software Deployment with Conda</a></li>
<li class="toctree-l1"><a class="reference internal" href="fresh-installation.html">Installation at a Beamline</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">Recommended Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="internal_index.html">Internal Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="meetings/index.html">Meetings</a></li>
</ul>
<p class="caption"><span class="caption-text">Data Collection</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://nsls-ii.github.io/bluesky">bluesky</a></li>
<li class="toctree-l1"><a class="reference external" href="https://nsls-ii.github.io/ophyd">ophyd</a></li>
<li class="toctree-l1"><a class="reference external" href="https://nsls-ii.github.io/caproto">caproto</a></li>
</ul>
<p class="caption"><span class="caption-text">Data Access and Management</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://nsls-ii.github.io/databroker">databroker</a></li>
<li class="toctree-l1"><a class="reference external" href="https://nsls-ii.github.io/suitcase">suitcase</a></li>
</ul>
<p class="caption"><span class="caption-text">Data Analysis</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="http://scikit-beam.github.io/scikit-beam">scikit-beam</a></li>
</ul>
<p class="caption"><span class="caption-text">GitHub Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/NSLS-II/">NSLS-II Repositories</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/NSLS-II/wishlist/issues">Wish List</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/NSLS-II/Bug-Reports/issues">Bug Reports</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">NSLS-II Software Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>History of Changes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/history.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="history-of-changes">
<h1>History of Changes<a class="headerlink" href="#history-of-changes" title="Permalink to this headline">¶</a></h1>
<p>This document presents a summary of the release notes for NSLS-II software
(bluesky, databroker, ophyd, and friends) as a convenient reference. See the
individual projects for traditional release notes, where changes are grouped by
tagged releases and documented in greater detail. This document groups notes by
each operating cycle at NSLS-II.</p>
<div class="section" id="cycle-beginning-2017-05">
<h2>Cycle Beginning 2017-05<a class="headerlink" href="#cycle-beginning-2017-05" title="Permalink to this headline">¶</a></h2>
<div class="section" id="new-functionality">
<h3>New functionality<a class="headerlink" href="#new-functionality" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The new databroker-browser provides a GUI for searching runs and viewing text
summaries, metadata, and figures. It requires some beamline-specific
customization which DAMA can assist with during the operating cycle. An
example
<a class="reference external" href="https://github.com/NSLS-II/databroker-browser/blob/master/example.py">configuration file</a>
is available. (This is experimental and likely to change in the future.)</p>
</li>
<li><p class="first">The databroker Headers have methods for more convenience data retrieval. You
can still do this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">header</span> <span class="o">=</span> <span class="n">db</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">db</span><span class="o">.</span><span class="n">get_table</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
</pre></div>
</div>
<p>but you can also do this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">header</span> <span class="o">=</span> <span class="n">db</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">header</span><span class="o">.</span><span class="n">table</span><span class="p">()</span>
</pre></div>
</div>
<p>which allows for succinct one-liners like</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">table</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<p>Another especially useful one:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">header</span><span class="o">.</span><span class="n">fields</span><span class="p">()</span>
</pre></div>
</div>
<p>See the <a class="reference external" href="https://nsls-ii.github.io/databroker/whats_new.html">databroker release notes</a>
for more new methods and attributes on Headers.</p>
</li>
</ul>
</div>
<div class="section" id="api-changes">
<h3>API Changes<a class="headerlink" href="#api-changes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Any databroker query that potentially returns multiple Headers used to return
a list. Now it returns a <code class="docutils literal notranslate"><span class="pre">Results</span></code> object, which lazily retrieves Headers
one at a time, like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">header</span> <span class="ow">in</span> <span class="n">db</span><span class="p">():</span>
    <span class="c1"># do something</span>
</pre></div>
</div>
<p>This makes queries fast, even when the results set is large.</p>
</li>
<li><p class="first">Area Detector file store plugin classes have a new required argument <code class="docutils literal notranslate"><span class="pre">fs</span></code>
that expects an instance of filestore. Usually <code class="docutils literal notranslate"><span class="pre">fs=db.fs</span></code> is correct. They
also accept an option <code class="docutils literal notranslate"><span class="pre">root</span></code> argument which specifies which part of the
<code class="docutils literal notranslate"><span class="pre">read_file_path</span></code> is machine-specific (as opposed to permanent semantics
that should be maintained when the files are copied or moved).</p>
</li>
<li><p class="first">Stepscan plans used to provide the metadata field ‘num_steps’. This was
unintentionally ambigious. Now ‘num_steps’ has been renamed ‘num_points’.
Additionally ‘num_intervals’ (num_points - 1) has been added. The removal of
the ‘num_steps’ field may break user code that expects to find that field.</p>
</li>
<li><p class="first">The suitcase package now expects an instance of databroker (<code class="docutils literal notranslate"><span class="pre">db</span></code>) where it
used to expect an instance of metadatastore (<code class="docutils literal notranslate"><span class="pre">db.mds</span></code>). See the
<a class="reference external" href="https://github.com/NSLS-II/suitcase">suitcase documentation</a> for more.</p>
</li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="conda.html" class="btn btn-neutral float-right" title="Software Deployment with Conda" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sandbox.html" class="btn btn-neutral" title="Sandbox" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015 Brookhaven National Lab

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>