

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Architecture &mdash; ophyd  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ophyd.device.BlueskyInterface.trigger" href="generated/ophyd.device.BlueskyInterface.trigger.html" />
    <link rel="prev" title="Ophyd" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> ophyd
          

          
          </a>

          
            
            
              <div class="version">
                1.4.1.post70+g1c5f79b
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Ophyd's Core Functionality</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#hardware-abstraction">Hardware abstraction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#names">Names</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#uniform-high-level-interface">Uniform High-level Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#read-able-interface">Read-able Interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="generated/ophyd.device.BlueskyInterface.trigger.html">ophyd.device.BlueskyInterface.trigger</a></li>
<li class="toctree-l4"><a class="reference internal" href="generated/ophyd.device.BlueskyInterface.read.html">ophyd.device.BlueskyInterface.read</a></li>
<li class="toctree-l4"><a class="reference internal" href="generated/ophyd.device.BlueskyInterface.describe.html">ophyd.device.BlueskyInterface.describe</a></li>
<li class="toctree-l4"><a class="reference internal" href="generated/ophyd.ophydobj.OphydObject.name.html">ophyd.ophydobj.OphydObject.name</a></li>
<li class="toctree-l4"><a class="reference internal" href="generated/ophyd.ophydobj.OphydObject.parent.html">ophyd.ophydobj.OphydObject.parent</a></li>
<li class="toctree-l4"><a class="reference internal" href="generated/ophyd.ophydobj.OphydObject.root.html">ophyd.ophydobj.OphydObject.root</a></li>
<li class="toctree-l4"><a class="reference internal" href="generated/ophyd.device.BlueskyInterface.stage.html">ophyd.device.BlueskyInterface.stage</a></li>
<li class="toctree-l4"><a class="reference internal" href="generated/ophyd.device.BlueskyInterface.unstage.html">ophyd.device.BlueskyInterface.unstage</a></li>
<li class="toctree-l4"><a class="reference internal" href="generated/ophyd.device.BlueskyInterface.pause.html">ophyd.device.BlueskyInterface.pause</a></li>
<li class="toctree-l4"><a class="reference internal" href="generated/ophyd.device.BlueskyInterface.resume.html">ophyd.device.BlueskyInterface.resume</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#set-able-interface">Set-able Interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="generated/ophyd.positioner.PositionerBase.set.html">ophyd.positioner.PositionerBase.set</a></li>
<li class="toctree-l4"><a class="reference internal" href="generated/ophyd.positioner.PositionerBase.stop.html">ophyd.positioner.PositionerBase.stop</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="generated/ophyd.device.Device.configure.html">ophyd.device.Device.configure</a></li>
<li class="toctree-l4"><a class="reference internal" href="generated/ophyd.device.Device.read_configuration.html">ophyd.device.Device.read_configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="generated/ophyd.device.Device.describe_configuration.html">ophyd.device.Device.describe_configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#fly-able-interface">Fly-able Interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="generated/ophyd.flyers.FlyerInterface.kickoff.html">ophyd.flyers.FlyerInterface.kickoff</a></li>
<li class="toctree-l4"><a class="reference internal" href="generated/ophyd.flyers.FlyerInterface.complete.html">ophyd.flyers.FlyerInterface.complete</a></li>
<li class="toctree-l4"><a class="reference internal" href="generated/ophyd.flyers.FlyerInterface.describe_collect.html">ophyd.flyers.FlyerInterface.describe_collect</a></li>
<li class="toctree-l4"><a class="reference internal" href="generated/ophyd.flyers.FlyerInterface.collect.html">ophyd.flyers.FlyerInterface.collect</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#asynchronous-status">Asynchronous status</a></li>
<li class="toctree-l2"><a class="reference internal" href="#callbacks">Callbacks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="generated/ophyd.ophydobj.OphydObject.html">ophyd.ophydobj.OphydObject</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/ophyd.ophydobj.OphydObject.event_types.html">ophyd.ophydobj.OphydObject.event_types</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/ophyd.ophydobj.OphydObject.subscribe.html">ophyd.ophydobj.OphydObject.subscribe</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/ophyd.ophydobj.OphydObject.unsubscribe.html">ophyd.ophydobj.OphydObject.unsubscribe</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/ophyd.ophydobj.OphydObject.clear_sub.html">ophyd.ophydobj.OphydObject.clear_sub</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/ophyd.ophydobj.OphydObject._run_subs.html">ophyd.ophydobj.OphydObject._run_subs</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/ophyd.ophydobj.OphydObject._reset_sub.html">ophyd.ophydobj.OphydObject._reset_sub</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="device-overview.html">Device and Component</a></li>
<li class="toctree-l1"><a class="reference internal" href="signals.html">Signals</a></li>
<li class="toctree-l1"><a class="reference internal" href="status.html">Status objects (Futures)</a></li>
<li class="toctree-l1"><a class="reference internal" href="positioners.html">Positioners</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging and Logging</a></li>
</ul>
<p class="caption"><span class="caption-text">Built-in Device Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="area-detector.html">Area Detectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="builtin-devices.html">Ready-to-Use Devices</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release History</a></li>
<li class="toctree-l1"><a class="reference internal" href="OEP/index.html">Ophyd Enhancement Proposals</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Docker setup</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ophyd</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Architecture</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/architecture.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="architecture">
<h1>Architecture<a class="headerlink" href="#architecture" title="Permalink to this headline">¶</a></h1>
<div class="section" id="hardware-abstraction">
<h2>Hardware abstraction<a class="headerlink" href="#hardware-abstraction" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">Ophyd</span></code> is the hardware abstraction layer that provides a consistent
interface between the underlying control communication protocol and
<a class="reference external" href="https://nsls-ii.github.io/bluesky">bluesky</a>.  This is done by
bundling sets of the underlying process variables into hierarchical
devices and exposing a semantic API in terms of control system
primitives.  Two terms that will be used throughout are</p>
<blockquote>
<div><p><strong>Signal</strong></p>
<blockquote>
<div>Represents an atomic ‘process variable’. This is nominally a
‘scalar’ value and cannot be decomposed any further by layers
above <a class="reference internal" href="generated/ophyd.html#module-ophyd" title="ophyd"><code class="xref py py-mod docutils literal"><span class="pre">ophyd</span></code></a>.  In this context an array (waveform) or string
would be a scalar because there is no ophyd API to read only part
of it.</div></blockquote>
<p><strong>Device</strong></p>
<blockquote>
<div>Hierarchy composed of Signals and other Devices.  The components
of a Device can be introspected by layers above <a class="reference internal" href="generated/ophyd.html#module-ophyd" title="ophyd"><code class="xref py py-mod docutils literal"><span class="pre">ophyd</span></code></a> and
may be decomposed to, ultimately, the underlying Signals.</div></blockquote>
</div></blockquote>
<p>Put another way, if a hierarchical device is a tree, <strong>Signals</strong> are the leaves
and <strong>Devices</strong> are the nodes.</p>
<div class="section" id="names">
<h3>Names<a class="headerlink" href="#names" title="Permalink to this headline">¶</a></h3>
<p>In ophyd, we can think of a Device as a tree of sub-devices and
eventually the ‘leaf’ nodes which are Signals (and map to 1 or 2 PVs).
At the bottom of the tree, each Signal (leaf-node) has 3 names
associated with it:</p>
<blockquote>
<div><ol class="arabic simple">
<li><em>The PV name it is going to talk to</em>.  Typically, this name must
be globally unique within the control system you are using.  This
can lead to them being both verbose and cryptic.  From
<code class="docutils literal"><span class="pre">ophyd</span></code>’s point of view these strings are taken as given and
does not require any particular pattern, scheme, rhyme, or reason
in the names.</li>
<li><em>The Python attribute name</em>.  These are the names of the
components of a device and allow attribute-style access to the sub
components as <code class="docutils literal"><span class="pre">dev.cpt_name</span></code>.  These names are set in the
<cite>ophyd.Device</cite> sub-class definitions.  They need to be a valid
Python identifiers (which Python enforces) and should be chosen to
makes sense to the people directly working with the ophyd instances.
They need be unique within a <cite>~ophyd.Device</cite> and hence Python ensures that
the fully qualified name will be unique within a namespace.</li>
<li><em>The ``obj.name`` attribute</em>.  This name is the one that will be
used in the data returned by <cite>~ophyd.Device.read</cite> and will
eventually end up in the flowing through <cite>bluesky</cite> and into
<cite>databroker</cite> to be eventually exposed to the users at analysis
times.  By default, these names are derived from the Python
attribute name of the sub-device and the name of it’s parent, but
can be set at runtime.  These names should be picked to make
scientific sense at analysis time and must be unique among devices
that will be used simultaneously.</li>
</ol>
</div></blockquote>
</div>
</div>
<div class="section" id="uniform-high-level-interface">
<span id="hl-api"></span><h2>Uniform High-level Interface<a class="headerlink" href="#uniform-high-level-interface" title="Permalink to this headline">¶</a></h2>
<p>All ophyd objects implemented a small set of methods which are used by
<a class="reference external" href="https://nsls-ii.github.io/bluesky">bluesky</a> plans.  It is the responsibility of the <cite>ophyd</cite> objects to
correctly implement these methods in terms of the underlying control
system.</p>
<div class="section" id="read-able-interface">
<h3>Read-able Interface<a class="headerlink" href="#read-able-interface" title="Permalink to this headline">¶</a></h3>
<p>The minimum set of methods an object must implement is</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="generated/ophyd.device.BlueskyInterface.trigger.html#ophyd.device.BlueskyInterface.trigger" title="ophyd.device.BlueskyInterface.trigger"><code class="xref py py-obj docutils literal"><span class="pre">trigger</span></code></a>(self)</td>
<td>Trigger the device and return status object.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/ophyd.device.BlueskyInterface.read.html#ophyd.device.BlueskyInterface.read" title="ophyd.device.BlueskyInterface.read"><code class="xref py py-obj docutils literal"><span class="pre">read</span></code></a>(self)</td>
<td>Read data from the device.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/ophyd.device.BlueskyInterface.describe.html#ophyd.device.BlueskyInterface.describe" title="ophyd.device.BlueskyInterface.describe"><code class="xref py py-obj docutils literal"><span class="pre">describe</span></code></a>(self)</td>
<td>Provide schema and meta-data for <code class="xref py py-meth docutils literal"><span class="pre">read()</span></code>.</td>
</tr>
</tbody>
</table>
<p>along with three properties:</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="generated/ophyd.ophydobj.OphydObject.name.html#ophyd.ophydobj.OphydObject.name" title="ophyd.ophydobj.OphydObject.name"><code class="xref py py-obj docutils literal"><span class="pre">name</span></code></a></td>
<td>name of the device</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/ophyd.ophydobj.OphydObject.parent.html#ophyd.ophydobj.OphydObject.parent" title="ophyd.ophydobj.OphydObject.parent"><code class="xref py py-obj docutils literal"><span class="pre">parent</span></code></a></td>
<td>The parent of the ophyd object.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/ophyd.ophydobj.OphydObject.root.html#ophyd.ophydobj.OphydObject.root" title="ophyd.ophydobj.OphydObject.root"><code class="xref py py-obj docutils literal"><span class="pre">root</span></code></a></td>
<td>Walk parents to find ultimate ancestor (parent’s parent…).</td>
</tr>
</tbody>
</table>
<p>There are two optional methods which plans may use to ‘enable’ or
‘disable’ a device for data collection.  For example, a beam position
monitor maybe in continuous mode when not collecting data but be
stitched to a triggered mode for scanning.  By convention <code class="docutils literal"><span class="pre">unstage</span></code>
‘undoes’ whatever <code class="docutils literal"><span class="pre">stage</span></code> did to the state of the underlying
hardware and should return it to the state it was before <code class="docutils literal"><span class="pre">stage</span></code> was
called.</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="generated/ophyd.device.BlueskyInterface.stage.html#ophyd.device.BlueskyInterface.stage" title="ophyd.device.BlueskyInterface.stage"><code class="xref py py-obj docutils literal"><span class="pre">stage</span></code></a>(self)</td>
<td>Stage the device for data collection.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/ophyd.device.BlueskyInterface.unstage.html#ophyd.device.BlueskyInterface.unstage" title="ophyd.device.BlueskyInterface.unstage"><code class="xref py py-obj docutils literal"><span class="pre">unstage</span></code></a>(self)</td>
<td>Unstage the device.</td>
</tr>
</tbody>
</table>
<p>Two additional optional methods are used to notify devices if,
during a scan, the run is suspended.  The semantics of these methods
is coupled to <a class="reference external" href="https://blueskyproject.io/bluesky/run_engine_api.html#bluesky.run_engine.RunEngine" title="(in bluesky v1.6.0.post102+ge5de942)"><code class="xref py py-class docutils literal"><span class="pre">RunEngine</span></code></a>.</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="generated/ophyd.device.BlueskyInterface.pause.html#ophyd.device.BlueskyInterface.pause" title="ophyd.device.BlueskyInterface.pause"><code class="xref py py-obj docutils literal"><span class="pre">pause</span></code></a>(self)</td>
<td>Attempt to ‘pause’ the device.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/ophyd.device.BlueskyInterface.resume.html#ophyd.device.BlueskyInterface.resume" title="ophyd.device.BlueskyInterface.resume"><code class="xref py py-obj docutils literal"><span class="pre">resume</span></code></a>(self)</td>
<td>Resume a device from a ‘paused’ state.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="set-able-interface">
<h3>Set-able Interface<a class="headerlink" href="#set-able-interface" title="Permalink to this headline">¶</a></h3>
<p>Of course, most interesting uses of hardware requires telling it to do
rather than just reading from it!  To do that the high-level API has
the <code class="docutils literal"><span class="pre">set</span></code> method and a corresponding <code class="docutils literal"><span class="pre">stop</span></code> method to halt motion
before it is complete.</p>
<p>The <code class="docutils literal"><span class="pre">set</span></code> method which returns <cite>Status</cite> that can be used to tell
when motion is done. It is the responsibility of the <cite>ophyd</cite> objects
to implement this functionality in terms of the underlying control
system. Thus, from the perspective of the <a class="reference external" href="https://nsls-ii.github.io/bluesky">bluesky</a>, a motor, a
temperature controller, a gate valve, and software pseudo-positioner
can all be treated the same.</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="generated/ophyd.positioner.PositionerBase.set.html#ophyd.positioner.PositionerBase.set" title="ophyd.positioner.PositionerBase.set"><code class="xref py py-obj docutils literal"><span class="pre">set</span></code></a>(self,&nbsp;new_position,&nbsp;\*,&nbsp;timeout,&nbsp;…)</td>
<td>Set a value and return a Status object</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/ophyd.positioner.PositionerBase.stop.html#ophyd.positioner.PositionerBase.stop" title="ophyd.positioner.PositionerBase.stop"><code class="xref py py-obj docutils literal"><span class="pre">stop</span></code></a>(self,&nbsp;\*,&nbsp;success)</td>
<td>Stops motion.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<p>In addition to values we will want to read, as ‘data’, or set, as a
‘position’, there tend to be many values associated with the
configuration of hardware.  This is things like the velocity of a
motor, the PID loop parameters of a feedback loop, or the chip
temperature of a detector.  In general these are measurements that are
not directly related to the measurement of interest, but maybe needed for
understanding the measured data.</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="generated/ophyd.device.Device.configure.html#ophyd.device.Device.configure" title="ophyd.device.Device.configure"><code class="xref py py-obj docutils literal"><span class="pre">configure</span></code></a>(self,&nbsp;d,&nbsp;Any])</td>
<td>Configure the device for something during a run</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/ophyd.device.Device.read_configuration.html#ophyd.device.Device.read_configuration" title="ophyd.device.Device.read_configuration"><code class="xref py py-obj docutils literal"><span class="pre">read_configuration</span></code></a>(self)</td>
<td>Dictionary mapping names to value dicts with keys: value, timestamp</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/ophyd.device.Device.describe_configuration.html#ophyd.device.Device.describe_configuration" title="ophyd.device.Device.describe_configuration"><code class="xref py py-obj docutils literal"><span class="pre">describe_configuration</span></code></a>(self)</td>
<td>Provide schema &amp; meta-data for <code class="xref py py-meth docutils literal"><span class="pre">read_configuration()</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="fly-able-interface">
<h3>Fly-able Interface<a class="headerlink" href="#fly-able-interface" title="Permalink to this headline">¶</a></h3>
<p>There is some hardware where instead of the fine-grained control
provided by <code class="docutils literal"><span class="pre">set</span></code>, <code class="docutils literal"><span class="pre">trigger</span></code>, and <code class="docutils literal"><span class="pre">read</span></code> we just want to tell it
“Go!” and check back later when it is done.  This is typically done
when there needs to coordinated motion or triggering at rates beyond
what can reasonably done in via EPICS/Python and tend to be called ‘fly scans’.</p>
<p>The flyable interface provides four methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="generated/ophyd.flyers.FlyerInterface.kickoff.html#ophyd.flyers.FlyerInterface.kickoff" title="ophyd.flyers.FlyerInterface.kickoff"><code class="xref py py-obj docutils literal"><span class="pre">kickoff</span></code></a>(self)</td>
<td>Start a flyer</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/ophyd.flyers.FlyerInterface.complete.html#ophyd.flyers.FlyerInterface.complete" title="ophyd.flyers.FlyerInterface.complete"><code class="xref py py-obj docutils literal"><span class="pre">complete</span></code></a>(self)</td>
<td>Wait for flying to be complete.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/ophyd.flyers.FlyerInterface.describe_collect.html#ophyd.flyers.FlyerInterface.describe_collect" title="ophyd.flyers.FlyerInterface.describe_collect"><code class="xref py py-obj docutils literal"><span class="pre">describe_collect</span></code></a>(self)</td>
<td>Provide schema &amp; meta-data from <a class="reference external" href="https://blueskyproject.io/bluesky/hardware.html#collect" title="(in bluesky v1.6.0.post102+ge5de942)"><code class="xref py py-meth docutils literal"><span class="pre">collect()</span></code></a></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/ophyd.flyers.FlyerInterface.collect.html#ophyd.flyers.FlyerInterface.collect" title="ophyd.flyers.FlyerInterface.collect"><code class="xref py py-obj docutils literal"><span class="pre">collect</span></code></a>(self)</td>
<td>Retrieve data from the flyer as proto-events</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="asynchronous-status">
<h2>Asynchronous status<a class="headerlink" href="#asynchronous-status" title="Permalink to this headline">¶</a></h2>
<p>Hardware control and data collection is an inherently asynchronous
activity.  The many devices on a beamline are (in general) uncoupled
and can move / read independently.  This is reflected in the API as
most of the methods in <code class="xref py py-obj docutils literal"><span class="pre">BlueskyInterface</span></code> returning <cite>Status</cite>
objects and in the callback registry at the core of
<a class="reference internal" href="generated/ophyd.ophydobj.OphydObject.html#ophyd.ophydobj.OphydObject" title="ophyd.ophydobj.OphydObject"><code class="xref py py-obj docutils literal"><span class="pre">OphydObject</span></code></a>.  The <code class="xref py py-class docutils literal"><span class="pre">StatusBase</span></code> objects are the
bridge between the asynchronous behavior of the underlying control
system and the asynchronous behavior of
<a class="reference external" href="https://blueskyproject.io/bluesky/run_engine_api.html#bluesky.run_engine.RunEngine" title="(in bluesky v1.6.0.post102+ge5de942)"><code class="xref py py-class docutils literal"><span class="pre">RunEngine</span></code></a>.</p>
<p>The core API of the status objects is a property and a private method:</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">status.StatusBase.finished_cb</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">status.StatusBase._finished</span></code></td>
<td>Inform the status object that it is done and if it succeeded.</td>
</tr>
</tbody>
</table>
<p>The <a class="reference external" href="https://nsls-ii.github.io/bluesky">bluesky</a> side assigns a callback to
<code class="xref py py-attr docutils literal"><span class="pre">status.StatusBase.finished_cb</span></code> which is triggered when the
<code class="xref py py-meth docutils literal"><span class="pre">status.StatusBase._finished()</span></code> method is called.  The status object
conveys both that the action it ‘done’ and if the action was
successful or not.</p>
</div>
<div class="section" id="callbacks">
<h2>Callbacks<a class="headerlink" href="#callbacks" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>The base class of almost all objects in <code class="docutils literal"><span class="pre">ophyd</span></code> is <a class="reference internal" href="generated/ophyd.ophydobj.OphydObject.html#ophyd.ophydobj.OphydObject" title="ophyd.ophydobj.OphydObject"><code class="xref py py-obj docutils literal"><span class="pre">OphydObject</span></code></a></dt>
<dd>a callback registry</dd>
</dl>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="generated/ophyd.ophydobj.OphydObject.html#ophyd.ophydobj.OphydObject" title="ophyd.ophydobj.OphydObject"><code class="xref py py-obj docutils literal"><span class="pre">OphydObject</span></code></a></td>
<td>The base class for all objects in Ophyd</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/ophyd.ophydobj.OphydObject.event_types.html#ophyd.ophydobj.OphydObject.event_types" title="ophyd.ophydobj.OphydObject.event_types"><code class="xref py py-obj docutils literal"><span class="pre">OphydObject.event_types</span></code></a></td>
<td>Events that can be subscribed to via <cite>obj.subscribe</cite></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/ophyd.ophydobj.OphydObject.subscribe.html#ophyd.ophydobj.OphydObject.subscribe" title="ophyd.ophydobj.OphydObject.subscribe"><code class="xref py py-obj docutils literal"><span class="pre">OphydObject.subscribe</span></code></a></td>
<td>Subscribe to events this event_type generates.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/ophyd.ophydobj.OphydObject.unsubscribe.html#ophyd.ophydobj.OphydObject.unsubscribe" title="ophyd.ophydobj.OphydObject.unsubscribe"><code class="xref py py-obj docutils literal"><span class="pre">OphydObject.unsubscribe</span></code></a></td>
<td>Remove a subscription</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/ophyd.ophydobj.OphydObject.clear_sub.html#ophyd.ophydobj.OphydObject.clear_sub" title="ophyd.ophydobj.OphydObject.clear_sub"><code class="xref py py-obj docutils literal"><span class="pre">OphydObject.clear_sub</span></code></a></td>
<td>Remove a subscription, given the original callback function</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/ophyd.ophydobj.OphydObject._run_subs.html#ophyd.ophydobj.OphydObject._run_subs" title="ophyd.ophydobj.OphydObject._run_subs"><code class="xref py py-obj docutils literal"><span class="pre">OphydObject._run_subs</span></code></a></td>
<td>Run a set of subscription callbacks</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/ophyd.ophydobj.OphydObject._reset_sub.html#ophyd.ophydobj.OphydObject._reset_sub" title="ophyd.ophydobj.OphydObject._reset_sub"><code class="xref py py-obj docutils literal"><span class="pre">OphydObject._reset_sub</span></code></a></td>
<td>Remove all subscriptions in an event type</td>
</tr>
</tbody>
</table>
<p>This registry is used to connect to the underlying events from the
control system and propagate them up to bluesky, either via
<cite>~status.StatusBase</cite> objects or via direct subscription from the
<a class="reference external" href="https://blueskyproject.io/bluesky/run_engine_api.html#bluesky.run_engine.RunEngine" title="(in bluesky v1.6.0.post102+ge5de942)"><code class="xref py py-class docutils literal"><span class="pre">RunEngine</span></code></a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="generated/ophyd.device.BlueskyInterface.trigger.html" class="btn btn-neutral float-right" title="ophyd.device.BlueskyInterface.trigger" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Ophyd" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Brookhaven National Lab

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>