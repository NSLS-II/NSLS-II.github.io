

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Status objects (Futures) &mdash; ophyd  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Positioners" href="positioners.html" />
    <link rel="prev" title="Signals" href="signals.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> ophyd
          

          
          </a>

          
            
            
              <div class="version">
                1.5.1b1.post6+gb99540e
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Ophyd's Core Functionality</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="device-overview.html">Device and Component</a></li>
<li class="toctree-l1"><a class="reference internal" href="signals.html">Signals</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Status objects (Futures)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creation-and-marking-completion">Creation and Marking Completion</a></li>
<li class="toctree-l2"><a class="reference internal" href="#notification-of-completion">Notification of Completion</a></li>
<li class="toctree-l2"><a class="reference internal" href="#subscriptionstatus">SubscriptionStatus</a></li>
<li class="toctree-l2"><a class="reference internal" href="#partial-progress-updates">Partial Progress Updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="#status-api-details">Status API details</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="positioners.html">Positioners</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging and Logging</a></li>
</ul>
<p class="caption"><span class="caption-text">Built-in Device Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="area-detector.html">Area Detectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="builtin-devices.html">Ready-to-Use Devices</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release History</a></li>
<li class="toctree-l1"><a class="reference internal" href="OEP/index.html">Ophyd Enhancement Proposals</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Docker setup</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ophyd</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Status objects (Futures)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/status.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="status-objects-futures">
<h1>Status objects (Futures)<a class="headerlink" href="#status-objects-futures" title="Permalink to this headline">¶</a></h1>
<p>Ophyd Status objects signal when some potentially-lengthy action is complete.
The action may be moving a motor, acquiring an image, or waiting for a
temperature controller to reach a setpoint. From a general software engineering
point of view, they are like <a class="reference external" href="https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.Future" title="(in Python v3.8)"><code class="xref py py-obj docutils literal"><span class="pre">concurrent.futures.Future</span></code></a> objects in the
Python standard library but with some semantics specific to controlling
physical hardware.</p>
<p>The lifecycle of a Status object is:</p>
<ol class="arabic simple">
<li>A Status object is created with an associated timeout. The timeout clock
starts.</li>
<li>The recipient of the Status object may add callbacks that will be notified
when the Status object completes.</li>
<li>The Status object is marked as completed successfully, or marked as
completed with an error, or the timeout is reached, whichever happens first.
The callbacks are called in any case.</li>
</ol>
<div class="section" id="creation-and-marking-completion">
<h2>Creation and Marking Completion<a class="headerlink" href="#creation-and-marking-completion" title="Permalink to this headline">¶</a></h2>
<p>A <em>timeout</em>, given in seconds, is optional but strongly recommended. (The
default, <code class="docutils literal"><span class="pre">None</span></code> means it will wait forever to be marked completed.)</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ophyd</span> <span class="kn">import</span> <span class="n">Status</span>

<span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
</pre></div>
</div>
<p>Additionally, it accepts a <em>settle_time</em>, an extra delay which will be added
between the control system reporting successful completion and the Status being
marked as finished. This is also given in seconds. It is <code class="docutils literal"><span class="pre">0</span></code> by default.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">settle_time</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>The status should be notified by the control system, typically from another
thread or task, when some action is complete. To mark success, call
<code class="xref py py-obj docutils literal"><span class="pre">set_finished</span></code>. To mark failure, call
<code class="xref py py-obj docutils literal"><span class="pre">set_exception</span></code>, passing it an Exception giving
information about the cause of failure.</p>
<p>As a toy example, we could hook it up to a <a class="reference external" href="https://docs.python.org/3/library/threading.html#threading.Timer" title="(in Python v3.8)"><code class="xref py py-obj docutils literal"><span class="pre">threading.Timer</span></code></a> that marks it
as succeeded or failed based on a coin flip.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">threading</span>

<span class="k">def</span> <span class="nf">mark_done</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>  <span class="c1"># coin flip</span>
        <span class="n">status</span><span class="o">.</span><span class="n">set_finished</span><span class="p">()</span>  <span class="c1"># success</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">error</span> <span class="o">=</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Bad luck&quot;</span><span class="p">)</span>
        <span class="n">status</span><span class="o">.</span><span class="n">set_exception</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>  <span class="c1"># failure</span>

<span class="c1"># Run mark_done 5 seconds from now in a thread.</span>
<span class="n">threading</span><span class="o">.</span><span class="n">Timer</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">mark_done</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
<p>See the tutorials for more realistic examples involving integration with an
actual control system.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version v1.5.0: </span>In previous versions of ophyd, the Status objects were marked as completed
by calling <code class="docutils literal"><span class="pre">status._finished(success=True)</span></code> or
<code class="docutils literal"><span class="pre">status._finished(success=False)</span></code>. This is still supported but the new
methods <code class="docutils literal"><span class="pre">status.set_finished()</span></code> and <code class="docutils literal"><span class="pre">status.set_exception(...)</span></code> are
recommended because they can provide more information about the <em>cause</em> of
failure, and they match the Python standard library’s
<a class="reference external" href="https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.Future" title="(in Python v3.8)"><code class="xref py py-obj docutils literal"><span class="pre">concurrent.futures.Future</span></code></a> interface.</p>
</div>
</div>
<div class="section" id="notification-of-completion">
<h2>Notification of Completion<a class="headerlink" href="#notification-of-completion" title="Permalink to this headline">¶</a></h2>
<p>The recipient of the Status object can request synchronous or asynchronous
notification of completion. To wait synchronously, the <code class="xref py py-obj docutils literal"><span class="pre">wait</span></code>
will block until the Status is marked as complete or a timeout has expired.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">status</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>  <span class="c1"># Wait forever for the Status to finish or time out.</span>
<span class="n">status</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>  <span class="c1"># Wait for at most 10 seconds.</span>
</pre></div>
</div>
<p>If and when the Status completes successfully, this will return <code class="docutils literal"><span class="pre">None</span></code>. If
the Status is marked as failed, the exception (e.g. <code class="docutils literal"><span class="pre">Exception(&quot;Bad</span> <span class="pre">luck&quot;)</span></code>
in our example above) will be raised. If the Status’ own timeout has expired,
<code class="xref py py-obj docutils literal"><span class="pre">StatusTimeoutError</span></code> will be raised. If a timeout given to
<code class="xref py py-obj docutils literal"><span class="pre">wait</span></code> expires before any of these things happen,
<code class="xref py py-obj docutils literal"><span class="pre">WaitTimeoutError</span></code> will be raised.</p>
<p>The method <code class="xref py py-obj docutils literal"><span class="pre">exception</span></code> behaves similarly to
<code class="xref py py-obj docutils literal"><span class="pre">wait</span></code>; the only difference is that if the Status is marked as
failed or the Status’ own timeout expires it <em>returns</em> the exception rather
than <em>raising</em> it. Both return <code class="docutils literal"><span class="pre">None</span></code> if the Status finishes successfully,
and both raise <code class="xref py py-obj docutils literal"><span class="pre">WaitTimeoutError</span></code> if the given timeout expires
before the Status completes or times out.</p>
<p>Alternatively, the recipient of the Status object can ask to be notified of
completion asynchronously by adding a callback. The callback will be called
when the Status is marked as complete or its timeout has expired. (If no
timeout was given, the callback might never be called. This is why providing a
timeout is strongly recommended.)</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">status</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s2"> is done&quot;</span><span class="p">)</span>

<span class="n">status</span><span class="o">.</span><span class="n">add_callback</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>
</pre></div>
</div>
<p>Callbacks may be added at any time. Until the Status completes, it holds a hard
reference to each callback in a list, <code class="docutils literal"><span class="pre">status.callbacks</span></code>. The list is cleared
when the callback completes. Any callbacks added to a Status object <em>after</em>
completion will be called immediately, and no reference will be held.</p>
<p>Each callback is passed to the Status object as an argument, and it can use
this to distinguish success from failure.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">status</span><span class="p">):</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">exception</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">error</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s2"> has completed successfully.&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s2"> has failed with error </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="subscriptionstatus">
<h2>SubscriptionStatus<a class="headerlink" href="#subscriptionstatus" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="#ophyd.status.SubscriptionStatus" title="ophyd.status.SubscriptionStatus"><code class="xref py py-class docutils literal"><span class="pre">SubscriptionStatus</span></code></a> is a special Status object that
correctly and succinctly handles a common use case, wherein the Status object
is marked finished based on some ophyd event. It reduces this:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ophyd</span> <span class="kn">import</span> <span class="n">Device</span><span class="p">,</span> <span class="n">Component</span><span class="p">,</span> <span class="n">DeviceStatus</span>

<span class="k">class</span> <span class="nc">MyToyDetector</span><span class="p">(</span><span class="n">Device</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="c1"># When set to 1, acquires, and then goes back to 0.</span>
    <span class="n">acquire</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">trigger</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">check_value</span><span class="p">(</span><span class="n">old_value</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="s2">&quot;Mark status as finished when the acquisition is complete.&quot;</span>
            <span class="k">if</span> <span class="n">old_value</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">status</span><span class="o">.</span><span class="n">set_finished</span><span class="p">()</span>
                <span class="c1"># Clear the subscription.</span>
                <span class="n">sself</span><span class="o">.</span><span class="n">acquire</span><span class="o">.</span><span class="n">clear_sub</span><span class="p">(</span><span class="n">check_value</span><span class="p">)</span>

        <span class="n">status</span> <span class="o">=</span> <span class="n">DeviceStatus</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acquire</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">acquire</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">check_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">acquire</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">status</span>
</pre></div>
</div>
<p>to this:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ophyd</span> <span class="kn">import</span> <span class="n">Device</span><span class="p">,</span> <span class="n">Component</span><span class="p">,</span> <span class="n">SubscriptionStatus</span>

<span class="k">class</span> <span class="nc">MyToyDetector</span><span class="p">(</span><span class="n">Device</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="c1"># When set to 1, acquires, and then goes back to 0.</span>
    <span class="n">acquire</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">trigger</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">check_value</span><span class="p">(</span><span class="n">old_value</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="s2">&quot;Return True when the acquisition is complete, False otherwise.&quot;</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">old_value</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>

        <span class="n">status</span> <span class="o">=</span> <span class="n">SubscriptionStatus</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acquire</span><span class="p">,</span> <span class="n">check_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">acquire</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">status</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal"><span class="pre">set_finished</span></code>, <code class="docutils literal"><span class="pre">subscribe</span></code> and <code class="docutils literal"><span class="pre">clear_sub</span></code> are gone; they are
handled automatically, internally. See
<a class="reference internal" href="#ophyd.status.SubscriptionStatus" title="ophyd.status.SubscriptionStatus"><code class="xref py py-class docutils literal"><span class="pre">SubscriptionStatus</span></code></a> for additional options.</p>
</div>
<div class="section" id="partial-progress-updates">
<h2>Partial Progress Updates<a class="headerlink" href="#partial-progress-updates" title="Permalink to this headline">¶</a></h2>
<p>Some Status objects provide an additional method named <code class="docutils literal"><span class="pre">watch</span></code>, as in
<a class="reference internal" href="#ophyd.status.MoveStatus.watch" title="ophyd.status.MoveStatus.watch"><code class="xref py py-meth docutils literal"><span class="pre">watch()</span></code></a>, which can be used to subscribe to
<em>incremental</em> progress updates suitable for building progress bars. See
<a class="reference external" href="https://blueskyproject.io/bluesky/progress-bar.html" title="(in bluesky v1.6.2)"><span>Progress Bar</span></a> for one application of this feature.</p>
<p>The <code class="docutils literal"><span class="pre">watch</span></code> method accepts a callback which must accept the following
parameters as optional keyword arguments:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">name</span></code></li>
<li><code class="docutils literal"><span class="pre">current</span></code></li>
<li><code class="docutils literal"><span class="pre">initial</span></code></li>
<li><code class="docutils literal"><span class="pre">target</span></code></li>
<li><code class="docutils literal"><span class="pre">unit</span></code></li>
<li><code class="docutils literal"><span class="pre">precision</span></code></li>
<li><code class="docutils literal"><span class="pre">fraction</span></code></li>
<li><code class="docutils literal"><span class="pre">time_elapsed</span></code></li>
<li><code class="docutils literal"><span class="pre">time_remaining</span></code></li>
</ul>
<p>The callback may receive a subset of these depending on how much we can know
about the progress of a particular action. In the case of
<a class="reference internal" href="#ophyd.status.MoveStatus" title="ophyd.status.MoveStatus"><code class="xref py py-obj docutils literal"><span class="pre">ophyd.status.MoveStatus</span></code></a> and
<a class="reference internal" href="#ophyd.areadetector.trigger_mixins.ADTriggerStatus" title="ophyd.areadetector.trigger_mixins.ADTriggerStatus"><code class="xref py py-obj docutils literal"><span class="pre">ophyd.areadetector.trigger_mixins.ADTriggerStatus</span></code></a>, we know a lot, from
which one can build a frequently-updating progress bar with a realistic
estimated time of completion. In the case of a generic
<a class="reference internal" href="#ophyd.status.DeviceStatus" title="ophyd.status.DeviceStatus"><code class="xref py py-obj docutils literal"><span class="pre">ophyd.status.DeviceStatus</span></code></a>, we only know the name of the assocated
Device, when the action starts, and when the action ends.</p>
</div>
<div class="section" id="status-api-details">
<h2>Status API details<a class="headerlink" href="#status-api-details" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ophyd.status.StatusBase">
<em class="property">class </em><code class="descclassname">ophyd.status.</code><code class="descname">StatusBase</code><span class="sig-paren">(</span><em>*</em>, <em>timeout=None</em>, <em>settle_time=0</em>, <em>done=None</em>, <em>success=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ophyd.status.StatusBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Track the status of a potentially-lengthy action like moving or triggering.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>timeout: float, optional</strong></dt>
<dd><p class="first last">The amount of time to wait before marking the Status as failed.  If
<code class="docutils literal"><span class="pre">None</span></code> (default) wait forever. It is strongly encouraged to set a
finite timeout.  If settle_time below is set, that time is added to the
effective timeout.</p>
</dd>
<dt><strong>settle_time: float, optional</strong></dt>
<dd><p class="first last">The amount of time to wait between the caller specifying that the
status has completed to running callbacks. Default is 0.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Theory of operation:</p>
<p>This employs two <code class="docutils literal"><span class="pre">threading.Event</span></code> objects, one thread the runs for
(timeout + settle_time) seconds, and one thread that runs for
settle_time seconds (if settle_time is nonzero).</p>
<p>At __init__ time, a <em>timeout</em> and <em>settle_time</em> are specified. A thread
is started, on which user callbacks, registered after __init__ time via
<a class="reference internal" href="#ophyd.status.StatusBase.add_callback" title="ophyd.status.StatusBase.add_callback"><code class="xref py py-meth docutils literal"><span class="pre">add_callback()</span></code></a>, will eventually be run. The thread waits on an
Event be set or (timeout + settle_time) seconds to pass, whichever
happens first.</p>
<p>If (timeout + settle_time) expires and the Event has not
been set, an internal Exception is set to <code class="docutils literal"><span class="pre">StatusTimeoutError</span></code>, and a
second Event is set, marking the Status as done and failed. The
callbacks are run.</p>
<p>If a callback is registered after the Status is done, it will be run
immediately.</p>
<p>If the first Event is set before (timeout + settle_time) expires,
then the second Event is set and no internal Exception is set, marking
the Status as done and successful. The callbacks are run.</p>
<p>There are two methods that directly set the first Event. One,
:meth:set_exception, sets it directly after setting the internal
Exception.  The other, <a class="reference internal" href="#ophyd.status.StatusBase.set_finished" title="ophyd.status.StatusBase.set_finished"><code class="xref py py-meth docutils literal"><span class="pre">set_finished()</span></code></a>, starts a
<code class="docutils literal"><span class="pre">threading.Timer</span></code> that will set it after a delay (the settle_time).
One of these methods may be called, and at most once. If one is called
twice or if both are called, <code class="docutils literal"><span class="pre">InvalidState</span></code> is raised. If they are
called too late to prevent a <code class="docutils literal"><span class="pre">StatusTimeoutError</span></code>, they are ignored
but one call is still allowed. Thus, an external callback, e.g. pyepics,
may reports success or failure after the Status object has expired, but
to no effect because the callbacks have already been called and the
program has moved on.</p>
<dl class="method">
<dt id="ophyd.status.StatusBase.add_callback">
<code class="descname">add_callback</code><span class="sig-paren">(</span><em>self</em>, <em>callback</em><span class="sig-paren">)</span><a class="headerlink" href="#ophyd.status.StatusBase.add_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a callback to be called once when the Status finishes.</p>
<p>The callback will be called exactly once. If the Status is finished
before a callback is added, it will be called immediately. This is
threadsafe.</p>
<p>The callback will be called regardless of success of failure. The
callback has access to this status object, so it can distinguish success
or failure by inspecting the object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>callback: callable</strong></dt>
<dd><p class="first">Expected signature: <code class="docutils literal"><span class="pre">callback(status)</span></code>.</p>
<p class="last">The signature <code class="docutils literal"><span class="pre">callback()</span></code> is also supported for
backward-compatibility but will issue warnings. Support will be
removed in a future release of ophyd.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="ophyd.status.StatusBase.callbacks">
<code class="descname">callbacks</code><a class="headerlink" href="#ophyd.status.StatusBase.callbacks" title="Permalink to this definition">¶</a></dt>
<dd><p>Callbacks to be run when the status is marked as finished</p>
</dd></dl>

<dl class="attribute">
<dt id="ophyd.status.StatusBase.done">
<code class="descname">done</code><a class="headerlink" href="#ophyd.status.StatusBase.done" title="Permalink to this definition">¶</a></dt>
<dd><p>Boolean indicating whether associated operation has completed.</p>
<p>This is set to True at __init__ time or by calling
<a class="reference internal" href="#ophyd.status.StatusBase.set_finished" title="ophyd.status.StatusBase.set_finished"><code class="xref py py-meth docutils literal"><span class="pre">set_finished()</span></code></a>, <a class="reference internal" href="#ophyd.status.StatusBase.set_exception" title="ophyd.status.StatusBase.set_exception"><code class="xref py py-meth docutils literal"><span class="pre">set_exception()</span></code></a>, or (deprecated)
<code class="xref py py-meth docutils literal"><span class="pre">_finished()</span></code>. Once True, it can never become False.</p>
</dd></dl>

<dl class="method">
<dt id="ophyd.status.StatusBase.exception">
<code class="descname">exception</code><span class="sig-paren">(</span><em>self</em>, <em>timeout=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ophyd.status.StatusBase.exception" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the exception raised by the action.</p>
<p>If the action has completed successfully, return <code class="docutils literal"><span class="pre">None</span></code>. If it has
finished in error, return the exception.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>timeout: Union[Number, None], optional</strong></dt>
<dd><p class="first last">If None (default) wait indefinitely until the status finishes.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><dl class="first last docutils">
<dt>WaitTimeoutError</dt>
<dd><p class="first last">If the status has not completed within <code class="docutils literal"><span class="pre">timeout</span></code> (starting from
when this method was called, not from the beginning of the action).</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ophyd.status.StatusBase.set_exception">
<code class="descname">set_exception</code><span class="sig-paren">(</span><em>self</em>, <em>exc</em><span class="sig-paren">)</span><a class="headerlink" href="#ophyd.status.StatusBase.set_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark as finished but failed with the given Exception.</p>
<p>This method should generally not be called by the <em>recipient</em> of this
Status object, but only by the object that created and returned it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>exc: Exception</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ophyd.status.StatusBase.set_finished">
<code class="descname">set_finished</code><span class="sig-paren">(</span><em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#ophyd.status.StatusBase.set_finished" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark as finished successfully.</p>
<p>This method should generally not be called by the <em>recipient</em> of this
Status object, but only by the object that created and returned it.</p>
</dd></dl>

<dl class="attribute">
<dt id="ophyd.status.StatusBase.settle_time">
<code class="descname">settle_time</code><a class="headerlink" href="#ophyd.status.StatusBase.settle_time" title="Permalink to this definition">¶</a></dt>
<dd><p>A delay between when <a class="reference internal" href="#ophyd.status.StatusBase.set_finished" title="ophyd.status.StatusBase.set_finished"><code class="xref py py-meth docutils literal"><span class="pre">set_finished()</span></code></a> is when the Status is done.</p>
<p>This is set when the Status is created, and it cannot be changed.</p>
</dd></dl>

<dl class="attribute">
<dt id="ophyd.status.StatusBase.success">
<code class="descname">success</code><a class="headerlink" href="#ophyd.status.StatusBase.success" title="Permalink to this definition">¶</a></dt>
<dd><p>Boolean indicating whether associated operation has completed.</p>
<p>This is set to True at __init__ time or by calling
<a class="reference internal" href="#ophyd.status.StatusBase.set_finished" title="ophyd.status.StatusBase.set_finished"><code class="xref py py-meth docutils literal"><span class="pre">set_finished()</span></code></a>, <a class="reference internal" href="#ophyd.status.StatusBase.set_exception" title="ophyd.status.StatusBase.set_exception"><code class="xref py py-meth docutils literal"><span class="pre">set_exception()</span></code></a>, or (deprecated)
<code class="xref py py-meth docutils literal"><span class="pre">_finished()</span></code>. Once True, it can never become False.</p>
</dd></dl>

<dl class="attribute">
<dt id="ophyd.status.StatusBase.timeout">
<code class="descname">timeout</code><a class="headerlink" href="#ophyd.status.StatusBase.timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>The timeout for this action.</p>
<p>This is set when the Status is created, and it cannot be changed.</p>
</dd></dl>

<dl class="method">
<dt id="ophyd.status.StatusBase.wait">
<code class="descname">wait</code><span class="sig-paren">(</span><em>self</em>, <em>timeout=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ophyd.status.StatusBase.wait" title="Permalink to this definition">¶</a></dt>
<dd><p>Block until the action completes.</p>
<p>When the action has finished succesfully, return <code class="docutils literal"><span class="pre">None</span></code>. If the
action has failed, raise the exception.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>timeout: Union[Number, None], optional</strong></dt>
<dd><p class="first last">If None (default) wait indefinitely until the status finishes.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><dl class="first last docutils">
<dt>WaitTimeoutError</dt>
<dd><p class="first last">If the status has not completed within <code class="docutils literal"><span class="pre">timeout</span></code> (starting from
when this method was called, not from the beginning of the action).</p>
</dd>
<dt>StatusTimeoutError</dt>
<dd><p class="first last">If the status has failed because the <em>timeout</em> that it was
initialized with has expired.</p>
</dd>
<dt>Exception</dt>
<dd><p class="first last">This is <code class="docutils literal"><span class="pre">status.exception()</span></code>, raised if the status has finished
with an error.  This may include <code class="docutils literal"><span class="pre">TimeoutError</span></code>, which
indicates that the action itself raised <code class="docutils literal"><span class="pre">TimeoutError</span></code>, distinct
from <code class="docutils literal"><span class="pre">WaitTimeoutError</span></code> above.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<p>In addition we provide specialized subclasses that know more about the object
they are tied to.</p>
<img src="_images/inheritance-15bc9368c2f46f77d1599b9d515a6682240bfc8b.png" alt="Inheritance diagram of ophyd.status.StatusBase, ophyd.status.MoveStatus, ophyd.status.DeviceStatus, ophyd.status.Status, ophyd.status.SubscriptionStatus" usemap="#inheritance6e3f1d7b62" class="inheritance"/>
<map id="inheritance6e3f1d7b62" name="inheritance6e3f1d7b62">
<area shape="rect" id="node1" href="#ophyd.status.DeviceStatus" target="_top" title="Track the status of a potentially&#45;lengthy action like moving or triggering." alt="" coords="193,29,344,55"/>
<area shape="rect" id="node3" href="#ophyd.status.MoveStatus" target="_top" title="Track the state of a movement from some initial to final &quot;position&quot;." alt="" coords="414,5,557,31"/>
<area shape="rect" id="node5" href="#ophyd.status.SubscriptionStatus" target="_top" title="Status updated via `ophyd` events" alt="" coords="392,55,579,80"/>
<area shape="rect" id="node2" href="#ophyd.status.StatusBase" target="_top" title="Track the status of a potentially&#45;lengthy action like moving or triggering." alt="" coords="5,55,145,80"/>
<area shape="rect" id="node4" href="#ophyd.status.Status" target="_top" title="Track the status of a potentially&#45;lengthy action like moving or triggering." alt="" coords="215,79,323,104"/>
</map><dl class="class">
<dt id="ophyd.status.Status">
<em class="property">class </em><code class="descclassname">ophyd.status.</code><code class="descname">Status</code><span class="sig-paren">(</span><em>obj=None</em>, <em>timeout=None</em>, <em>settle_time=0</em>, <em>done=None</em>, <em>success=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ophyd.status.Status" title="Permalink to this definition">¶</a></dt>
<dd><p>Track the status of a potentially-lengthy action like moving or triggering.</p>
<p>This has room for an option <code class="docutils literal"><span class="pre">obj</span></code> parameter, noting the object associated
with action. Status does not use this internally, but it can be useful for
external code to keep track of things.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>timeout: float, optional</strong></dt>
<dd><p class="first last">The amount of time to wait before marking the Status as failed.  If
<code class="docutils literal"><span class="pre">None</span></code> (default) wait forever. It is strongly encouraged to set a
finite timeout.  If settle_time below is set, that time is added to the
effective timeout.</p>
</dd>
<dt><strong>settle_time: float, optional</strong></dt>
<dd><p class="first last">The amount of time to wait between the caller specifying that the
status has completed to running callbacks. Default is 0.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Attributes:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>obj</strong> <span class="classifier-delimiter">:</span> <span class="classifier">any or None</span></dt>
<dd><p class="first last">The object</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="ophyd.status.DeviceStatus">
<em class="property">class </em><code class="descclassname">ophyd.status.</code><code class="descname">DeviceStatus</code><span class="sig-paren">(</span><em>device</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ophyd.status.DeviceStatus" title="Permalink to this definition">¶</a></dt>
<dd><p>Track the status of a potentially-lengthy action like moving or triggering.</p>
<p>This adds the notion of a Device and minimal support for progress bars.
(They only get notified of the Device name and the time of completion.)
See MoveStatus for a richer implementation of progress bars.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>timeout: float, optional</strong></dt>
<dd><p class="first last">The amount of time to wait before marking the Status as failed.  If
<code class="docutils literal"><span class="pre">None</span></code> (default) wait forever. It is strongly encouraged to set a
finite timeout.  If settle_time below is set, that time is added to the
effective timeout.</p>
</dd>
<dt><strong>settle_time: float, optional</strong></dt>
<dd><p class="first last">The amount of time to wait between the caller specifying that the
status has completed to running callbacks. Default is 0.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ophyd.status.DeviceStatus.watch">
<code class="descname">watch</code><span class="sig-paren">(</span><em>self</em>, <em>func</em><span class="sig-paren">)</span><a class="headerlink" href="#ophyd.status.DeviceStatus.watch" title="Permalink to this definition">¶</a></dt>
<dd><p>Subscribe to notifications about partial progress.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ophyd.status.MoveStatus">
<em class="property">class </em><code class="descclassname">ophyd.status.</code><code class="descname">MoveStatus</code><span class="sig-paren">(</span><em>positioner</em>, <em>target</em>, <em>*</em>, <em>start_ts=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ophyd.status.MoveStatus" title="Permalink to this definition">¶</a></dt>
<dd><p>Track the state of a movement from some initial to final “position”.</p>
<p>The position could a physical position, a “position” in a pseudo-space, a
temperature, etc. This constraint allows richer support for progress bars,
including progress updates and an ETA.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>positioner</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Positioner</span></dt>
<dd></dd>
<dt><strong>target</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float or array-like</span></dt>
<dd><p class="first last">Target position</p>
</dd>
<dt><strong>done</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd><p class="first last">Whether or not the motion has already completed</p>
</dd>
<dt><strong>success</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd><p class="first last">If motion has already completed, the status of that motion</p>
</dd>
<dt><strong>start_ts</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">The motion start timestamp</p>
</dd>
<dt><strong>timeout</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">The default timeout to use for a blocking wait, and the amount of time
to wait to mark the motion as failed</p>
</dd>
<dt><strong>settle_time</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">The amount of time to wait between motion completion and running
callbacks</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Attributes:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>pos</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Positioner</span></dt>
<dd></dd>
<dt><strong>target</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float or array-like</span></dt>
<dd><p class="first last">Target position</p>
</dd>
<dt><a class="reference external" href="https://blueskyproject.io/bluesky/hardware.html#done" title="(in bluesky v1.6.2)"><code class="xref py py-obj docutils literal"><span class="pre">done</span></code></a> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Boolean indicating whether associated operation has completed.</p>
</dd>
<dt><strong>start_ts</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The motion start timestamp</p>
</dd>
<dt><strong>finish_ts</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The motion completd timestamp</p>
</dd>
<dt><strong>finish_pos</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float or ndarray</span></dt>
<dd><p class="first last">The final position</p>
</dd>
<dt><a class="reference external" href="https://blueskyproject.io/bluesky/hardware.html#success" title="(in bluesky v1.6.2)"><code class="xref py py-obj docutils literal"><span class="pre">success</span></code></a> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Boolean indicating whether associated operation has completed.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="ophyd.status.MoveStatus.elapsed">
<code class="descname">elapsed</code><a class="headerlink" href="#ophyd.status.MoveStatus.elapsed" title="Permalink to this definition">¶</a></dt>
<dd><p>Elapsed time</p>
</dd></dl>

<dl class="attribute">
<dt id="ophyd.status.MoveStatus.error">
<code class="descname">error</code><a class="headerlink" href="#ophyd.status.MoveStatus.error" title="Permalink to this definition">¶</a></dt>
<dd><p>Error between target position and current* position</p>
<ul class="simple">
<li>If motion is already complete, the final position is used</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="ophyd.status.MoveStatus.watch">
<code class="descname">watch</code><span class="sig-paren">(</span><em>self</em>, <em>func</em><span class="sig-paren">)</span><a class="headerlink" href="#ophyd.status.MoveStatus.watch" title="Permalink to this definition">¶</a></dt>
<dd><p>Subscribe to notifications about partial progress.</p>
<p>This is useful for progress bars.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>func</strong> <span class="classifier-delimiter">:</span> <span class="classifier">callable</span></dt>
<dd><p class="first">Expected to accept the keyword aruments:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">name</span></code></li>
<li><code class="docutils literal"><span class="pre">current</span></code></li>
<li><code class="docutils literal"><span class="pre">initial</span></code></li>
<li><code class="docutils literal"><span class="pre">target</span></code></li>
<li><code class="docutils literal"><span class="pre">unit</span></code></li>
<li><code class="docutils literal"><span class="pre">precision</span></code></li>
<li><code class="docutils literal"><span class="pre">fraction</span></code></li>
<li><code class="docutils literal"><span class="pre">time_elapsed</span></code></li>
<li><code class="docutils literal"><span class="pre">time_remaining</span></code></li>
</ul>
</div></blockquote>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ophyd.areadetector.trigger_mixins.ADTriggerStatus">
<em class="property">class </em><code class="descclassname">ophyd.areadetector.trigger_mixins.</code><code class="descname">ADTriggerStatus</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ophyd.areadetector.trigger_mixins.ADTriggerStatus" title="Permalink to this definition">¶</a></dt>
<dd><p>A Status for AreaDetector triggers</p>
<p>A special status object that notifies watches (progress bars)
based on comparing device.cam.array_counter to  device.cam.num_images.</p>
</dd></dl>

<dl class="class">
<dt id="ophyd.status.SubscriptionStatus">
<em class="property">class </em><code class="descclassname">ophyd.status.</code><code class="descname">SubscriptionStatus</code><span class="sig-paren">(</span><em>device</em>, <em>callback</em>, <em>event_type=None</em>, <em>timeout=None</em>, <em>settle_time=None</em>, <em>run=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ophyd.status.SubscriptionStatus" title="Permalink to this definition">¶</a></dt>
<dd><p>Status updated via <cite>ophyd</cite> events</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>device</strong> <span class="classifier-delimiter">:</span> <span class="classifier">obj</span></dt>
<dd></dd>
<dt><strong>callback</strong> <span class="classifier-delimiter">:</span> <span class="classifier">callable</span></dt>
<dd><p class="first last">Callback that takes event information and returns a boolean. Signature
should be <cite>f(*args, **kwargs)</cite></p>
</dd>
<dt><strong>event_type</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first last">Name of event type to check whether the device has finished succesfully</p>
</dd>
<dt><strong>timeout</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Maximum timeout to wait to mark the request as a failure</p>
</dd>
<dt><strong>settle_time</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Time to wait after completion until running callbacks</p>
</dd>
<dt><strong>run: bool, optional</strong></dt>
<dd><p class="first last">Run the callback now</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ophyd.status.SubscriptionStatus.check_value">
<code class="descname">check_value</code><span class="sig-paren">(</span><em>self</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ophyd.status.SubscriptionStatus.check_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the status object</p>
</dd></dl>

<dl class="method">
<dt id="ophyd.status.SubscriptionStatus.set_finished">
<code class="descname">set_finished</code><span class="sig-paren">(</span><em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#ophyd.status.SubscriptionStatus.set_finished" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark as finished successfully.</p>
<p>This method should generally not be called by the <em>recipient</em> of this
Status object, but only by the object that created and returned it.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ophyd.status.wait">
<code class="descclassname">ophyd.status.</code><code class="descname">wait</code><span class="sig-paren">(</span><em>status</em>, <em>timeout=None</em>, <em>*</em>, <em>poll_rate='DEPRECATED'</em><span class="sig-paren">)</span><a class="headerlink" href="#ophyd.status.wait" title="Permalink to this definition">¶</a></dt>
<dd><p>(Blocking) wait for the status object to complete</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>status: StatusBase</strong></dt>
<dd><p class="first last">A Status object</p>
</dd>
<dt><strong>timeout: Union[Number, None], optional</strong></dt>
<dd><p class="first last">Amount of time in seconds to wait. None disables, such that wait() will
only return when either the status completes or if interrupted by the
user.</p>
</dd>
<dt><strong>poll_rate: “DEPRECATED”</strong></dt>
<dd><p class="first last">DEPRECATED. Has no effect because this does not poll.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><dl class="first last docutils">
<dt>WaitTimeoutError</dt>
<dd><p class="first last">If the status has not completed within <code class="docutils literal"><span class="pre">timeout</span></code> (starting from
when this method was called, not from the beginning of the action).</p>
</dd>
<dt>Exception</dt>
<dd><p class="first last">This is <code class="docutils literal"><span class="pre">status.exception()</span></code>, raised if the status has finished
with an error.  This may include <code class="docutils literal"><span class="pre">TimeoutError</span></code>, which
indicates that the action itself raised <code class="docutils literal"><span class="pre">TimeoutError</span></code>, distinct
from <code class="docutils literal"><span class="pre">WaitTimeoutError</span></code> above.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="positioners.html" class="btn btn-neutral float-right" title="Positioners" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="signals.html" class="btn btn-neutral float-left" title="Signals" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Brookhaven National Lab

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>