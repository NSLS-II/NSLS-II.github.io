

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>edrixs and docker &mdash; edrixs  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/plot_directive.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sg_gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sg_gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sg_gallery-dataframe.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sg_gallery-rendered-html.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Quickstart tutorial" href="quickstart.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> edrixs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">edrixs User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="whatisedrixs.html">What is edrixs?</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">edrixs and docker</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#run-edrixs-in-a-docker-container">Run edrixs in a docker container</a></li>
<li class="toctree-l3"><a class="reference internal" href="#connect-to-docker-python-session-with-jupyter">Connect to docker python session with Jupyter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sharing-your-code">Sharing your code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html">Quickstart tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="basics.html">edrixs basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="pythontips.html">Tips for python and edrixs</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="papers.html">EDRIXS papers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../auto_examples/index.html">Pedagogical examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">edrixs Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-history.html">Release History</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">edrixs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">edrixs User Guide</a> &raquo;</li>
        
      <li>edrixs and docker</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/user/usedocker.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="edrixs-and-docker">
<span id="edrixsanddocker"></span><h1>edrixs and docker<a class="headerlink" href="#edrixs-and-docker" title="Permalink to this heading">¶</a></h1>
<section id="run-edrixs-in-a-docker-container">
<h2>Run edrixs in a docker container<a class="headerlink" href="#run-edrixs-in-a-docker-container" title="Permalink to this heading">¶</a></h2>
<p>To make life easier, we have built a docker image based on Ubuntu Linux (18.04) for edrixs, so you don’t need to struggle with the installation anymore.
The docker image can be used on any OS as long as the <a class="reference external" href="https://www.docker.com/">docker</a> application is available.
Follow these steps to use the docker image:</p>
<ul>
<li><p>Install the <a class="reference external" href="https://www.docker.com/">docker</a> application on your system and <a class="reference external" href="https://docs.docker.com/get-started/">learn how to use it</a>.</p></li>
<li><p>Once Docker is running, create a directory to store data in your host OS and launch a container to run edrixs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">/</span><span class="nb">dir</span><span class="o">/</span><span class="n">on</span><span class="o">/</span><span class="n">your</span><span class="o">/</span><span class="n">host</span><span class="o">/</span><span class="n">os</span>   <span class="c1"># A directory on your host OS</span>
<span class="n">docker</span> <span class="n">pull</span> <span class="n">edrixs</span><span class="o">/</span><span class="n">edrixs</span>    <span class="c1"># pull latest version</span>
<span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">it</span> <span class="o">-</span><span class="n">u</span> <span class="n">rixs</span> <span class="o">-</span><span class="n">w</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">rixs</span> <span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="nb">dir</span><span class="o">/</span><span class="n">on</span><span class="o">/</span><span class="n">your</span><span class="o">/</span><span class="n">host</span><span class="o">/</span><span class="n">os</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">rixs</span><span class="o">/</span><span class="n">data</span> <span class="n">edrixs</span><span class="o">/</span><span class="n">edrixs</span>
</pre></div>
</div>
<p>it will take a while to pull the image from <a class="reference external" href="https://cloud.docker.com/repository/docker/edrixs/edrixs/">Docker Hub</a> for the first time, while, it will launch the local one very fast at the next time.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-u</span> <span class="pre">rixs</span></code> means using a default user <code class="docutils literal notranslate"><span class="pre">rixs</span></code> to login the Ubuntu Linux, the password is <code class="docutils literal notranslate"><span class="pre">rixs</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-v</span> <span class="pre">/dir/on/your/host/os:/home/rixs/data</span></code> means mounting the directory <code class="docutils literal notranslate"><span class="pre">/dir/on/your/host/os</span></code> from your host OS to <code class="docutils literal notranslate"><span class="pre">/home/rixs/data</span></code> on the Ubuntu Linux in the container.</p></li>
</ul>
</li>
<li><p>In the container, you can play with edrixs as you are using an isolated Ubuntu Linux system. After launching the container, you will see <code class="docutils literal notranslate"><span class="pre">data</span></code> and <code class="docutils literal notranslate"><span class="pre">edrixs_examples</span></code> in <code class="docutils literal notranslate"><span class="pre">/home/rixs</span></code> directory. If you want to save the data from edrixs calculations to your host system, you need to work in <code class="docutils literal notranslate"><span class="pre">/home/rixs/data</span></code> directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">rixs</span><span class="o">/</span><span class="n">data</span>
<span class="n">cp</span> <span class="o">-</span><span class="n">r</span> <span class="o">../</span><span class="n">edrixs_examples</span> <span class="o">.</span>

<span class="n">Play</span> <span class="k">with</span> <span class="n">edrixs</span> <span class="o">...</span>
</pre></div>
</div>
<p>Note that any changes outside <code class="docutils literal notranslate"><span class="pre">/home/rixs/data</span></code> will be lost when this container stops. You can only use your host OS to make interactive plots. Use <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span></code> to install software packages if they are needed.</p>
</li>
<li><p>Type <code class="docutils literal notranslate"><span class="pre">exit</span></code> in the container to exit. You can delete all the stopped containers by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>docker rm $(docker ps -a -q)
</pre></div>
</div>
</li>
<li><p>If you do not need the image anymore, you can delete it by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">rmi</span> <span class="n">edrixs</span><span class="o">/</span><span class="n">edrixs</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="connect-to-docker-python-session-with-jupyter">
<h2>Connect to docker python session with Jupyter<a class="headerlink" href="#connect-to-docker-python-session-with-jupyter" title="Permalink to this heading">¶</a></h2>
<p><a class="reference external" href="https://jupyter.org/">Jupyter</a>  is a popular way to integrate your code with rich output including plots. You may find this working mode particularly useful for exploratory work, when you try many different approaches to calculations or analysis.</p>
<ul>
<li><p>To use this follow the steps above, but pass an additional command <code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">8888</span></code> when you launch the container i.e.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">it</span> <span class="o">-</span><span class="n">p</span> <span class="mi">8888</span><span class="p">:</span><span class="mi">8888</span> <span class="o">-</span><span class="n">u</span> <span class="n">rixs</span> <span class="o">-</span><span class="n">w</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">rixs</span> <span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="nb">dir</span><span class="o">/</span><span class="n">on</span><span class="o">/</span><span class="n">your</span><span class="o">/</span><span class="n">host</span><span class="o">/</span><span class="n">os</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">rixs</span><span class="o">/</span><span class="n">data</span> <span class="n">edrixs</span><span class="o">/</span><span class="n">edrixs_interactive</span>
</pre></div>
</div>
</li>
<li><p>the container will automatically launch a jupyter session as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jupyter</span> <span class="n">lab</span> <span class="o">--</span><span class="n">ip</span><span class="o">=</span><span class="mf">0.0.0.0</span> <span class="o">--</span><span class="n">port</span><span class="o">=</span><span class="mi">8888</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">browser</span> <span class="o">--</span><span class="n">allow</span><span class="o">-</span><span class="n">root</span>
</pre></div>
</div>
<p>and will return a URL that you can enter in a browser on your host machine. The larger <code class="docutils literal notranslate"><span class="pre">edrixs/edrixs_interactive</span></code> container includes <a class="reference external" href="https://ipywidgets.readthedocs.io/en/latest/">ipywidgets</a> and <a class="reference external" href="https://github.com/matplotlib/jupyter-matplotlib">ipympl</a> for interactive computing.</p>
<p>Jupyterlab provides access to a unix terminal, which you can create via File &gt; New &gt; Terminal. We suggest changing the terminal shell type by issuing the command <code class="docutils literal notranslate"><span class="pre">bash</span></code> in the terminal.</p>
</li>
</ul>
</section>
<section id="sharing-your-code">
<h2>Sharing your code<a class="headerlink" href="#sharing-your-code" title="Permalink to this heading">¶</a></h2>
<p>Using Docker is a nice way to straightforwardly share your code with others. The standard way to specify which docker image is needed to run your code is to include a file named <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> with the following contents</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FROM</span> <span class="n">edrixs</span><span class="o">/</span><span class="n">edrixs_interactive</span>
<span class="n">USER</span> <span class="n">rixs</span>
</pre></div>
</div>
<p>You might like to checkout the <a class="reference external" href="https://repo2docker.readthedocs.io/en/latest/">jupyter-repo2docker</a> project, which helps automate the process of building and connecting to docker images. The <a class="reference external" href="https://mybinder.org/">mybinder</a> project might also be helpful as this will open a github respository of notebooks in an executable environment, making your code immediately reproducible by anyone, anywhere.</p>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="quickstart.html" class="btn btn-neutral float-right" title="Quickstart tutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019, Brookhaven National Lab.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>