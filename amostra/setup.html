

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Setup &mdash; amostra 1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="amostra 1 documentation" href="index.html"/>
        <link rel="up" title="amostra" href="modules.html"/>
        <link rel="next" title="Online Sample Management Examples" href="tutorial.html"/>
        <link rel="prev" title="Introduction" href="introduction.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> amostra
          

          
          </a>

          
            
            
              <div class="version">
                0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">amostra</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation">Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#install-mongodb">1. Install MongoDB</a></li>
<li class="toctree-l4"><a class="reference internal" href="#required-packages-for-the-server">2. Required Packages for the Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="#server-startup">3. Server Startup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#client-installation">4. Client Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#simple-test">5. Simple Test</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html">Online Sample Management Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#local-sample-management-examples">Local Sample Management Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html">More Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="amostra.html">amostra package</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">amostra</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="modules.html">amostra</a> &raquo;</li>
      
    <li>Setup</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/setup.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="setup">
<h1>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The installation instructions are for development setup. We are currently working on deployment instructions for production ready service.</p>
</div>
<div class="section" id="install-mongodb">
<h3>1. Install MongoDB<a class="headerlink" href="#install-mongodb" title="Permalink to this headline">¶</a></h3>
<p>If you are in a beamline environment, MongoDB is already instaled and ready to use. However, if you are testing this on a local machine or on a cloud environment, refer to the MongoDB documentation: <a class="reference external" href="https://docs.mongodb.org/manual/installation/">https://docs.mongodb.org/manual/installation/</a></p>
<p>We are running v 3.2 for our development and new deployment setup.</p>
</div>
<div class="section" id="required-packages-for-the-server">
<h3>2. Required Packages for the Server<a class="headerlink" href="#required-packages-for-the-server" title="Permalink to this headline">¶</a></h3>
<p>You can use a sandbox approach and deploy the server on a separate environment if you want full separation and mobility of this server. Alternatively, you could use the system Python libraries. The shortfall of this approach is, system Python environments usually fall behind in terms of version. This service is intended to run on Python 3.5.</p>
<p>The required packages for the server side are: tornado, jsonschema, pyyaml, ujson, pytz, pymongo.</p>
</div>
<div class="section" id="server-startup">
<h3>3. Server Startup<a class="headerlink" href="#server-startup" title="Permalink to this headline">¶</a></h3>
<p>Once the environment installation is complete, the server can be started via command line, using:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">startup</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">mongo_port</span> <span class="o">&lt;</span><span class="n">mongo</span><span class="o">-</span><span class="n">daemon</span><span class="o">-</span><span class="n">port</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">mongo_host</span> <span class="o">&lt;</span><span class="n">mongo</span><span class="o">-</span><span class="n">daemon</span><span class="o">-</span><span class="n">host</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">database</span> <span class="n">amostra</span> <span class="o">--</span><span class="n">service</span><span class="o">-</span><span class="n">port</span> <span class="mi">7770</span> <span class="o">--</span><span class="n">log_file_prefix</span> <span class="o">&lt;</span><span class="n">full</span><span class="o">-</span><span class="n">path</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">logfile</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Once successful, the service will prompt:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="o">(</span>dev<span class="o">)</span>➜  amostra git:<span class="o">(</span>master<span class="o">)</span> ✗ python startup.py --mongo_port <span class="m">27017</span> --mongo_host localhost --database amostra --log_file_prefix /tmp/amostra.log --service-port 7770
Starting Amostra service with configuration  <span class="o">{</span><span class="s1">&#39;mongo_port&#39;</span>: 27017, <span class="s1">&#39;database&#39;</span>: <span class="s1">&#39;amostra&#39;</span>, <span class="s1">&#39;mongo_host&#39;</span>: <span class="s1">&#39;localhost&#39;</span><span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="client-installation">
<h3>4. Client Installation<a class="headerlink" href="#client-installation" title="Permalink to this headline">¶</a></h3>
<p>In order to install and run the client, there are a series of packages needs to be installed: requests, pytz, ujson, pyyaml</p>
<p>In addition to the packages above, the client requires doct.Document: <a class="reference external" href="https://github.com/NSLS-II/doct">https://github.com/NSLS-II/doct</a></p>
<p>Once the packages above are installed, one can install the client simply:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
</div>
<div class="section" id="simple-test">
<h3>5. Simple Test<a class="headerlink" href="#simple-test" title="Permalink to this headline">¶</a></h3>
<p>Once everthing is good and setup is complete, you can try to create a sample document of your choice by:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">s_ref</span> <span class="o">=</span> <span class="n">SampleReference</span><span class="p">()</span>
<span class="n">m_uid</span> <span class="o">=</span> <span class="n">s_ref</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">s_ref</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">uid</span><span class="o">=</span><span class="n">m_uid</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tutorial.html" class="btn btn-neutral float-right" title="Online Sample Management Examples" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral" title="Introduction" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Arman Arkilic.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>