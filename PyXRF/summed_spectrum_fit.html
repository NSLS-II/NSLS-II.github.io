
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Spectrum fitting &#8212; PyXRF v0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Output data from pyxrf" href="data_output.html" />
    <link rel="prev" title="Data analysis at NSLS II beamlines" href="work_at_beamlines.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="spectrum-fitting">
<h1>Spectrum fitting<a class="headerlink" href="#spectrum-fitting" title="Permalink to this headline">¶</a></h1>
<p>Once you select which data to fit (either summed spectrum or from given detector), it
is ready to move on to fitting step. Please click the Fit panel on the upper left corner,
which is next to File IO (Figure 1).</p>
<section id="automatic-peak-finding-create-parameter-json-file">
<h2>Automatic peak finding (create parameter json file)<a class="headerlink" href="#automatic-peak-finding-create-parameter-json-file" title="Permalink to this headline">¶</a></h2>
<p>If you don’t have a parameter json file, you can start from scratch with automatic
peak finding.</p>
<ul class="simple">
<li><p>Click button <code class="docutils literal notranslate"><span class="pre">Find</span> <span class="pre">Elements</span> <span class="pre">Automatically</span></code>, you will see a small window
called <code class="docutils literal notranslate"><span class="pre">Automatic</span> <span class="pre">Element</span> <span class="pre">Finding</span></code> pop up.</p></li>
<li><p>Adjust parameter in this window, such as calibration parameters a0, a1,
incident E, etc.</p></li>
<li><p>Then click button <code class="docutils literal notranslate"><span class="pre">Find</span> <span class="pre">Elements</span></code> in the same window.</p></li>
<li><p>You will see that many elements are found automatically. You can remove small
intensity elements, or add/remove elements based on your own opinion.</p></li>
<li><p>Click button <code class="docutils literal notranslate"><span class="pre">Save</span></code> to save this parameter configuration for later use.</p></li>
</ul>
</section>
<section id="load-parameter-file">
<h2>Load parameter file<a class="headerlink" href="#load-parameter-file" title="Permalink to this headline">¶</a></h2>
<p>If you already have a parameter json file, you need to load it into pyxrf by
clicking “Import Parameters” (Figure 1). Otherwise, please refer to the previous
step. The json file saves all the parameters for data fitting.</p>
<img alt="_images/load_parameter_file.png" src="_images/load_parameter_file.png" />
<p>Figure 1. Load json file</p>
</section>
<section id="plot-emission-lines">
<h2>Plot emission lines<a class="headerlink" href="#plot-emission-lines" title="Permalink to this headline">¶</a></h2>
<p>Let’s first focus on the plotting (“Spectrum View” panel on the right). We can easily zoom in spectrum, and turn on elemental emission lines to
see which element is missing (see Figure 2). You can use up and down arrows in your keyboard
to browse the elements one by one.</p>
<p>After loading parameter file, we can immediately see all the elements are listed in the
“element list window” on the left. Each element includes varies of information including
Z number, elemental name, emission energy [kev], peak intensity, relative intensity(normalized to max),
and cross section [barns/atom] (Figure 2).</p>
<img alt="_images/zoomin_plot.png" src="_images/zoomin_plot.png" />
<p>Figure 2. Zoom in plot</p>
</section>
<section id="add-remove-elements">
<h2>Add/Remove elements<a class="headerlink" href="#add-remove-elements" title="Permalink to this headline">¶</a></h2>
<p>Here we can clearly see that Fe element is missing. Following the instruction on how to add elements in Figure 2,
we need to first select which elemental line to add, and confirm that by click “Add” button.
Then you will see the element is shown in the element list window.</p>
<p>You can also easily delete any element by clicking the Del button shown in Figure 2.</p>
<p>You may also change the value of peak intensity to see plotting change in real time.</p>
<p>Once you are happy with all the changes, please click “Update” button to save all the changes.</p>
</section>
<section id="summed-spectrum-fitting">
<h2>Summed spectrum fitting<a class="headerlink" href="#summed-spectrum-fitting" title="Permalink to this headline">¶</a></h2>
<p>Once you are happy with all the parameter setting, you can start to fit the
summed spectrum by simply click button “Spectrum Fitting” at the lower part of
Fit panel.</p>
<p>The fitting process may take longer time if more elements are included. For
instance, more than 30 seconds are used if you want to fit more than 10 elements.</p>
<p>You can also output summed spectrum fitting result by click button
“Save Spectrum/Fit”. The output data has 3 columns including energy, experiment
and fitted results for summed spectrum.</p>
</section>
<section id="individual-pixel-fitting">
<h2>Individual Pixel fitting<a class="headerlink" href="#individual-pixel-fitting" title="Permalink to this headline">¶</a></h2>
<p>After summed spectrum fitting is done, you can move forward with individual
pixel fitting. Please click button “Individual Pixel Fitting” at the very
bottom of Fit panel. The individual pixel fitting will find all the elements
defined from summed spectrum fitting.</p>
<p>The fitting process is usually fast because multiprocessing is applied. After
fitting is done, the output will be 2D map for different elements.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">PyXRF</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="work_at_beamlines.html">Data analysis at NSLS II beamlines</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Spectrum fitting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#automatic-peak-finding-create-parameter-json-file">Automatic peak finding (create parameter json file)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#load-parameter-file">Load parameter file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plot-emission-lines">Plot emission lines</a></li>
<li class="toctree-l2"><a class="reference internal" href="#add-remove-elements">Add/Remove elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#summed-spectrum-fitting">Summed spectrum fitting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#individual-pixel-fitting">Individual Pixel fitting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="data_output.html">Output data from pyxrf</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_input.html">Load data into pyxrf</a></li>
<li class="toctree-l1"><a class="reference internal" href="questions.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Credits</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="work_at_beamlines.html" title="previous chapter">Data analysis at NSLS II beamlines</a></li>
      <li>Next: <a href="data_output.html" title="next chapter">Output data from pyxrf</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Li Li.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.5.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/summed_spectrum_fit.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>