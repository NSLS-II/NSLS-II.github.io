


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Releasing Software &mdash; NSLS-II Software Documentation  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Re-syncing Conda" href="resyncing-conda.html" />
    <link rel="prev" title="NSLS-II DAMA Ansible Playbooks" href="../components/ansible-setup.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> NSLS-II Software Documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../architecture-overview.html">Event-Based Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cookbook/index.html">Cookbook (Examples)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../remote-access.html">Remote Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sandbox.html">Sandbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../history.html">History of Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conda.html">Software Deployment with Conda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fresh-installation.html">Installation at a Beamline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources.html">Recommended Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../internal_index.html">Internal Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../deployment_docs.html">NSLS-II Deployment Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../deployment_docs.html#components">Components</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../deployment_docs.html#deployment-procedures">Deployment Procedures</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Releasing Software</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#obtain-access-to-the-project-on-pypi">Obtain access to the project on PyPI</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tag-and-release">Tag and release</a></li>
<li class="toctree-l4"><a class="reference internal" href="#update-nsls-ii-conda-recipes">Update NSLS-II Conda Recipes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="resyncing-conda.html">Re-syncing Conda</a></li>
<li class="toctree-l3"><a class="reference internal" href="updating-metapackages.html">Deploying New Environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrading-beamlines.html">Upgrading Beamlines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../deployment_docs.html#incident-reports">Incident Reports</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../meetings/index.html">Meetings</a></li>
</ul>
<p class="caption"><span class="caption-text">Data Collection</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://nsls-ii.github.io/bluesky">bluesky</a></li>
<li class="toctree-l1"><a class="reference external" href="https://nsls-ii.github.io/ophyd">ophyd</a></li>
<li class="toctree-l1"><a class="reference external" href="https://nsls-ii.github.io/caproto">caproto</a></li>
</ul>
<p class="caption"><span class="caption-text">Data Access and Management</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://nsls-ii.github.io/databroker">databroker</a></li>
<li class="toctree-l1"><a class="reference external" href="https://nsls-ii.github.io/suitcase">suitcase</a></li>
</ul>
<p class="caption"><span class="caption-text">Data Analysis</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="http://scikit-beam.github.io/scikit-beam">scikit-beam</a></li>
</ul>
<p class="caption"><span class="caption-text">GitHub Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/NSLS-II/">NSLS-II Repositories</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/NSLS-II/wishlist/issues">Wish List</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/NSLS-II/Bug-Reports/issues">Bug Reports</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NSLS-II Software Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../deployment_docs.html">NSLS-II Deployment Documentation</a> &raquo;</li>
        
      <li>Releasing Software</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/deployment/releasing-software.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="releasing-software">
<h1>Releasing Software<a class="headerlink" href="#releasing-software" title="Permalink to this headline">¶</a></h1>
<p>In preparation for a deployment, we typically tag new releases of software,
including major shared projects like bluesky and beamline specific packages
like pyCHX or csxtools.</p>
<div class="section" id="obtain-access-to-the-project-on-pypi">
<h2>Obtain access to the project on PyPI<a class="headerlink" href="#obtain-access-to-the-project-on-pypi" title="Permalink to this headline">¶</a></h2>
<p>For a given project, such as <a class="reference external" href="https://pypi.org/project/bluesky/">bluesky</a>,
the list of maintainers is shown on the left of the project page. Ask one of
these people to be added as a maintainer so that you can publish a new release
to PyPI.</p>
</div>
<div class="section" id="tag-and-release">
<h2>Tag and release<a class="headerlink" href="#tag-and-release" title="Permalink to this headline">¶</a></h2>
<p>We refer you to the
<a class="reference external" href="https://nsls-ii.github.io/scientific-python-cookiecutter/publishing-releases.html">Publishing Releases</a>
section of the Scientific Python Cookiecutter Documentation, which will walk
you through the release process starting with choosing a version number and
ending with publishing the release on PyPI.</p>
</div>
<div class="section" id="update-nsls-ii-conda-recipes">
<h2>Update NSLS-II Conda Recipes<a class="headerlink" href="#update-nsls-ii-conda-recipes" title="Permalink to this headline">¶</a></h2>
<p>We keep conda recipes for our projects and external projects that we build in
<a class="reference external" href="https://github.com/NSLS-II/lightsource2-recipes">NSLS-II/lightsource2-recipes</a>.
There are two copies of every recipes, one under the <code class="docutils literal notranslate"><span class="pre">recipes-tag</span></code> directory
that is pinned to a specific tagged release, and one under the <code class="docutils literal notranslate"><span class="pre">recipes-dev</span></code>
directory that builds from the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch.</p>
<p>We will open a pull request to update the tag and dev recipes for the latest
release. Fork the lightsource2-recipes repo and check out the master branch.</p>
<p>Find the project you have just tagged under <code class="docutils literal notranslate"><span class="pre">recipes-tag</span></code>. Update the tag
and, if present, the SHA hash. Remember to reset the <code class="docutils literal notranslate"><span class="pre">build</span></code> field to 0.</p>
<p>If the project’s dependencies have changed since the last release update those
as well. The copy of the recipe under <code class="docutils literal notranslate"><span class="pre">recipes-dev</span></code> should be updated to
keeps its dependencies in sync with those in <code class="docutils literal notranslate"><span class="pre">recipes-tag</span></code>. Since it always
targets <code class="docutils literal notranslate"><span class="pre">master</span></code>, no other changes are necessary to the dev recipe.</p>
<p>Submit your updates as a pull request. When the PR is merged, our package
builder will automatically find the changes, build the packages, and publish
them. We publish conda packages for each of our projects on an external,
public conda channel <a class="reference external" href="https://anaconda.org/lightsource2-tag">https://anaconda.org/lightsource2-tag</a> and on an internal
conda channel <code class="docutils literal notranslate"><span class="pre">nsls2-tag</span></code>. The name discrepancy is historical. Also be
advised that there is an _abandoned_ public channel
<a class="reference external" href="https://anaconda.org/lightsource2">https://anaconda.org/lightsource2</a> which has very old versions of some packages
and can cause confusion.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="resyncing-conda.html" class="btn btn-neutral float-right" title="Re-syncing Conda" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../components/ansible-setup.html" class="btn btn-neutral" title="NSLS-II DAMA Ansible Playbooks" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015 Brookhaven National Lab

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>