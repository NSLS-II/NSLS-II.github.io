


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>What’s new &mdash; NSLS-II Software Documentation 0.0.1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="NSLS-II Software Documentation 0.0.1 documentation" href="index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> NSLS-II Software Documentation</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="collection-quick-start.html">Data Collection Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysis-quick-start.html">Data Analysis Quick Start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="analysis-quick-start.html#option-1-at-the-beamline">Option 1: At the Beamline</a></li>
<li class="toctree-l2"><a class="reference internal" href="analysis-quick-start.html#option-2-remotely">Option 2: Remotely</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview of Components</a><ul>
<li class="toctree-l2"><a class="reference internal" href="overview.html#user-facing-software">User-Facing Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#core-software">Core Software</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="arch/arch.html">Collection Software Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="arch/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="arch/metadatastore-format.html">Format of Metadatastore Entries</a></li>
<li class="toctree-l2"><a class="reference internal" href="arch/filestore-format.html">Format of File Store Entries</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">NSLS-II Software Documentation</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>What&#8217;s new</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/whatsnew.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="what-s-new">
<span id="whatsnew"></span><h1>What&#8217;s new<a class="headerlink" href="#what-s-new" title="Permalink to this headline">¶</a></h1>
<p>A catalog of new features, improvements, and bug-fixes in each release. Follow links to the relevant GitHub issue or pull request for specific code changes and any related discussion.</p>
<div class="section" id="dataportal-v0-5-0">
<h2>Dataportal v0.5.0<a class="headerlink" href="#dataportal-v0-5-0" title="Permalink to this headline">¶</a></h2>
<div class="section" id="enhancements">
<h3>Enhancements<a class="headerlink" href="#enhancements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A new <tt class="docutils literal"><span class="pre">StepScan</span></tt> interface acts like <tt class="docutils literal"><span class="pre">DataBroker</span></tt>
but immediately returns tabular data as a DataFrame in one step.
(<a class="reference external" href="https://github.com/NSLS-II/NSLS-II Software Documentation/issues/136">GH136</a>)</li>
<li>Look up scans by the name of a detector or motor used.
For example, to get all scans that measured &#8216;Tsam&#8217;, use
<tt class="docutils literal"><span class="pre">DataBroker.find_headers(data_key='Tsam')</span></tt>. (<a class="reference external" href="https://github.com/NSLS-II/NSLS-II Software Documentation/issues/88">GH88</a>, <a class="reference external" href="https://github.com/NSLS-II/NSLS-II Software Documentation/issues/107">GH107</a>)</li>
<li>Look up scans using the first few characters of its unique ID,
like <tt class="docutils literal"><span class="pre">DataBroker['aow23oif']</span></tt>. To be clear this is the
ophyd-provided uid, not the mongo _id. (<a class="reference external" href="https://github.com/NSLS-II/NSLS-II Software Documentation/issues/130">GH130</a>, <a class="reference external" href="https://github.com/NSLS-II/NSLS-II Software Documentation/issues/131">GH131</a>)</li>
<li>Replay remembers settings when flipping between scans, and it
retains these settings between sessions. (<a class="reference external" href="https://github.com/NSLS-II/NSLS-II Software Documentation/issues/114">GH114</a>)</li>
<li><tt class="docutils literal"><span class="pre">DataMuxer.to_sparse_dataframe</span></tt> returns all data with one Event
per row. (<a class="reference external" href="https://github.com/NSLS-II/NSLS-II Software Documentation/issues/134">GH134</a>)</li>
<li><tt class="docutils literal"><span class="pre">DataMuxer.plan.bin_on</span></tt> and <tt class="docutils literal"><span class="pre">DataMuxer.plan.bin_by_edges</span></tt>
explain the planned operation of <tt class="docutils literal"><span class="pre">DataMuxer.bin_on</span></tt> and
<tt class="docutils literal"><span class="pre">DataMuxer.bin_by_edges</span></tt> for a given data set and given arguments.
(<a class="reference external" href="https://github.com/NSLS-II/NSLS-II Software Documentation/issues/134">GH134</a>)</li>
</ul>
</div>
<div class="section" id="api-changes">
<h3>API Changes<a class="headerlink" href="#api-changes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The Event documents are reorganized to be more intuitive
and require less typing. Formerly, <tt class="docutils literal"><span class="pre">event.data</span></tt> returned
a dictionary of <tt class="docutils literal"><span class="pre">(value,</span> <span class="pre">timestamp)</span></tt> tuples.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">event</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;motor1&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">),</span>
              <span class="s">&#39;motor2&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)}</span>
</pre></div>
</div>
<p>Now, <tt class="docutils literal"><span class="pre">event.data</span></tt> is dictionary of the data</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">event</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;motor1&#39;</span><span class="p">:</span> <span class="n">value</span><span class="p">,</span> <span class="s">&#39;motor2&#39;</span><span class="p">:</span> <span class="n">value</span><span class="p">}</span>
</pre></div>
</div>
<p>and <tt class="docutils literal"><span class="pre">event.timestamp</span></tt> is a dictionary of the timestamps.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">event</span><span class="o">.</span><span class="n">timestamps</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;motor1&#39;</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span> <span class="s">&#39;motor2&#39;</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">}</span>
</pre></div>
</div>
<p>(<a class="reference external" href="https://github.com/NSLS-II/NSLS-II Software Documentation/issues/129">GH129</a>, <a class="reference external" href="https://github.com/NSLS-II/NSLS-II Software Documentation/issues/132">GH132</a>)</p>
</li>
<li><p class="first">All functions that return Documents, including Headers,
Events, and everything stored in metadatastore and filestore,
now return Python generators, iterable objects that load
data one element at a time. To convert these to normal Python
lists, simply use <tt class="docutils literal"><span class="pre">list(gen)</span></tt>. (<a class="reference external" href="https://github.com/NSLS-II/NSLS-II Software Documentation/issues/127">GH127</a>)</p>
</li>
<li><p class="first">The output of <tt class="docutils literal"><span class="pre">DataMuxer.bin_*</span></tt> functions is indexed by
bin number (0, 1, 2...). The Event time is given as a column.</p>
</li>
<li><p class="first">Metadatastore and filestore require configuration settings.
They look in the following locations, in increasing order of
precedence. Use #3 or #4 to customize your own metadatastore
and filestore.</p>
<ol class="arabic simple">
<li><tt class="file docutils literal"><span class="pre">CONDA_ENV/etc/</span><em><span class="pre">name</span></em><span class="pre">.yaml</span></tt> (if <tt class="docutils literal"><span class="pre">CONDA_ETC_</span></tt> env is defined)</li>
<li><tt class="file docutils literal"><span class="pre">/etc/</span><em><span class="pre">name</span></em><span class="pre">.yaml</span></tt></li>
<li><tt class="file docutils literal"><span class="pre">~/.config/</span><em><span class="pre">name</span></em><span class="pre">/connection.yml</span></tt></li>
<li>reading environmental variables formatted like <tt class="docutils literal"><span class="pre">MDS_DATABASE</span></tt> or <tt class="docutils literal"><span class="pre">FS_DATABASE</span></tt></li>
</ol>
<p>For example, in <tt class="file docutils literal"><span class="pre">~/.config/metadatastore/connection.yaml</span></tt></p>
<div class="highlight-python"><div class="highlight"><pre>host: localhost
port: 27017
database: my_metadatastore
timezone: US/Eastern
</pre></div>
</div>
<p>and likewise with filestore/connection.yaml.
(Filestore does not need a timezone field, however.)
If no configuration can be found, they will raise an error on
import. We avoid defaults so that experimental data cannot be
accidentally saved to an unsafe destination.</p>
</li>
<li><p class="first">Metadatastore configuration also requires a <tt class="docutils literal"><span class="pre">timezone</span></tt> field,
which is uses to interpret human-friendly datetimes.</p>
</li>
</ul>
</div>
<div class="section" id="bug-fixes">
<h3>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>All DataMuxer output is sorted by Event time. (<a class="reference external" href="https://github.com/NSLS-II/NSLS-II Software Documentation/issues/134">GH134</a>)</li>
</ul>
</div>
</div>
</div>


          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015 Brookhaven National Lab.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>