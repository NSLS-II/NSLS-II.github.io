

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Release History &mdash; bluesky 1.6.1.post5+g2c601fb documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="The RunEngine run loop" href="run_engine.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> bluesky
          

          
          </a>

          
            
            
              <div class="version">
                1.6.1.post5+g2c601fb
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="plans.html">Plans</a></li>
<li class="toctree-l1"><a class="reference internal" href="documents.html">Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadata.html">Recording Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="callbacks.html">Live Visualization and Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="state-machine.html">Interruptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="simulation.html">Simulation and Error Checking</a></li>
<li class="toctree-l1"><a class="reference internal" href="progress-bar.html">Progress Bar</a></li>
<li class="toctree-l1"><a class="reference internal" href="event_descriptors.html">Event Descriptors</a></li>
<li class="toctree-l1"><a class="reference internal" href="async.html">Asynchronous Acquisition</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_run_plans.html">Multi-Run Plans</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging and Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="run_engine_api.html">RunEngine API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="magics.html">IPython ‘Magics’ [Experimental]</a></li>
<li class="toctree-l1"><a class="reference internal" href="from-pyepics-to-bluesky.html">Translating Direct PyEpics Code to Bluesky Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="comparison-with-spec.html">Comparison with SPEC</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="hardware.html">How Bluesky Interfaces with Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="msg.html">Message Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="run_engine.html">The RunEngine run loop</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Release History</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#v1-6-1-2020-05-08">v1.6.1 (2020-05-08)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#added">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fixed">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-6-0-2020-03-16">v1.6.0 (2020-03-16)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#event-loop-re-factor">Event loop re-factor</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#api-changes">API Changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#features">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bug-fixes">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#other-api-changes">Other API Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-5-7-2020-05-01">v1.5.7 (2020-05-01)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-5-6-2020-03-11">v1.5.6 (2020-03-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v1-5-5-2019-08-16">v1.5.5 (2019-08-16)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v1-5-4-2019-08-09">v1.5.4 (2019-08-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v1-5-3-2019-05-27">v1.5.3 (2019-05-27)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v1-5-2-2019-03-11">v1.5.2 (2019-03-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v1-5-1-2019-03-08">v1.5.1 (2019-03-08)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-5-0-2019-01-03">v1.5.0 (2019-01-03)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id4">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#breaking-changes">Breaking Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deprecations">Deprecations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-4-1-2018-09-24">v1.4.1 (2018-09-24)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id6">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-4-0-2018-09-05">v1.4.0 (2018-09-05)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id7">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-3-3-2018-06-06">v1.3.3 (2018-06-06)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id9">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-3-2-2018-05-24">v1.3.2 (2018-05-24)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id10">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-3-1-2018-05-19">v1.3.1 (2018-05-19)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id11">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-3-0-2018-05-15">v1.3.0 (2018-05-15)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id12">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id13">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id14">Breaking Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id15">Deprecations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-2-0-2018-02-20">v1.2.0 (2018-02-20)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id16">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id17">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id18">Deprecations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-1-0-2017-12-19">v1.1.0 (2017-12-19)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id19">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id20">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#breaking-changes-and-deprecations">Breaking Changes and Deprecations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-0-0-2017-11-07">v1.0.0 (2017-11-07)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id21">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-11-0-2017-11-01">v0.11.0 (2017-11-01)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id22">Breaking Changes and Deprecations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id23">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id24">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#internal-changes">Internal Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-10-3-2017-09-12">v0.10.3 (2017-09-12)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id25">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-10-2-2017-09-11">v0.10.2 (2017-09-11)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id26">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id27">Features</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-10-1-2017-09-11">v0.10.1 (2017-09-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-10-0-2017-09-06">v0.10.0 (2017-09-06)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#highlights">Highlights</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id28">Breaking Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id29">Deprecations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id30">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id31">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-9-0-2017-05-08">v0.9.0 (2017-05-08)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id32">Breaking Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-8-0-2017-01-03">v0.8.0 (2017-01-03)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id33">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id34">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id35">Breaking Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-7-0-2016-11-01">v0.7.0 (2016-11-01)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id36">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id37">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id38">Breaking Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-6-4-2016-09-07">v0.6.4 (2016-09-07)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id39">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id40">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id41">Breaking Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-6-3-2016-08-16">v0.6.3 (2016-08-16)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id42">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id43">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id44">Breaking Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-6-2-2016-07-26">v0.6.2 (2016-07-26)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id45">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-6-1-2016-07-25">v0.6.1 (2016-07-25)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-6-0-2016-07-25">v0.6.0 (2016-07-25)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id46">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id47">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id48">Internal Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-5-3-2016-06-06">v0.5.3 (2016-06-06)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id49">Breaking Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id50">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-5-2-2016-05-25">v0.5.2 (2016-05-25)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id51">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id52">Breaking Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-5-0-2016-05-11">v0.5.0 (2016-05-11)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id53">Breaking Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-4-3-2016-03-03">v0.4.3 (2016-03-03)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id54">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-4-2-2016-03-02">v0.4.2 (2016-03-02)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id55">Breaking Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-4-1-2016-02-29">v0.4.1 (2016-02-29)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id56">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id57">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-4-0-2016-02-23">v0.4.0 (2016-02-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-3-2-2015-10-28">v0.3.2 (2015-10-28)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-3-1-2015-10-15">v0.3.1 (2015-10-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-3-0-2015-10-14">v0.3.0 (2015-10-14)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id58">Breaking Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-2-3-2015-09-29">v0.2.3 (2015-09-29)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-2-2-2015-09-24">v0.2.2 (2015-09-24)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-2-1-2015-09-24">v0.2.1 (2015-09-24)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-2-0-2015-09-22">v0.2.0 (2015-09-22)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-1-0-2015-06-25">v0.1.0 (2015-06-25)</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Data Collection</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://nsls-ii.github.io/bluesky">bluesky</a></li>
<li class="toctree-l1"><a class="reference external" href="https://nsls-ii.github.io/ophyd">ophyd</a></li>
</ul>
<p class="caption"><span class="caption-text">Data Access and Management</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://nsls-ii.github.io/databroker">databroker</a></li>
<li class="toctree-l1"><a class="reference external" href="https://nsls-ii.github.io/amostra">amostra</a></li>
<li class="toctree-l1"><a class="reference external" href="https://nsls-ii.github.io/datamuxer">datamuxer</a></li>
<li class="toctree-l1"><a class="reference external" href="https://nsls-ii.github.io/suitcase">suitcase</a></li>
</ul>
<p class="caption"><span class="caption-text">GitHub Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/NSLS-II/">NSLS-II Repositories</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/NSLS-II/Bug-Reports/issues">Bug Reports</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">bluesky</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Release History</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/api_changes.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="release-history">
<h1>Release History<a class="headerlink" href="#release-history" title="Permalink to this headline">¶</a></h1>
<div class="section" id="v1-6-1-2020-05-08">
<h2>v1.6.1 (2020-05-08)<a class="headerlink" href="#v1-6-1-2020-05-08" title="Permalink to this headline">¶</a></h2>
<div class="section" id="added">
<h3>Added<a class="headerlink" href="#added" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>The plans <a class="reference internal" href="generated/bluesky.plans.grid_scan.html#bluesky.plans.grid_scan" title="bluesky.plans.grid_scan"><code class="xref py py-func docutils literal notranslate"><span class="pre">grid_scan()</span></code></a> and
<a class="reference internal" href="generated/bluesky.plans.rel_grid_scan.html#bluesky.plans.rel_grid_scan" title="bluesky.plans.rel_grid_scan"><code class="xref py py-func docutils literal notranslate"><span class="pre">rel_grid_scan()</span></code></a> accept a new <code class="docutils literal notranslate"><span class="pre">snake_axes</span></code> parameter,
now matching what <a class="reference internal" href="generated/bluesky.plans.list_grid_scan.html#bluesky.plans.list_grid_scan" title="bluesky.plans.list_grid_scan"><code class="xref py py-func docutils literal notranslate"><span class="pre">list_grid_scan()</span></code></a> and
<a class="reference internal" href="generated/bluesky.plans.rel_list_grid_scan.html#bluesky.plans.rel_list_grid_scan" title="bluesky.plans.rel_list_grid_scan"><code class="xref py py-func docutils literal notranslate"><span class="pre">rel_list_grid_scan()</span></code></a> do. This can be used to control
which axes follow a back-and-forth “snake-like” trajectory.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Default - snaking is disabled</span>
<span class="n">grid_scan</span><span class="p">([</span><span class="n">hw</span><span class="o">.</span><span class="n">det</span><span class="p">],</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="c1"># Snaking is explicitely disabled</span>
<span class="n">grid_scan</span><span class="p">([</span><span class="n">hw</span><span class="o">.</span><span class="n">det</span><span class="p">],</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">snake_axes</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Snaking can also be disabled by providing empty list of motors</span>
<span class="n">grid_scan</span><span class="p">([</span><span class="n">hw</span><span class="o">.</span><span class="n">det</span><span class="p">],</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">snake_axes</span><span class="o">=</span><span class="p">[])</span>

<span class="c1"># Snaking is enabled for all motors except the slowest hw.motor</span>
<span class="n">grid_scan</span><span class="p">([</span><span class="n">hw</span><span class="o">.</span><span class="n">det</span><span class="p">],</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">snake_axes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Snaking is enabled only for hw.motor1</span>
<span class="n">grid_scan</span><span class="p">([</span><span class="n">hw</span><span class="o">.</span><span class="n">det</span><span class="p">],</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">snake_axes</span><span class="o">=</span><span class="p">[</span><span class="n">hw</span><span class="o">.</span><span class="n">motor1</span><span class="p">])</span>

<span class="c1"># Snaking is enabled only for hw.motor1 and hw.motor2</span>
<span class="n">grid_scan</span><span class="p">([</span><span class="n">hw</span><span class="o">.</span><span class="n">det</span><span class="p">],</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">snake_axes</span><span class="o">=</span><span class="p">[</span><span class="n">hw</span><span class="o">.</span><span class="n">motor1</span><span class="p">,</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor2</span><span class="p">])</span>
</pre></div>
</div>
<p>The old (harder to read) way of specifying “snake” parameters, interleaved
with the other parameters, is still supported for backward-compatibility.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">grid_scan</span><span class="p">([</span><span class="n">hw</span><span class="o">.</span><span class="n">det</span><span class="p">],</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">hw</span><span class="o">.</span><span class="n">motor2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>The two styles—interleaved parameters vs. the new <code class="docutils literal notranslate"><span class="pre">snake_axes</span></code>
parameter—cannot be mixed. Mixing them will cause a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> to be
raised.</p>
</li>
</ul>
</div>
<div class="section" id="fixed">
<h3>Fixed<a class="headerlink" href="#fixed" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed a regression in v1.6.0 which accidentally broke some usages of the
<code class="docutils literal notranslate"><span class="pre">per_step</span></code> parameter in scans.</p></li>
<li><p>The plan <a class="reference internal" href="generated/bluesky.plans.fly.html#bluesky.plans.fly" title="bluesky.plans.fly"><code class="xref py py-func docutils literal notranslate"><span class="pre">bluesky.plans.fly()</span></code></a> returned <code class="docutils literal notranslate"><span class="pre">None</span></code> by mistake. It now
returns the Run Start uid, as do all the other plans that module.</p></li>
</ul>
</div>
</div>
<div class="section" id="v1-6-0-2020-03-16">
<h2>v1.6.0 (2020-03-16)<a class="headerlink" href="#v1-6-0-2020-03-16" title="Permalink to this headline">¶</a></h2>
<p>The most important change in this release is a complete reworking of how
bluesky interacts with the asyncio event loop. This resolves a long-running
issue of bluesky being incompatible with <code class="docutils literal notranslate"><span class="pre">tornado</span> <span class="pre">&gt;4</span></code>, which often tripped up
users in the context of using bluesky from Jupyter notebooks.</p>
<p>There are several other new features and fixes, including new plans and more
helpful error messages, enumerated further below.</p>
<div class="section" id="event-loop-re-factor">
<h3>Event loop re-factor<a class="headerlink" href="#event-loop-re-factor" title="Permalink to this headline">¶</a></h3>
<p>Previously, the <code class="xref py py-class docutils literal notranslate"><span class="pre">RunEngine</span></code> had been repeatedly starting and
stopping the asyncio event loop in <code class="xref py py-meth docutils literal notranslate"><span class="pre">__call__()</span></code>,
<code class="xref py py-meth docutils literal notranslate"><span class="pre">request_pause()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">stop()</span></code>, in
<code class="xref py py-meth docutils literal notranslate"><span class="pre">abort()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">halt()</span></code>, and
<code class="xref py py-meth docutils literal notranslate"><span class="pre">resume()</span></code>.  This worked, but is bad practice.  It
complicates attempts to integrate with the event loop with other tools.
Further, because as of tornado 5, tornado reports its self as an asyncio event
loop so attempts to start another asyncio event loop inside of a task fails
which means bluesky will not run in a jupyter notebook.  To fix this we now
continuously run the event loop on a background thread and the
<code class="xref py py-class docutils literal notranslate"><span class="pre">RunEngine</span></code> object manages the interaction with creating tasks
on that event loop.  To first order, users should not notice this change,
however details of how manage both blocking the user prompt and how we
suspend processing messages from a plan are radically different.
One consequence of running the event loop on a background thread is
that the code in plans and the callbacks is executed in that thread as well.
This means that plans and callbacks must now be threadsafe.</p>
<div class="section" id="api-changes">
<h4>API Changes<a class="headerlink" href="#api-changes" title="Permalink to this headline">¶</a></h4>
<div class="section" id="install-qt-kicker-deprecated">
<h5><code class="docutils literal notranslate"><span class="pre">install_qt_kicker</span></code> deprecated<a class="headerlink" href="#install-qt-kicker-deprecated" title="Permalink to this headline">¶</a></h5>
<p>Previously, we were running the asyncio event loop on the main thread
and blocked until it returned.  This meant that if you were using
Matplotlib and Qt for plots they would effectively be “frozen” because
the Qt event loop was not being given a chance to run.  We worked
around this by installing a ‘kicker’ task onto the asyncio event loop
that would periodically spin the Qt event loop to keep the figures
responsive (both to addition of new data from callbacks and from user
interaction).</p>
<p>Now that we are running the event loop on a background thread this no
longer works because the Qt event loop must be run on the main thread.
Instead we use <em>during_task</em> to block the main thread by running the
Qt event loop directly.</p>
</div>
<div class="section" id="during-task-kwarg-to-runengine-init">
<h5><code class="docutils literal notranslate"><span class="pre">during_task</span></code> kwarg to <code class="xref py py-meth docutils literal notranslate"><span class="pre">RunEngine.__init__()</span></code><a class="headerlink" href="#during-task-kwarg-to-runengine-init" title="Permalink to this headline">¶</a></h5>
<p>We need to block the main thread in <code class="xref py py-meth docutils literal notranslate"><span class="pre">__call__()</span></code> (and
<code class="xref py py-meth docutils literal notranslate"><span class="pre">resume()</span></code>) until the user supplied plan is complete.
Previously, we would do this by calling <code class="docutils literal notranslate"><span class="pre">self.loop.run_forever()</span></code> to
start the asyncio event loop.  We would then stop the event loop an
the bottom of <code class="xref py py-meth docutils literal notranslate"><span class="pre">_run()</span></code> and in
<code class="xref py py-meth docutils literal notranslate"><span class="pre">request_pause()</span></code> to un-block the main thread and return
control to the user terminal.  Now we must find an alternative way to achieve
this effect.</p>
<p>There is a a <a class="reference external" href="https://docs.python.org/3/library/threading.html#threading.Event" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">threading.Event</span></code></a> on the <code class="xref py py-class docutils literal notranslate"><span class="pre">RunEngine</span></code> that
will be set when the task for <code class="xref py py-meth docutils literal notranslate"><span class="pre">_run()</span></code> in completed,
however we can not simple wait on that event as that would again cause the Qt
windows to freeze.  We also do not want to bake a Matplotlib / Qt dependency
directly into the <code class="xref py py-class docutils literal notranslate"><span class="pre">RunEngine</span></code> so we added a hook, set at init
time, for an object expected to implement the method <code class="docutils literal notranslate"><span class="pre">block(event)</span></code>.
While the RunEngine executes a plan, it is passed the <a class="reference external" href="https://docs.python.org/3/library/threading.html#threading.Event" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">threading.Event</span></code></a>
and is responsible for blocking until the Event is set.  This function can do
other things (such as run the Qt event loop) during that time.  The required
signature is</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">block</span><span class="p">(</span><span class="n">ev</span><span class="p">:</span> <span class="n">Threading</span><span class="o">.</span><span class="n">Event</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="s2">&quot;Returns when ev is set&quot;</span>
</pre></div>
</div>
<p>The default hook will handle the case of the Matplotilb Qt backend and
the case of Matplotlib not being imported.</p>
</div>
<div class="section" id="wait-for-msg-now-expects-callables-rather-than-futures">
<h5><code class="docutils literal notranslate"><span class="pre">'wait_for'</span></code> Msg now expects callables rather than futures<a class="headerlink" href="#wait-for-msg-now-expects-callables-rather-than-futures" title="Permalink to this headline">¶</a></h5>
<p>Messages are stashed and re-run when plans are interrupted which would
result in re-using the coroutines passed through.  This has always
been broken, but due to the way were stopping the event loop to pause
the scan it was passing tests.</p>
<p>Instead of directly passing the values passed into <a class="reference external" href="https://docs.python.org/3/library/asyncio-task.html#asyncio.wait" title="(in Python v3.8)"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.wait()</span></code></a>, we
now expect that the iterable passed in is callables with the signature:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fut_fac</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">awaitable</span><span class="p">:</span>
    <span class="s1">&#39;This must work multiple times&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="the-persistent-dict-used-by-re-md-must-be-thread-safe">
<h5>The persistent dict used by <code class="docutils literal notranslate"><span class="pre">RE.md</span></code> must be thread-safe<a class="headerlink" href="#the-persistent-dict-used-by-re-md-must-be-thread-safe" title="Permalink to this headline">¶</a></h5>
<p>By default, <code class="docutils literal notranslate"><span class="pre">RE.md</span></code> is an ordinary dictionary, but any dict-like object may
be used. It is often convenient for the contents of that dictionary to persist
between sessions. To achieve this, we formerly recommended using
<code class="xref py py-class docutils literal notranslate"><span class="pre">HistoryDict</span></code>. Unfortunately,
<code class="xref py py-class docutils literal notranslate"><span class="pre">HistoryDict</span></code> is not threadsafe and is not compatible with
bluesky’s new concurrency model. We now recommend using
<code class="xref py py-class docutils literal notranslate"><span class="pre">PersistentDict</span></code>. See <a class="reference internal" href="metadata.html#md-persistence"><span class="std std-ref">Persistence Between Sessions</span></a> for
instructions on how to migrate existing metadata.</p>
</div>
<div class="section" id="callbacks-must-be-thread-safe">
<h5>Callbacks must be thread-safe<a class="headerlink" href="#callbacks-must-be-thread-safe" title="Permalink to this headline">¶</a></h5>
<p>Because callbacks now run on the background thread they must be
thread-safe.  The place where this is most likely to come up is in the
context of plotting which generally creates a GUI window.  Almost all
GUI frameworks insist that they only be interacted with only on the
main thread.  In the case of Qt we provide
<code class="xref py py-class docutils literal notranslate"><span class="pre">QtAwareCallback</span></code> to manage
moving Qt work back to the main thread (via a Qt <code class="docutils literal notranslate"><span class="pre">Signal</span></code>).</p>
</div>
<div class="section" id="plans-must-be-thread-safe">
<h5>Plans must be thread-safe<a class="headerlink" href="#plans-must-be-thread-safe" title="Permalink to this headline">¶</a></h5>
<p>Because the plans now execute on the background thread they must be
thread-safe if the touch any external state.  Similarly the callbacks,
we expect that the most likely place for this to fail is with
plotting.  In most cases this can be addressed by using a thread-safe
version of the callback.</p>
</div>
</div>
</div>
<div class="section" id="features">
<h3>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added support for <a class="reference internal" href="multi_run_plans.html"><span class="doc">Multi-Run Plans</span></a>.</p></li>
<li><p>Added better logging and convenience functions for managing it more easily.
See <a class="reference internal" href="debugging.html"><span class="doc">Debugging and Logging</span></a>.</p></li>
<li><p>Generalized <a class="reference internal" href="generated/bluesky.plans.list_scan.html#bluesky.plans.list_scan" title="bluesky.plans.list_scan"><code class="xref py py-func docutils literal notranslate"><span class="pre">list_scan()</span></code></a> to work on any number of motors,
not just one. In v1.2.0, <a class="reference internal" href="generated/bluesky.plans.scan.html#bluesky.plans.scan" title="bluesky.plans.scan"><code class="xref py py-func docutils literal notranslate"><span class="pre">scan()</span></code></a> was generalized in the
same way.</p></li>
<li><p>Added <a class="reference internal" href="generated/bluesky.plans.list_grid_scan.html#bluesky.plans.list_grid_scan" title="bluesky.plans.list_grid_scan"><code class="xref py py-func docutils literal notranslate"><span class="pre">list_grid_scan()</span></code></a>.</p></li>
<li><p>Added <a class="reference internal" href="generated/bluesky.plan_stubs.rd.html#bluesky.plan_stubs.rd" title="bluesky.plan_stubs.rd"><code class="xref py py-func docutils literal notranslate"><span class="pre">rd()</span></code></a>.</p></li>
<li><p>Added <a class="reference internal" href="generated/bluesky.suspenders.SuspendWhenChanged.html#bluesky.suspenders.SuspendWhenChanged" title="bluesky.suspenders.SuspendWhenChanged"><code class="xref py py-class docutils literal notranslate"><span class="pre">SuspendWhenChanged</span></code></a>.</p></li>
<li><p>Added <a class="reference internal" href="callbacks.html#bluesky.callbacks.core.make_callback_safe" title="bluesky.callbacks.core.make_callback_safe"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_callback_safe()</span></code></a> and
<a class="reference internal" href="callbacks.html#bluesky.callbacks.core.make_class_safe" title="bluesky.callbacks.core.make_class_safe"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_class_safe()</span></code></a>.</p></li>
<li><p>Added a <code class="docutils literal notranslate"><span class="pre">per_shot</span></code> parameter to <a class="reference internal" href="generated/bluesky.plans.count.html#bluesky.plans.count" title="bluesky.plans.count"><code class="xref py py-func docutils literal notranslate"><span class="pre">bluesky.plans.count()</span></code></a>, analogous to
the <code class="docutils literal notranslate"><span class="pre">per_step</span></code> parameter supported by plans that do scans.</p></li>
<li><p>Accept <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> to <a class="reference internal" href="generated/bluesky.plan_stubs.mv.html#bluesky.plan_stubs.mv" title="bluesky.plan_stubs.mv"><code class="xref py py-func docutils literal notranslate"><span class="pre">mv()</span></code></a> and
<a class="reference internal" href="generated/bluesky.plan_stubs.mvr.html#bluesky.plan_stubs.mvr" title="bluesky.plan_stubs.mvr"><code class="xref py py-func docutils literal notranslate"><span class="pre">mvr()</span></code></a>. Pass them through to all motors involved in
the move. Notably, this allows plans to pass a <code class="docutils literal notranslate"><span class="pre">timeout</span></code> parameter through
the <code class="docutils literal notranslate"><span class="pre">obj.set()</span></code>.</p></li>
<li><p>Added a new built-in RunEngine command, <code class="docutils literal notranslate"><span class="pre">RE_class</span></code>, which sends the type of
the <code class="docutils literal notranslate"><span class="pre">RunEngine</span></code> into the generator. This allows the plan to know if it is
being consumed by the usual <code class="docutils literal notranslate"><span class="pre">RunEngine</span></code>, a subclass, or some
non-responsive consumer like <code class="docutils literal notranslate"><span class="pre">list</span></code>.</p></li>
<li><p>Raise a more helpful error message if the <code class="docutils literal notranslate"><span class="pre">num</span></code> parameter given to
<a class="reference internal" href="generated/bluesky.plans.scan.html#bluesky.plans.scan" title="bluesky.plans.scan"><code class="xref py py-func docutils literal notranslate"><span class="pre">scan()</span></code></a> is not a whole number, as can happen if <code class="docutils literal notranslate"><span class="pre">num</span></code> is
mistaken to mean “step size”.</p></li>
<li><p>Report the version of bluesky and (if available) ophyd in the metadata.</p></li>
<li><p>Add a more helpful error message if the value returned from some call to
<code class="docutils literal notranslate"><span class="pre">obj.read()</span></code> returns <code class="docutils literal notranslate"><span class="pre">None</span></code> instead of the expected dict.</p></li>
<li><p>If the user tries to start a <a class="reference internal" href="callbacks.html#bluesky.callbacks.zmq.RemoteDispatcher" title="bluesky.callbacks.zmq.RemoteDispatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">RemoteDispatcher</span></code></a>
after it has been stopped, raise a more helpful error message.</p></li>
</ul>
</div>
<div class="section" id="bug-fixes">
<h3>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">state</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">RunEngine</span></code> is now a read-only property, as
it should have always been.</p></li>
<li><p>In the Best-Effort Callback, do not assume that the RunStart document
includes <code class="docutils literal notranslate"><span class="pre">'scan_id'</span></code>, which is an optional key.</p></li>
<li><p>The commandline utility <code class="docutils literal notranslate"><span class="pre">bluesky-0MQ-proxy</span></code> now works on Windows.</p></li>
<li><p>The IPython integrations have been updated for compatibility with IPython 7.</p></li>
<li><p>Added support for “adaptive fly scans” by enabling the <code class="docutils literal notranslate"><span class="pre">'collect'</span></code> message
to (optionally) return the Events it emitted.</p></li>
<li><p>Fixed bug in tqdm-based progress bar where tqdm could be handed a value it
considered invalid.</p></li>
</ul>
</div>
<div class="section" id="other-api-changes">
<h3>Other API Changes<a class="headerlink" href="#other-api-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Removed attribute <code class="docutils literal notranslate"><span class="pre">nnls</span></code> from
<code class="xref py py-class docutils literal notranslate"><span class="pre">bluesky.callbacks.best_effort.PeakResults</span></code>. It has always been
<code class="docutils literal notranslate"><span class="pre">None</span></code> (never implemented) and only served to cause confusion.</p></li>
</ul>
</div>
</div>
<div class="section" id="v1-5-7-2020-05-01">
<h2>v1.5.7 (2020-05-01)<a class="headerlink" href="#v1-5-7-2020-05-01" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>Bug Fixes<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>This release fixes a bug that resulted in no configuration data related
to fly scans being added to descriptors.</p>
</div>
</div>
<div class="section" id="v1-5-6-2020-03-11">
<h2>v1.5.6 (2020-03-11)<a class="headerlink" href="#v1-5-6-2020-03-11" title="Permalink to this headline">¶</a></h2>
<p>Added support for Python 3.8 and the following for forward-compatibility with
1.6.0.</p>
<ul class="simple">
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bluesky.utils.PersistentDict</span></code></p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bluesky.callbacks.mpl_plotting.QtAwareCallback</span></code></p></li>
</ul>
<p>See
<a class="reference external" href="https://github.com/bluesky/bluesky/milestone/19?closed=1">the 1.5.6 GH milestone</a>
for the complete list of changes.</p>
</div>
<div class="section" id="v1-5-5-2019-08-16">
<h2>v1.5.5 (2019-08-16)<a class="headerlink" href="#v1-5-5-2019-08-16" title="Permalink to this headline">¶</a></h2>
<p>Support fix <code class="docutils literal notranslate"><span class="pre">bluesky.utils.register_transform</span></code> with IPython &gt;= 7</p>
</div>
<div class="section" id="v1-5-4-2019-08-09">
<h2>v1.5.4 (2019-08-09)<a class="headerlink" href="#v1-5-4-2019-08-09" title="Permalink to this headline">¶</a></h2>
<p>Support Maplotlib 3.1 and above. (Do not use deprecated and removed aspect
adjustable values.)</p>
</div>
<div class="section" id="v1-5-3-2019-05-27">
<h2>v1.5.3 (2019-05-27)<a class="headerlink" href="#v1-5-3-2019-05-27" title="Permalink to this headline">¶</a></h2>
<p>This release removes the dependency on an old version of the <code class="docutils literal notranslate"><span class="pre">jsonschema</span></code>
library and requires the latest version of the <code class="docutils literal notranslate"><span class="pre">event-model</span></code> library.</p>
</div>
<div class="section" id="v1-5-2-2019-03-11">
<h2>v1.5.2 (2019-03-11)<a class="headerlink" href="#v1-5-2-2019-03-11" title="Permalink to this headline">¶</a></h2>
<p>This release fixes compatibility with matplotlib 2.x; at least some matplotlib
2.x releases are not compatible with the matplotlib plotting callbacks in
bluesky v1.5.1. This release of bluesky is compatible with all 2.x and 3.x
releases.</p>
</div>
<div class="section" id="v1-5-1-2019-03-08">
<h2>v1.5.1 (2019-03-08)<a class="headerlink" href="#v1-5-1-2019-03-08" title="Permalink to this headline">¶</a></h2>
<p>This release contains bug fixes and documentation updates.</p>
<div class="section" id="id2">
<h3>Features<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Use the ISO8601 delimiters for date in RE scans.</p></li>
</ul>
</div>
<div class="section" id="id3">
<h3>Bug Fixes<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Pin jsonschema &lt;3 due to its deprecations.</p></li>
<li><p>Stop using deprecated API in Matplotlib.</p></li>
</ul>
</div>
</div>
<div class="section" id="v1-5-0-2019-01-03">
<h2>v1.5.0 (2019-01-03)<a class="headerlink" href="#v1-5-0-2019-01-03" title="Permalink to this headline">¶</a></h2>
<p>This release includes many documentation fixes and handful of new features,
especially around improved logging.</p>
<div class="section" id="id4">
<h3>Features<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Logging has been increased and improved.</p></li>
<li><p>A default handler is added to the <code class="docutils literal notranslate"><span class="pre">'bluesky'</span></code> logger at import time. A new
convenience function, <code class="xref py py-func docutils literal notranslate"><span class="pre">set_handler()</span></code>, addresses common cases
such as directing the log output to a file.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">bluesky-0MQ-proxy</span></code> script now supports a <code class="docutils literal notranslate"><span class="pre">-v,</span> <span class="pre">--verbose</span></code> option,
which logs every start and stop document received and a <code class="docutils literal notranslate"><span class="pre">-vvv</span></code> (“very
verbose”) option, which logs every document of every type.</p></li>
<li><p>The prefix on messages sent by <a class="reference internal" href="callbacks.html#bluesky.callbacks.zmq.Publisher" title="bluesky.callbacks.zmq.Publisher"><code class="xref py py-class docutils literal notranslate"><span class="pre">bluesky.callbacks.zmq.Publisher</span></code></a> can
be set to arbitrary bytes. (In previous versions, the prefix was hardcoded to
an encoded combination of the hostname, process ID, and the Python object ID
of a RunEngine instance.)</p></li>
<li><p>The RunEngine includes a human-readable, not-necessarily-unique <code class="docutils literal notranslate"><span class="pre">scan_id</span></code>
key in the RunStart document. The source of the <code class="docutils literal notranslate"><span class="pre">scan_id</span></code> is now pluggable
via a new parameter, <code class="docutils literal notranslate"><span class="pre">scan_id_source</span></code>. See <a class="reference internal" href="run_engine_api.html"><span class="doc">RunEngine API Documentation</span></a> for
details.</p></li>
<li><p>The convenience function, <code class="xref py py-func docutils literal notranslate"><span class="pre">bluesky.utils.ts_msg_hook()</span></code> accepts new
parameter <code class="docutils literal notranslate"><span class="pre">file</span></code> for directing the output to a file instead of the standard
out.</p></li>
<li><p>It is possible to use those callbacks that do not require matplotlib without
importing it.</p></li>
</ul>
</div>
<div class="section" id="id5">
<h3>Bug Fixes<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed BestEffortCallback’s handling of integer data in plots.</p></li>
<li><p>Fixed invalid escape sequence that produced a warning in Python 3.6.</p></li>
</ul>
</div>
<div class="section" id="breaking-changes">
<h3>Breaking Changes<a class="headerlink" href="#breaking-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The signature of <a class="reference internal" href="callbacks.html#bluesky.callbacks.zmq.RemoteDispatcher" title="bluesky.callbacks.zmq.RemoteDispatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">bluesky.callbacks.zmq.RemoteDispatcher</span></code></a> has been
changed in a non-backward-compatible way. The parameters for filtering
messages by <code class="docutils literal notranslate"><span class="pre">hostname</span></code>, <code class="docutils literal notranslate"><span class="pre">pid</span></code>, and <code class="docutils literal notranslate"><span class="pre">run_engine_id</span></code> have been replaced
by one new parameter, <code class="docutils literal notranslate"><span class="pre">prefix</span></code>.</p></li>
<li><p>The default value of <code class="docutils literal notranslate"><span class="pre">RunEngine.verbose</span></code> is now <code class="docutils literal notranslate"><span class="pre">True</span></code>, meaning that the
<code class="docutils literal notranslate"><span class="pre">RunEngine.log</span></code> is <em>not</em> disabled by default.</p></li>
</ul>
</div>
<div class="section" id="deprecations">
<h3>Deprecations<a class="headerlink" href="#deprecations" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The <a class="reference internal" href="callbacks.html#bluesky.callbacks.zmq.Publisher" title="bluesky.callbacks.zmq.Publisher"><code class="xref py py-class docutils literal notranslate"><span class="pre">bluesky.callbacks.zmq.Publisher</span></code></a> accepts an optional RunEngine
instance, which the Publisher subscribes to automatically. This parameter has
been deprecated; users are now encouraged to subscribe the publisher to the
RunEngine manually, in the normal way (<code class="docutils literal notranslate"><span class="pre">RE.subscribe(publisher)</span></code>). The
parameter may be removed in a future release of bluesky.</p></li>
</ul>
</div>
</div>
<div class="section" id="v1-4-1-2018-09-24">
<h2>v1.4.1 (2018-09-24)<a class="headerlink" href="#v1-4-1-2018-09-24" title="Permalink to this headline">¶</a></h2>
<p>This release fixes a single regression introduced in v1.4.0. We recommend all
users upgrade.</p>
<div class="section" id="id6">
<h3>Bug Fixes<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fix a critical typo that made
<a class="reference internal" href="callbacks.html#bluesky.callbacks.mpl_plotting.LiveGrid" title="bluesky.callbacks.mpl_plotting.LiveGrid"><code class="xref py py-class docutils literal notranslate"><span class="pre">LiveGrid</span></code></a> unusable.</p></li>
</ul>
<p>Note that the 1.4.x series is not compatible with newer versions of matplotlib;
it needs a version lower than 3.1.0 due to an API change in matplotlib. The
1.5.x series is compatible with matplotlib versions before and after the
change.</p>
</div>
</div>
<div class="section" id="v1-4-0-2018-09-05">
<h2>v1.4.0 (2018-09-05)<a class="headerlink" href="#v1-4-0-2018-09-05" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id7">
<h3>Features<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added ability to control ‘sense’ of
<a class="reference internal" href="callbacks.html#bluesky.callbacks.mpl_plotting.LiveGrid" title="bluesky.callbacks.mpl_plotting.LiveGrid"><code class="xref py py-class docutils literal notranslate"><span class="pre">LiveGrid</span></code></a> (ex “positive goes
down and to the right”) to match the coordinates in the hutch.</p></li>
<li><p>Learned how to specify the serializer / deserializer for the zmq
publisher / client.</p></li>
<li><p>Promoted the inner function from <code class="xref py py-func docutils literal notranslate"><span class="pre">one_nd_step()</span></code>
to a top-level plan <code class="xref py py-func docutils literal notranslate"><span class="pre">bluesky.plan_stubs.move_per_step()</span></code>.</p></li>
<li><p>Added flag to <a class="reference internal" href="generated/bluesky.plans.ramp_plan.html#bluesky.plans.ramp_plan" title="bluesky.plans.ramp_plan"><code class="xref py py-func docutils literal notranslate"><span class="pre">ramp_plan()</span></code></a> to control if a
data point is taken before the ramp starts.</p></li>
</ul>
</div>
<div class="section" id="id8">
<h3>Bug Fixes<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Ensure order stability in <code class="xref py py-func docutils literal notranslate"><span class="pre">get_labeled_devices()</span></code>
on all supported versions of Python.</p></li>
<li><p>Fixed typos, dev requirements, and build details.</p></li>
</ul>
</div>
</div>
<div class="section" id="v1-3-3-2018-06-06">
<h2>v1.3.3 (2018-06-06)<a class="headerlink" href="#v1-3-3-2018-06-06" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id9">
<h3>Bug Fixes<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed show-shopping RunEngine bug in flyer asset collection. (The impact of
this bug is expected to be low, as there <em>are</em> no flyers with asset
collection yet and the bug was discovered while writing the first one.)</p></li>
<li><p>Fixed packaging issue where certain important files (notably
<code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code>) were not included in the source tarball.</p></li>
<li><p>Made BestEffortCallback swallow errors related to matplotlib’s “tight layout”
if the occur — better to show a messy plot than error out.</p></li>
</ul>
</div>
</div>
<div class="section" id="v1-3-2-2018-05-24">
<h2>v1.3.2 (2018-05-24)<a class="headerlink" href="#v1-3-2-2018-05-24" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id10">
<h3>Bug Fixes<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Revised behavior of magics that integrate with ophyd’s experimental
“labels” feature. The most important difference is that the <code class="docutils literal notranslate"><span class="pre">%wa</span></code> magic now
traverses the children of labeled devices to find any sub-devices that are
positioners.</p></li>
</ul>
</div>
</div>
<div class="section" id="v1-3-1-2018-05-19">
<h2>v1.3.1 (2018-05-19)<a class="headerlink" href="#v1-3-1-2018-05-19" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id11">
<h3>Bug Fixes<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed race condition where monitored signals could emit an Event document
before the corresponding Event Descriptor document.</p></li>
<li><p>Addressed incompatibilities with upcoming release of Python, 3.7.</p></li>
</ul>
</div>
</div>
<div class="section" id="v1-3-0-2018-05-15">
<h2>v1.3.0 (2018-05-15)<a class="headerlink" href="#v1-3-0-2018-05-15" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id12">
<h3>Features<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>When used with ophyd v1.2.0 or later, emit Resource and Datum documents
through the RunEngine. Previously, ophyd would insert these documents
directly into a database. This left other consumers with only partial
information (for example, missing file paths to externally-stored data) and
no guarantees around synchronization. Now, ophyd need not interact with a
database directly. All information flows through the RunEngine and out to any
subscribed consumers in a deterministic order.</p></li>
<li><p>New Msg commands, <code class="docutils literal notranslate"><span class="pre">install_suspender</span></code> and <code class="docutils literal notranslate"><span class="pre">remove_suspender</span></code>, allow plans
to temporarily add and remove Suspenders.</p></li>
<li><p>The RunEngine’s signal handling (i.e. Ctrl+C capturing) is now configurable.
The RunEngine accepts a list of <code class="docutils literal notranslate"><span class="pre">context_managers</span></code> that it will enter and
exit before and after running. By default, it has one context manager that
handles Ctrl+C. To disable Ctrl+C handling, pass in an empty list instead.
This can also be used to inject other custom behavior.</p></li>
<li><p>Add new plans: <code class="xref py py-func docutils literal notranslate"><span class="pre">x2x_scan()</span></code>,
<code class="xref py py-func docutils literal notranslate"><span class="pre">spiral_square_plan()</span></code>, and
<code class="xref py py-func docutils literal notranslate"><span class="pre">rel_spiral_square_plan()</span></code>.</p></li>
<li><p>Add convenience methods for reviewing the available commands,
<a class="reference internal" href="run_engine_api.html#bluesky.run_engine.RunEngine.commands" title="bluesky.run_engine.RunEngine.commands"><code class="xref py py-meth docutils literal notranslate"><span class="pre">commands()</span></code></a> and
<a class="reference internal" href="run_engine_api.html#bluesky.run_engine.RunEngine.print_command_registry" title="bluesky.run_engine.RunEngine.print_command_registry"><code class="xref py py-meth docutils literal notranslate"><span class="pre">print_command_registry()</span></code></a>.</p></li>
<li><p>Add a <code class="docutils literal notranslate"><span class="pre">crossings</span></code> attribute to <code class="docutils literal notranslate"><span class="pre">PeakStats</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id13">
<h3>Bug Fixes<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>When resuming after a suspender, call <code class="docutils literal notranslate"><span class="pre">resume()</span></code> on all devices (if
present).</p></li>
<li><p>Fixed BEC LiveGrid plot for a motor with one step.</p></li>
<li><p>A codepath in <code class="docutils literal notranslate"><span class="pre">LiveFit</span></code> that should have produced a warning produced an
error instead.</p></li>
</ul>
</div>
<div class="section" id="id14">
<h3>Breaking Changes<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>User-defined callbacks subscribed to the RunEngine <code class="docutils literal notranslate"><span class="pre">'all'</span></code> stream must
accept documents with names <code class="docutils literal notranslate"><span class="pre">'resource'</span></code>, <code class="docutils literal notranslate"><span class="pre">'datum'</span></code> and <code class="docutils literal notranslate"><span class="pre">'bulk_datum'</span></code>.
It does not necessarily have to heed their contents, but it must not fall
over if it receives one.</p></li>
</ul>
</div>
<div class="section" id="id15">
<h3>Deprecations<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The IPython “magics”, always marked as experimental, have been reworked.
Instead of relying on the singleton lists, <code class="docutils literal notranslate"><span class="pre">BlueskyMagics.positioners</span></code> and
<code class="docutils literal notranslate"><span class="pre">BlueskyMagics.detectors</span></code>, the magics now scrape the user namespace for
objects that implement the <code class="docutils literal notranslate"><span class="pre">_ophyd_labels_</span></code> interface. See <a class="reference internal" href="magics.html"><span class="doc">IPython ‘Magics’ [Experimental]</span></a>
for the new usage. The magics will revert to their old behavior if the
singleton lists are non-empty, but they will produce a warning. The old
behavior will be removed in a future release.</p></li>
</ul>
</div>
</div>
<div class="section" id="v1-2-0-2018-02-20">
<h2>v1.2.0 (2018-02-20)<a class="headerlink" href="#v1-2-0-2018-02-20" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id16">
<h3>Features<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Refreshed documentation with a new <a class="reference internal" href="tutorial.html"><span class="doc">Tutorial</span></a> section.</p></li>
<li><p>Extend <a class="reference internal" href="generated/bluesky.plans.scan.html#bluesky.plans.scan" title="bluesky.plans.scan"><code class="xref py py-func docutils literal notranslate"><span class="pre">scan()</span></code></a> and <a class="reference internal" href="generated/bluesky.plans.rel_scan.html#bluesky.plans.rel_scan" title="bluesky.plans.rel_scan"><code class="xref py py-func docutils literal notranslate"><span class="pre">rel_scan()</span></code></a> to
handle multiple motors, rendering <code class="xref py py-func docutils literal notranslate"><span class="pre">inner_product_scan()</span></code> and
<code class="xref py py-func docutils literal notranslate"><span class="pre">relative_inner_product_scan()</span></code> redundant.</p></li>
<li><p>A new plan stub, <a class="reference internal" href="generated/bluesky.plan_stubs.repeat.html#bluesky.plan_stubs.repeat" title="bluesky.plan_stubs.repeat"><code class="xref py py-func docutils literal notranslate"><span class="pre">repeat()</span></code></a>, repeats another plan N
times with optional interleaved delays — a kind of customizable version of
<a class="reference internal" href="generated/bluesky.plans.count.html#bluesky.plans.count" title="bluesky.plans.count"><code class="xref py py-func docutils literal notranslate"><span class="pre">count()</span></code></a>.</p></li>
<li><p>Better validation of user-defined <code class="docutils literal notranslate"><span class="pre">per_step</span></code> functions and more informative
error messages to match.</p></li>
</ul>
</div>
<div class="section" id="id17">
<h3>Bug Fixes<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fix axes orientation in <code class="xref py py-class docutils literal notranslate"><span class="pre">LiveRaster</span></code>.</p></li>
<li><p>Make <code class="xref py py-class docutils literal notranslate"><span class="pre">BestEffortCallback</span></code> display multi-motor scans properly.</p></li>
<li><p>Fix bug in <code class="xref py py-func docutils literal notranslate"><span class="pre">ts_msg_hook()</span></code> where it conflated month and minute. Also,
include sub-second precision.</p></li>
<li><p>Avoid situation where plan without hints caused the
<code class="xref py py-class docutils literal notranslate"><span class="pre">BestEffortCallback</span></code> to error instead of do its best to guess useful
behavior.</p></li>
<li><p>Skip un-filled externally-stored data in <a class="reference internal" href="callbacks.html#bluesky.callbacks.LiveTable" title="bluesky.callbacks.LiveTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">LiveTable</span></code></a>. This fixes a
bug where it is expecting array data but gets UUID (<code class="docutils literal notranslate"><span class="pre">datum_id</span></code>) and errors
out.</p></li>
</ul>
</div>
<div class="section" id="id18">
<h3>Deprecations<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The <code class="xref py py-func docutils literal notranslate"><span class="pre">caching_repeater()</span></code> plan has been deprecated
because it is incompatible with some preprocessors. It will be removed in
a future release of bluesky. It was not documented in any previous releases
and rarely if ever used, so the impact of this removal is expected to be low.</p></li>
</ul>
</div>
</div>
<div class="section" id="v1-1-0-2017-12-19">
<h2>v1.1.0 (2017-12-19)<a class="headerlink" href="#v1-1-0-2017-12-19" title="Permalink to this headline">¶</a></h2>
<p>This release fixes small bugs in v1.0.0 and introduces one new feature. The
API changes or deprecations are not expected to affect many users.</p>
<div class="section" id="id19">
<h3>Features<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Add a new command to the <a class="reference internal" href="run_engine_api.html#bluesky.run_engine.RunEngine" title="bluesky.run_engine.RunEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunEngine</span></code></a>, <code class="docutils literal notranslate"><span class="pre">'drop'</span></code>,
which jettisons the currently active event bundle without saving. This is
useful for workflows that generate many readings that can immediately be
categorized as not useful by the plan and summarily discarded.</p></li>
<li><p>Add <a class="reference internal" href="callbacks.html#bluesky.utils.install_kicker" title="bluesky.utils.install_kicker"><code class="xref py py-func docutils literal notranslate"><span class="pre">install_kicker()</span></code></a>, which dispatches automatically to
<a class="reference internal" href="callbacks.html#bluesky.utils.install_qt_kicker" title="bluesky.utils.install_qt_kicker"><code class="xref py py-func docutils literal notranslate"><span class="pre">install_qt_kicker()</span></code></a> or
<a class="reference internal" href="callbacks.html#bluesky.utils.install_nb_kicker" title="bluesky.utils.install_nb_kicker"><code class="xref py py-func docutils literal notranslate"><span class="pre">install_nb_kicker()</span></code></a> depending on the current matplotlib
backend.</p></li>
</ul>
</div>
<div class="section" id="id20">
<h3>Bug Fixes<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fix the hint for <code class="xref py py-func docutils literal notranslate"><span class="pre">inner_product_scan()</span></code>, which previously
used a default hint that was incorrect.</p></li>
</ul>
</div>
<div class="section" id="breaking-changes-and-deprecations">
<h3>Breaking Changes and Deprecations<a class="headerlink" href="#breaking-changes-and-deprecations" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>In <a class="reference internal" href="generated/bluesky.plans.tune_centroid.html#bluesky.plans.tune_centroid" title="bluesky.plans.tune_centroid"><code class="xref py py-func docutils literal notranslate"><span class="pre">tune_centroid()</span></code></a>, change the meaning of the
<code class="docutils literal notranslate"><span class="pre">step_factor</span></code> parameter to be the factor to reduce the range of each
successive iteration. Enforce bounds on the motion, and determine the
centroid from each pass separately.</p></li>
<li><p>The <a class="reference internal" href="plans.html#bluesky.preprocessors.SupplementalData" title="bluesky.preprocessors.SupplementalData"><code class="xref py py-class docutils literal notranslate"><span class="pre">SupplementalData</span></code></a> preprocessor inserts its
instructions in a more logical order: first baseline readings, then
monitors, then flyers. Previously, the order was reversed.</p></li>
<li><p>The suspender <code class="xref py py-class docutils literal notranslate"><span class="pre">SuspendInBand</span></code> has been renamed to
<a class="reference internal" href="generated/bluesky.suspenders.SuspendWhenOutsideBand.html#bluesky.suspenders.SuspendWhenOutsideBand" title="bluesky.suspenders.SuspendWhenOutsideBand"><code class="xref py py-class docutils literal notranslate"><span class="pre">SuspendWhenOutsideBand</span></code></a> to make its meaning more
clear. Its behavior has not changed: it suspends when a value exits a given
range. The original, confusing name now issues a warning.</p></li>
<li><p>The suspender <code class="xref py py-class docutils literal notranslate"><span class="pre">SuspendOutBand</span></code>, which
counter-intuitively suspends <em>when a value enters a given range</em>, has been
deprecated. (If some application is found for this unusual scenario, the user
can always implement a custom suspender to handle it.)</p></li>
</ul>
</div>
</div>
<div class="section" id="v1-0-0-2017-11-07">
<h2>v1.0.0 (2017-11-07)<a class="headerlink" href="#v1-0-0-2017-11-07" title="Permalink to this headline">¶</a></h2>
<p>This tag marks an important release for bluesky, signifying the conclusion of
the early development phase. From this point on, we intend that this project
will be co-developed between multiple facilities. The 1.x series is planned to
be a long-term-support release.</p>
<div class="section" id="id21">
<h3>Bug Fixes<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="generated/bluesky.plan_stubs.mv.html#bluesky.plan_stubs.mv" title="bluesky.plan_stubs.mv"><code class="xref py py-func docutils literal notranslate"><span class="pre">mv()</span></code></a> and <a class="reference internal" href="generated/bluesky.plan_stubs.mvr.html#bluesky.plan_stubs.mvr" title="bluesky.plan_stubs.mvr"><code class="xref py py-func docutils literal notranslate"><span class="pre">mvr()</span></code></a> now works
on pseudopositioners.</p></li>
<li><p><a class="reference internal" href="generated/bluesky.preprocessors.reset_positions_wrapper.html#bluesky.preprocessors.reset_positions_wrapper" title="bluesky.preprocessors.reset_positions_wrapper"><code class="xref py py-func docutils literal notranslate"><span class="pre">reset_positions_wrapper()</span></code></a> now works on
pseudopositioners.</p></li>
<li><p>Plans given an empty detectors list, such as <code class="docutils literal notranslate"><span class="pre">count([])</span></code>, no longer break
the <code class="xref py py-class docutils literal notranslate"><span class="pre">BestEffortCallback</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-11-0-2017-11-01">
<h2>v0.11.0 (2017-11-01)<a class="headerlink" href="#v0-11-0-2017-11-01" title="Permalink to this headline">¶</a></h2>
<p>This is the last release before 1.0.0. It contains major restructurings and
general clean-up.</p>
<div class="section" id="id22">
<h3>Breaking Changes and Deprecations<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>The <code class="xref py py-mod docutils literal notranslate"><span class="pre">bluesky.plans</span></code> module has been split into</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="xref py py-mod docutils literal notranslate"><span class="pre">bluesky.plans</span></code> — plans that create a run, such as <code class="xref py py-func docutils literal notranslate"><span class="pre">count()</span></code>
and <code class="xref py py-func docutils literal notranslate"><span class="pre">scan()</span></code></p></li>
<li><p><code class="xref py py-mod docutils literal notranslate"><span class="pre">bluesky.preprocessors</span></code> — plans that take in other plans and
motify them, such as <code class="xref py py-func docutils literal notranslate"><span class="pre">baseline_wrapper()</span></code></p></li>
<li><p><code class="xref py py-mod docutils literal notranslate"><span class="pre">bluesky.plan_stubs</span></code> — small plans meant as convenient building
blocks for creating custom plans, such as <code class="xref py py-func docutils literal notranslate"><span class="pre">trigger_and_read()</span></code></p></li>
<li><p><code class="xref py py-mod docutils literal notranslate"><span class="pre">bluesky.object_plans</span></code> and <code class="xref py py-mod docutils literal notranslate"><span class="pre">bluesky.cntx</span></code>, containing
legacy APIs to plans that were deprecated in a previous release and
will be removed in a future release.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>The RunEngine raises a <code class="docutils literal notranslate"><span class="pre">RunEngineInterrupted</span></code> exception when interrupted
(e.g. paused). The optional argument <code class="docutils literal notranslate"><span class="pre">raise_if_interrupted</span></code> has been
removed.</p></li>
<li><p>The module <code class="xref py py-mod docutils literal notranslate"><span class="pre">bluesky.callbacks.scientific</span></code> has been removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PeakStats</span></code> has been moved to <code class="xref py py-mod docutils literal notranslate"><span class="pre">bluesky.callbacks.fitting</span></code>, and
<code class="xref py py-func docutils literal notranslate"><span class="pre">plot_peak_stats()</span></code> has been moved to <cite>bluesky.callbacks.mpl_plotting</cite>.</p></li>
<li><p>The synthetic ‘hardware’ objects in <code class="docutils literal notranslate"><span class="pre">bluesky.examples</span></code> have been relocated
to ophyd (bluesky’s sister package) and aggressively refactored to be more
closely aligned with the behavior of real hardware. The <code class="docutils literal notranslate"><span class="pre">Reader</span></code> and
<code class="docutils literal notranslate"><span class="pre">Mover</span></code> classes have been removed in favor of <code class="docutils literal notranslate"><span class="pre">SynSignal</span></code>,
<code class="docutils literal notranslate"><span class="pre">SynPeriodicSignal</span></code>, <code class="docutils literal notranslate"><span class="pre">SynAxis</span></code>, <code class="docutils literal notranslate"><span class="pre">SynSignalWithRegistry</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id23">
<h3>Features<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Add <code class="xref py py-func docutils literal notranslate"><span class="pre">stub_wrapper()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">stub_decorator()</span></code> that strips
open_run/close_run and stage/unstage messages out of a plan, so that it can
be reused as part of a larger plan that manages the scope of a run manually.</p></li>
<li><p>Add <code class="xref py py-func docutils literal notranslate"><span class="pre">tune_centroid()</span></code> plan that iteratively finds the centroid of a
single peak.</p></li>
<li><p>Allow devices with couple axes to be used in N-dimensional scan plans.</p></li>
<li><p>Add <code class="xref py py-func docutils literal notranslate"><span class="pre">contingency_wrapper()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">contingency_decorator()</span></code> for
richer cleanup specification.</p></li>
<li><p>The number of events in each event stream is recorded in the RunStop document
under the key ‘num_events’.</p></li>
<li><p>Make the message shown when the RunEngine is paused configurable via the
attribute <code class="docutils literal notranslate"><span class="pre">RunEngine.pause_msg</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id24">
<h3>Bug Fixes<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fix ordering of dimensions in <code class="xref py py-func docutils literal notranslate"><span class="pre">grid_scan()</span></code> hints.</p></li>
<li><p>Show Figures created internally.</p></li>
<li><p>Support a negative direction for adaptive scans.</p></li>
<li><p>Validate that all descriptors with a given (event stream) name have
consistent data keys.</p></li>
<li><p>Correctly mark <code class="docutils literal notranslate"><span class="pre">exit_status</span></code> field in RunStop metadata based on which
termination method was called (abort, stop, halt).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LiveFitPlot</span></code> handles updates more carefully.</p></li>
</ul>
</div>
<div class="section" id="internal-changes">
<h3>Internal Changes<a class="headerlink" href="#internal-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The <code class="xref py py-mod docutils literal notranslate"><span class="pre">bluesky.callbacks</span></code> package has been split up into more modules.
Shim imports maintain backward compatibility, except where noted in the
section on API Changes above.</p></li>
<li><p>Matplotlib is now an optional dependency. If it is not importable,
plotting-related callbacks will not be available.</p></li>
<li><p>An internal change to the RunEngine supports ophyd’s new Status object API
for adding callbacks.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-10-3-2017-09-12">
<h2>v0.10.3 (2017-09-12)<a class="headerlink" href="#v0-10-3-2017-09-12" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id25">
<h3>Bug Fixes<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fix critical <code class="xref py py-func docutils literal notranslate"><span class="pre">baseline_wrapper()</span></code> bug.</p></li>
<li><p>Make <code class="xref py py-func docutils literal notranslate"><span class="pre">plan_mutator()</span></code> more flexible. (See docstring.)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-10-2-2017-09-11">
<h2>v0.10.2 (2017-09-11)<a class="headerlink" href="#v0-10-2-2017-09-11" title="Permalink to this headline">¶</a></h2>
<p>This is a small release with bug fixes and UI improvements.</p>
<div class="section" id="id26">
<h3>Bug Fixes<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fix bug wherein BestEffortCallback tried to plot strings as floats. The
intended behavior is to skip them and warn.</p></li>
</ul>
</div>
<div class="section" id="id27">
<h3>Features<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Include a more informative header in BestEffortCallback.</p></li>
<li><p>Include an ‘Offset’ column in %wa output.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-10-1-2017-09-11">
<h2>v0.10.1 (2017-09-11)<a class="headerlink" href="#v0-10-1-2017-09-11" title="Permalink to this headline">¶</a></h2>
<p>This release is equivalent to v0.10.2. The number was skipped due to packaging
problems.</p>
</div>
<div class="section" id="v0-10-0-2017-09-06">
<h2>v0.10.0 (2017-09-06)<a class="headerlink" href="#v0-10-0-2017-09-06" title="Permalink to this headline">¶</a></h2>
<div class="section" id="highlights">
<h3>Highlights<a class="headerlink" href="#highlights" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Automatic best-effort visualization and peak-fitting is available for all
plans, including user-defined ones.</p></li>
<li><p>The “SPEC-like” API has been fully removed, and its most useful features have
been applied to the library in a self-consistent way. See the next section
for detailed instructions on migrating.</p></li>
<li><p>Improved tooling for streaming documents over a network for live processing
and visualization in a different process or on a different machine.</p></li>
</ul>
</div>
<div class="section" id="id28">
<h3>Breaking Changes<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>The modules implementing what was loosely dubbed a “SPEC-like” interface
(<code class="docutils literal notranslate"><span class="pre">bluesky.spec_api</span></code> and <code class="docutils literal notranslate"><span class="pre">bluesky.global_state</span></code>) have been entirely
removed. This approach was insufficently similar to SPEC to satisfy SPEC
users and confusingly inconsistent with the rest of bluesky.</p>
<p>The new approach retains the good things about that interface and makes them
available for use with <em>all</em> plans consistently, including user defined ones.
Users who have been fully utilitzing these “SPEC-like” plans will notice four
differences.</p>
<ol class="arabic">
<li><p>No <code class="docutils literal notranslate"><span class="pre">gs.DETS</span></code>. Just use your own variable for detectors. Instead of:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># OLD ALTERNATIVE, NO LONGER SUPPORTED</span>

<span class="kn">from</span> <span class="nn">bluesky.global_state</span> <span class="kn">import</span> <span class="n">gs</span>
<span class="kn">from</span> <span class="nn">bluesky.spec_api</span> <span class="kn">import</span> <span class="n">ct</span>

<span class="n">gs</span><span class="o">.</span><span class="n">DETS</span> <span class="o">=</span> <span class="c1"># a list of some detectors</span>
<span class="n">RE</span><span class="p">(</span><span class="n">ct</span><span class="p">())</span>
</pre></div>
</div>
<p>do:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bluesky.plans</span> <span class="kn">import</span> <span class="n">count</span>

<span class="n">dets</span> <span class="o">=</span> <span class="c1"># a list of some detectors</span>
<span class="n">RE</span><span class="p">(</span><span class="n">count</span><span class="p">(</span><span class="n">dets</span><span class="p">))</span>
</pre></div>
</div>
<p>Notice that you can use multiple lists to enable easy task switching.
Instead of continually updating one global list like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># OLD ALTERNATIVE, NO LONGER SUPPORTED</span>

<span class="n">gs</span><span class="o">.</span><span class="n">DETS</span> <span class="o">=</span> <span class="c1"># some list of detectors</span>
<span class="n">RE</span><span class="p">(</span><span class="n">ct</span><span class="p">())</span>

<span class="n">gs</span><span class="o">.</span><span class="n">DETS</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">some_detector</span><span class="p">)</span>
<span class="n">gs</span><span class="o">.</span><span class="n">DETS</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">some_other_detector</span><span class="p">)</span>
<span class="n">RE</span><span class="p">(</span><span class="n">ct</span><span class="p">())</span>
</pre></div>
</div>
<p>you can define as many lists as you want and call them whatever you want.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d1</span> <span class="o">=</span> <span class="c1"># a list of some detectors</span>
<span class="n">d2</span> <span class="o">=</span> <span class="c1"># a list of different detectors</span>
<span class="n">RE</span><span class="p">(</span><span class="n">count</span><span class="p">(</span><span class="n">d1</span><span class="p">))</span>
<span class="n">RE</span><span class="p">(</span><span class="n">count</span><span class="p">(</span><span class="n">d2</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p>Automatic baseline readings, concurrent monitoring, and “flying”
can be set up uniformly for all plans.</p>
<p>Formerly, a list of devices to read at the beginning and the end of each
run (“baseline” readings), a list of signals to concurrent monitor, and
a list of “flyers” to run concurrently were configured like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># OLD ALTERNATIVE, NO LONGER SUPPORTED</span>

<span class="kn">from</span> <span class="nn">bluesky.spec_api</span> <span class="kn">import</span> <span class="n">ct</span>

<span class="n">gs</span><span class="o">.</span><span class="n">BASELINE_DEVICES</span> <span class="o">=</span> <span class="c1"># a list of devices to read at start and end</span>
<span class="n">gs</span><span class="o">.</span><span class="n">MONTIORS</span> <span class="o">=</span> <span class="c1"># a list of signals to monitor concurrently</span>
<span class="n">gs</span><span class="o">.</span><span class="n">FLYERS</span> <span class="o">=</span> <span class="c1"># a list of &quot;flyable&quot; devices</span>

<span class="n">gs</span><span class="o">.</span><span class="n">DETS</span> <span class="o">=</span> <span class="c1"># a list of detectors</span>

<span class="n">RE</span><span class="p">(</span><span class="n">ct</span><span class="p">())</span>  <span class="c1"># monitoring, flying, and baseline readings are added</span>
</pre></div>
</div>
<p>And formerly, those settings only affected the behavior of the “SPEC-like”
plans, such as <code class="docutils literal notranslate"><span class="pre">ct</span></code> and <code class="docutils literal notranslate"><span class="pre">ascan</span></code>. They were ignored by their
counterparts <code class="docutils literal notranslate"><span class="pre">count</span></code> and <code class="docutils literal notranslate"><span class="pre">scan</span></code>, as well as user-defined plans. This
was not desirable!</p>
<p>This scheme has been replaced by the
<a class="reference internal" href="plans.html#supplemental-data"><span class="std std-ref">supplemental data</span></a>, which can be
used to globally modify <em>all</em> plans, including user-defined ones.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bluesky.plans</span> <span class="kn">import</span> <span class="n">count</span>

<span class="c1"># one-time configuration</span>
<span class="kn">from</span> <span class="nn">bluesky</span> <span class="kn">import</span> <span class="n">SupplementalData</span>
<span class="n">sd</span> <span class="o">=</span> <span class="n">SupplementalData</span><span class="p">()</span>
<span class="n">RE</span><span class="o">.</span><span class="n">preprocessors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sd</span><span class="p">)</span>

<span class="c1"># interactive use</span>
<span class="n">sd</span><span class="o">.</span><span class="n">monitors</span> <span class="o">=</span> <span class="c1"># a list of signals to monitor concurrently</span>
<span class="n">sd</span><span class="o">.</span><span class="n">flyers</span> <span class="o">=</span> <span class="c1"># a list of &quot;flyable&quot; devices</span>
<span class="n">sd</span><span class="o">.</span><span class="n">baseline</span> <span class="o">=</span> <span class="c1"># a list of devices to read at start and end</span>

<span class="n">dets</span> <span class="o">=</span> <span class="c1"># a list of detectors</span>
<span class="n">RE</span><span class="p">(</span><span class="n">count</span><span class="p">(</span><span class="n">dets</span><span class="p">))</span>  <span class="c1"># monitoring, flying, and baseline readings are added</span>
</pre></div>
</div>
</li>
<li><p>Automatic live visualization and peak analysis can be set up uniformly for
all plans.</p>
<p>Formerly, the “SPEC-like” plans such as <code class="docutils literal notranslate"><span class="pre">ct</span></code> and <code class="docutils literal notranslate"><span class="pre">ascan</span></code> automatically
set up a suitable table and a plot, while their “standard” vanilla
counterparts, <a class="reference internal" href="generated/bluesky.plans.count.html#bluesky.plans.count" title="bluesky.plans.count"><code class="xref py py-func docutils literal notranslate"><span class="pre">bluesky.plans.count()</span></code></a> and <a class="reference internal" href="generated/bluesky.plans.scan.html#bluesky.plans.scan" title="bluesky.plans.scan"><code class="xref py py-func docutils literal notranslate"><span class="pre">bluesky.plans.scan()</span></code></a>
required explicit, detailed instructions to do so. Now, a best-effort
table and plot can be made for <em>all</em> plans, including user-defined ones,
by invoking this simple configuration:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bluesky.plans</span> <span class="kn">import</span> <span class="n">count</span>

<span class="c1"># one-time configuration</span>
<span class="kn">from</span> <span class="nn">bluesky.callbacks.best_effort</span> <span class="kn">import</span> <span class="n">BestEffortCallback</span>
<span class="n">bec</span> <span class="o">=</span> <span class="n">BestEffortCallback</span><span class="p">()</span>
<span class="n">RE</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">bec</span><span class="p">)</span>

<span class="c1"># interactive use</span>
<span class="n">dets</span> <span class="o">=</span> <span class="c1"># a list of detectors</span>
<span class="n">RE</span><span class="p">(</span><span class="n">count</span><span class="p">(</span><span class="n">dets</span><span class="p">),</span> <span class="n">num</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>  <span class="c1"># automatically prints table, shows plot</span>
</pre></div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">bec.disable()</span></code> and <code class="docutils literal notranslate"><span class="pre">bec.enable()</span></code> to temporarily toggle the
output off and on.</p>
</li>
<li><p>Peak anallysis, now computed automatically by the BestEffortCallback
above, can be viewed with a keyboard shortcut. The peak statistics,
formerly encapsulated in <code class="docutils literal notranslate"><span class="pre">gs.PS</span></code>, are now organized differently.</p>
<p>For each plot, simple peak-fitting is performed in the background. Of
course, it may or may not be applicable depending on your data, and it is
not shown by default. To view fitting annotations in a plot, click the
plot area and press Shift+P. (Lowercase p is a shortcut for
“panning” the plot.)</p>
<p>To access the peak-fit statistics programmatically, use <code class="docutils literal notranslate"><span class="pre">bec.peaks</span></code>. For
convenience, you may alias this like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">peaks</span> <span class="o">=</span> <span class="n">bec</span><span class="o">.</span><span class="n">peaks</span>
</pre></div>
</div>
<p>Inside <code class="docutils literal notranslate"><span class="pre">peaks</span></code>, access various statistics like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">peaks</span><span class="o">.</span><span class="n">com</span>
<span class="n">peaks</span><span class="o">.</span><span class="n">cen</span>
<span class="n">peaks</span><span class="o">.</span><span class="n">max</span>
<span class="n">peaks</span><span class="o">.</span><span class="n">min</span>
</pre></div>
</div>
<p>Each of these is a dictionary with an entry for each field that was fit.
For example, the ‘center of mass’ peak statistics for a field named
<code class="docutils literal notranslate"><span class="pre">'ccd_stats1_total'</span></code> would be accessed like
<code class="docutils literal notranslate"><span class="pre">peaks.com['ccd_stats1_total']</span></code>.</p>
</li>
</ol>
</li>
<li><p>The functions and classes in the module <code class="docutils literal notranslate"><span class="pre">bluesky.callbacks.broker</span></code> require
a instance of <code class="docutils literal notranslate"><span class="pre">Broker</span></code> to be passed in as an argument. They used to default
to the ‘singleton’ instance via <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">databroker</span> <span class="pre">import</span> <span class="pre">db</span></code>, which is now a
deprecated usage in databroker.</p></li>
<li><p>The plan preprocessors <code class="docutils literal notranslate"><span class="pre">configure_count_time_wrapper</span></code> and
<code class="docutils literal notranslate"><span class="pre">configure_count_time_decorator</span></code> were moved to <code class="docutils literal notranslate"><span class="pre">bluesky.plans</span></code> from
<code class="docutils literal notranslate"><span class="pre">bluesky.spec_api</span></code>, reverting a change made in v0.9.0.</p></li>
<li><p>The 0MQ pubsub integration classes <code class="docutils literal notranslate"><span class="pre">Publisher</span></code> and <code class="docutils literal notranslate"><span class="pre">RemoteDispatcher</span></code>
have been overhauled. They have been moved from
<code class="xref py py-mod docutils literal notranslate"><span class="pre">bluesky.callbacks.zmqpub</span></code> and <code class="xref py py-mod docutils literal notranslate"><span class="pre">bluesky.callbacks.zmqsub</span></code> to
<code class="xref py py-mod docutils literal notranslate"><span class="pre">bluesky.callbacks.zmq</span></code> and their signatures have been changed to match
similar utilities in the pydata ecosystem. See the Enhancements section for
more information.</p></li>
<li><p>The module <code class="docutils literal notranslate"><span class="pre">bluesky.qt_kicker</span></code> has been removed. Its former contents are
avaiable in <code class="docutils literal notranslate"><span class="pre">bluesky.utils</span></code>. The module was originally deprecated in April
2016, and it has been issuing warnings about this change since.</p></li>
<li><p>The plan <code class="docutils literal notranslate"><span class="pre">bluesky.plans.input</span></code> has been renamed
<code class="docutils literal notranslate"><span class="pre">bluesky.plans.input_plan</span></code> to avoid shadowing a builtin if the module is
bulk-imported. The plan was previously undocumented and rarely used, so the
impact of this change on users is expected to be small.</p></li>
</ul>
</div>
<div class="section" id="id29">
<h3>Deprecations<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The module <code class="xref py py-mod docutils literal notranslate"><span class="pre">bluesky.plan_tools</span></code> has been renamed
<code class="xref py py-mod docutils literal notranslate"><span class="pre">bluesky.simualtors</span></code>.  In the new module,
<code class="xref py py-func docutils literal notranslate"><span class="pre">bluesky.plan_tools.print_summary`()</span></code> has been renamed
<a class="reference internal" href="generated/bluesky.simulators.summarize_plan.html#bluesky.simulators.summarize_plan" title="bluesky.simulators.summarize_plan"><code class="xref py py-func docutils literal notranslate"><span class="pre">bluesky.simulators.summarize_plan()</span></code></a>.
The old names are supported in this release, with a warning, but will be
removed in a future release.</p></li>
<li><p>The Object-Orientated plans (<code class="docutils literal notranslate"><span class="pre">Count</span></code>, <code class="docutils literal notranslate"><span class="pre">Scan</span></code>, etc.) have been deprecated
and will be removed in a future release. Their documentation has been
removed.</p></li>
<li><p>The plan context managers (<code class="docutils literal notranslate"><span class="pre">run_context</span></code>, <code class="docutils literal notranslate"><span class="pre">stage_context</span></code>, etc.) have
been deprecated and will be removed in a future release. They were never
documented or widely used.</p></li>
<li><p>The method <code class="xref py py-meth docutils literal notranslate"><span class="pre">bluesky.Dispatcher.subscribe()</span></code> (which is encapsulated into
<code class="xref py py-class docutils literal notranslate"><span class="pre">bluesky.RunEngine</span></code> and inherited by
<a class="reference internal" href="callbacks.html#bluesky.callbacks.zmq.RemoteDispatcher" title="bluesky.callbacks.zmq.RemoteDispatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">bluesky.callbacks.zmq.RemoteDispatcher</span></code></a>) has a new signature. The
former signature was <code class="docutils literal notranslate"><span class="pre">subscribe(name,</span> <span class="pre">func)</span></code>. The new signature is
<code class="docutils literal notranslate"><span class="pre">subscribe(func,</span> <span class="pre">name='all')</span></code>. Because the meaning of the arguments is
unambigious (they must be a callable and a string, respectively) the old
order will be supported indefeinitely, with a warning.</p></li>
</ul>
</div>
<div class="section" id="id30">
<h3>Features<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>A <a class="reference internal" href="progress-bar.html"><span class="doc">progress bar</span></a> add-on is available.</p></li>
<li><dl class="simple">
<dt>As addressed above:</dt><dd><ul>
<li><p>The new <a class="reference internal" href="plans.html#supplemental-data"><span class="std std-ref">supplemental data</span></a> feature make it
easy to set up “baseline” readings and asynchronous acquisition in a way
that applies automatically to all plans.</p></li>
<li><p>The new <a class="reference internal" href="callbacks.html#best-effort-callback"><span class="std std-ref">best-effort callback</span></a> sets up
automatic terminal output and plots for all plans, including user-defined
ones.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">LivePlot</span></code> now accepts <code class="docutils literal notranslate"><span class="pre">x='time'</span></code>. It can set t=0 to the UNIX epoch or to
the start of the run. It also accepts <code class="docutils literal notranslate"><span class="pre">x='seq_num'</span></code>—a synonym for
<code class="docutils literal notranslate"><span class="pre">x=None</span></code>, which remains the default.</p></li>
<li><p>A new simulator <a class="reference internal" href="generated/bluesky.simulators.check_limits.html#bluesky.simulators.check_limits" title="bluesky.simulators.check_limits"><code class="xref py py-func docutils literal notranslate"><span class="pre">bluesky.simulators.check_limits()</span></code></a> verifies that a plan
will not try to move a movable device outside of its limits.</p></li>
<li><p>A new plan, <code class="xref py py-func docutils literal notranslate"><span class="pre">bluesky.plan.mvr()</span></code>, has been added as a relative counterpart
to <code class="xref py py-func docutils literal notranslate"><span class="pre">bluesky.plan.mv()</span></code>.</p></li>
<li><p>The 0MQ pubsub integration classes <code class="xref py py-class docutils literal notranslate"><span class="pre">bluesky.callbacks.zmq.Publisher`</span></code>
and <a class="reference internal" href="callbacks.html#bluesky.callbacks.zmq.RemoteDispatcher" title="bluesky.callbacks.zmq.RemoteDispatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">bluesky.callbacks.zmq.RemoteDispatcher</span></code></a> have been simplified.
A new class <a class="reference internal" href="callbacks.html#bluesky.callbacks.zmq.Proxy" title="bluesky.callbacks.zmq.Proxy"><code class="xref py py-class docutils literal notranslate"><span class="pre">bluesky.callbacks.zmq.Proxy</span></code></a> and command-line utility
<code class="docutils literal notranslate"><span class="pre">bluesky-0MQ-proxy</span></code> has been added to streamline configuration.</p></li>
<li><p>Metadata recorded by many built-in plans now includes a new item,
<code class="docutils literal notranslate"><span class="pre">'hints'</span></code>, which is used by the best-effort callback to produce useful
visualizations. Additionally, the built-in examples devices have
<a class="reference internal" href="callbacks.html#hints"><span class="std std-ref">a new hints attribute</span></a>. Its content may change or expand in
future releases as this new feature is explored.</p></li>
<li><p>Some <a class="reference internal" href="magics.html"><span class="doc">IPython magics</span></a> mimicing the SPEC API have been added.
These are experimental and may be altered or removed in the future.</p></li>
</ul>
</div>
<div class="section" id="id31">
<h3>Bug Fixes<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Using the “fake sleep” feature of simulated Movers (motors) caused them to
break.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> failed to declare that bluesky requires matplotlib.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-9-0-2017-05-08">
<h2>v0.9.0 (2017-05-08)<a class="headerlink" href="#v0-9-0-2017-05-08" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id32">
<h3>Breaking Changes<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Moved <code class="docutils literal notranslate"><span class="pre">configure_count_time_wrapper</span></code> and
<code class="docutils literal notranslate"><span class="pre">configure_count_time_decorator</span></code> to <code class="docutils literal notranslate"><span class="pre">bluesky.spec_api</span></code> from
<code class="docutils literal notranslate"><span class="pre">bluesky.plans</span></code>.</p></li>
<li><p>The metadata reported by step scans that used to be labeled <code class="docutils literal notranslate"><span class="pre">num_steps</span></code>
is now renamed <code class="docutils literal notranslate"><span class="pre">num_points</span></code>, generally considered a less ambiguous name.
Separately, <code class="docutils literal notranslate"><span class="pre">num_interals</span></code> (which one might mistakenly assume is what was
meant by <code class="docutils literal notranslate"><span class="pre">num_steps</span></code>) is also stored.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-8-0-2017-01-03">
<h2>v0.8.0 (2017-01-03)<a class="headerlink" href="#v0-8-0-2017-01-03" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id33">
<h3>Features<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>If some plan or callback has hung the RunEngine and blocked its normal
ability to respond to Ctrl+C by pausing, it is not possible to trigger a
“halt” (emergency stop) by hammering Ctrl+C more than ten times.</p></li>
</ul>
</div>
<div class="section" id="id34">
<h3>Bug Fixes<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fix bug where failed or canceled movements could cause future executions of
the RunEngine to error.</p></li>
<li><p>Fix bug in <code class="docutils literal notranslate"><span class="pre">plan_mutator</span></code> so that it properly handles return values. One
effect of this fix is that <code class="docutils literal notranslate"><span class="pre">baseline_wrapper</span></code> properly passed run uids
through.</p></li>
<li><p>Fix bug in <code class="docutils literal notranslate"><span class="pre">LiveFit</span></code> that broke multivariate fits.</p></li>
<li><p>Minor fixes to example detectors.</p></li>
</ul>
</div>
<div class="section" id="id35">
<h3>Breaking Changes<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>A <code class="docutils literal notranslate"><span class="pre">KeyboardInterrupt</span></code> exception captured during a run used to cause the
RunEngine to pause. Now it halts instead.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-7-0-2016-11-01">
<h2>v0.7.0 (2016-11-01)<a class="headerlink" href="#v0-7-0-2016-11-01" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id36">
<h3>Features<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Nonlinear least-squares minimization callback <code class="docutils literal notranslate"><span class="pre">LiveFit</span></code> with
<code class="docutils literal notranslate"><span class="pre">LiveFitPlot</span></code></p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">RunEngine.clear_suspenders()</span></code> convenience method.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">RunEngine.preprocessors</span></code> list that modifies all plans passed to the
RunEngine.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">RunEngine.state_hook</span></code> to monitor state changes, akin to <code class="docutils literal notranslate"><span class="pre">msg_hook</span></code>.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">pause_for_debug</span></code> options to <code class="docutils literal notranslate"><span class="pre">finalize_wrapper</span></code> which allows pauses
the RunEngine before performing any cleanup, making it easier to debug.</p></li>
<li><p>Added many more examples and make it easier to create simulated devices that
generate interesting simulated data. They have an interface closer to the
real devices implemented in ophyd.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">mv</span></code>, a convenient plan for moving multiple devices in parallel.</p></li>
<li><p>Added optional <code class="docutils literal notranslate"><span class="pre">RunEngine.max_depth</span></code> to raise an error if the RunEngine
thinks it is being called from inside a function.</p></li>
</ul>
</div>
<div class="section" id="id37">
<h3>Bug Fixes<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The ‘monitor’ functionality was completely broken, packing configuration
into the wrong structure and starting seq_num from 0 instead of 1, which is
the (regrettable) standard we have settled on.</p></li>
<li><p>The RunEngine coroutines no longer mutate the messages they receive.</p></li>
<li><p>Fix race condition in <code class="docutils literal notranslate"><span class="pre">post_run</span></code> callback.</p></li>
<li><p>Fix bugs in several callbacks that caused them not to work on saved documents
from the databroker. Also, make them call <code class="docutils literal notranslate"><span class="pre">super()</span></code> to play better with
multiple inheritance in user code.</p></li>
</ul>
</div>
<div class="section" id="id38">
<h3>Breaking Changes<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The flag <code class="docutils literal notranslate"><span class="pre">RunEngine.ignore_callback_exceptions</span></code> now defaults to False.</p></li>
<li><p>The plan <code class="docutils literal notranslate"><span class="pre">complete</span></code>, related to fly scans, previously had <code class="docutils literal notranslate"><span class="pre">wait=True</span></code> by
default, although its documentation indicated that <code class="docutils literal notranslate"><span class="pre">False</span></code> was the default.
The code has been changed to match the documentation. Any calls to
<code class="docutils literal notranslate"><span class="pre">complete</span></code> that are expected to be blocking should be updated with the
keyword <code class="docutils literal notranslate"><span class="pre">wait=True</span></code>.</p></li>
<li><p>Completely change the API of <code class="docutils literal notranslate"><span class="pre">Reader</span></code> and <code class="docutils literal notranslate"><span class="pre">Mover</span></code>, the classes for
definding simulated devices.</p></li>
<li><p>The bluesky interface now expects the <code class="docutils literal notranslate"><span class="pre">stop</span></code> method on a device to accept
an optional <code class="docutils literal notranslate"><span class="pre">success</span></code> argument.</p></li>
<li><p>The optional, undocumented <code class="docutils literal notranslate"><span class="pre">fig</span></code> argument to <code class="docutils literal notranslate"><span class="pre">LivePlot</span></code> has been
deprecated and will be removed in a future release.  An <code class="docutils literal notranslate"><span class="pre">ax</span></code> argument has
been added. Additionally, the axes used by <code class="docutils literal notranslate"><span class="pre">LiveGrid</span></code> and <code class="docutils literal notranslate"><span class="pre">LiveScatter</span></code> is
configurable through a new, optional <code class="docutils literal notranslate"><span class="pre">ax</span></code> argument.</p></li>
<li><p>The “shortcut” where mashing Ctrl+C three times quickly ran <code class="docutils literal notranslate"><span class="pre">RE.abort()</span></code>
has been removed.</p></li>
<li><p>Change the default stream name for monitors to <code class="docutils literal notranslate"><span class="pre">&lt;signal_name&gt;_monitor</span></code> from
<code class="docutils literal notranslate"><span class="pre">signal_name&gt;-monitor</span></code> (underscore vs. dash). The impact of this change is
minimal because, as noted above, the monitor functionality was completely
broken in previous releases.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-6-4-2016-09-07">
<h2>v0.6.4 (2016-09-07)<a class="headerlink" href="#v0-6-4-2016-09-07" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id39">
<h3>Features<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Much-expanded and overhauled documentation.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">aspect</span></code> argument to <code class="docutils literal notranslate"><span class="pre">LiveGrid</span></code>.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">install_nb_kicker</span></code> to get live-updating matplotlib figures in the
notebook while the RunEngine is running.</p></li>
<li><p>Simulated hardware devices <code class="docutils literal notranslate"><span class="pre">Reader</span></code> and <code class="docutils literal notranslate"><span class="pre">Mover</span></code> can be easily customized
to mock a wider range of behaviors, for testing and demos.</p></li>
<li><p>Integrate the SPEC API with mew global state attribute <code class="docutils literal notranslate"><span class="pre">gs.MONITORS</span></code>.</p></li>
<li><p>Callbacks that use the databroker accept an optional <code class="docutils literal notranslate"><span class="pre">Broker</span></code> instance
as an argument.</p></li>
</ul>
</div>
<div class="section" id="id40">
<h3>Bug Fixes<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Minor fix in the tilt computation for spiral scans.</p></li>
<li><p>Expost ‘tilt’ option through SPEC-like API</p></li>
<li><p>The “infinite count” (<code class="docutils literal notranslate"><span class="pre">ct</span></code> with <code class="docutils literal notranslate"><span class="pre">num=None</span></code>) should spawn a LivePlot.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">finalize_decorator</span></code> accepts a callable (e.g., generator function)
and does not accept an iterable (e.g., generator instance)</p></li>
<li><p>Restore <code class="docutils literal notranslate"><span class="pre">gs.FLYERS</span></code> integration to the SPEC API (accidentally removed).</p></li>
</ul>
</div>
<div class="section" id="id41">
<h3>Breaking Changes<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The API for the simulated hardware example devices <code class="docutils literal notranslate"><span class="pre">Reader</span></code> and <code class="docutils literal notranslate"><span class="pre">Mover</span></code>
has been changed to make them more general.</p></li>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">register_mds</span></code> metadatastore integration.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-6-3-2016-08-16">
<h2>v0.6.3 (2016-08-16)<a class="headerlink" href="#v0-6-3-2016-08-16" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id42">
<h3>Features<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Change how “subscription factories” are handled, making them configurable
through global state.</p></li>
<li><p>Make PeakStats configurable through global state.</p></li>
<li><p>Add an experimental utility for passing documents over a network and
processing them on a separate process or host, using 0MQ.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">monitor_during_wrapper</span></code> and corresponding decorator.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">stage_wrapper</span></code> and corresponding decorator.</p></li>
<li><p>Built-in plans return the run uid that they generated.</p></li>
<li><p>Add a new <code class="docutils literal notranslate"><span class="pre">ramp_plan</span></code> for taking data while polling the status of a
movement.</p></li>
</ul>
</div>
<div class="section" id="id43">
<h3>Bug Fixes<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Boost performance by removing unneeded “sleep” step in message processing.</p></li>
<li><p>Fix bug related to rewinding in preparation for resuming.</p></li>
</ul>
</div>
<div class="section" id="id44">
<h3>Breaking Changes<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Remove the <code class="docutils literal notranslate"><span class="pre">planify</span></code> decorator and the plan context managers. These were
experimental and ultimately proved problematic because they make it difficult
to pass through return values cleanly.</p></li>
<li><p>Remove “lossy” subscriptions feature, rendered unnecessary by the utility for
processing documents in separate processes (see Enhancements, above).</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-6-2-2016-07-26">
<h2>v0.6.2 (2016-07-26)<a class="headerlink" href="#v0-6-2-2016-07-26" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id45">
<h3>Bug Fixes<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Make <code class="docutils literal notranslate"><span class="pre">make_decorator</span></code> return proper decorators. The original implementation
returned functions that could not actually be used as decorators.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-6-1-2016-07-25">
<h2>v0.6.1 (2016-07-25)<a class="headerlink" href="#v0-6-1-2016-07-25" title="Permalink to this headline">¶</a></h2>
<p>This release contained only a minor UX fix involving more informative error
reporting related to Area Detector plugin port configuration.</p>
</div>
<div class="section" id="v0-6-0-2016-07-25">
<h2>v0.6.0 (2016-07-25)<a class="headerlink" href="#v0-6-0-2016-07-25" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id46">
<h3>Features<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Address the situation where plan “rewinding” after a pause or suspension
interacted badly with some devices. There are now three ways to temporarily
turn off rewinding: a Msg with a new ‘rewindable’ command; a special
attribute on the device that the <code class="docutils literal notranslate"><span class="pre">trigger_and_read</span></code> plan looks for;
and a special exception that devices can raise when their <code class="docutils literal notranslate"><span class="pre">pause</span></code> method
is called. All three of these features should be considered experimental.
They will likely be consolidated in the future once their usage is tested
in the wild.</p></li>
<li><p>Add new plan wrappers and decorators: <code class="docutils literal notranslate"><span class="pre">inject_md_wrapper</span></code>, <code class="docutils literal notranslate"><span class="pre">run_wrapper</span></code>,
<code class="docutils literal notranslate"><span class="pre">rewindable_wrapper</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id47">
<h3>Bug Fixes<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fix bug where RunEngine was put in the “running” state, encountered an
error before starting the <code class="docutils literal notranslate"><span class="pre">_run</span></code> coroutine, and thus never switch back to
“idle.”</p></li>
<li><p>Ensure that plans are closed correctly and that, if they fail to close
themselves, a warning is printed.</p></li>
<li><p>Allow plan to run its cleanup messages (<code class="docutils literal notranslate"><span class="pre">finalize</span></code>) when the RunEngine is
stopped or aborted.</p></li>
<li><p>When an exception is raised, give each plan in the plan stack an opportunity
to handle it. If it is handled, carry on.</p></li>
<li><p>The SPEC-style <code class="docutils literal notranslate"><span class="pre">tw</span></code> was not passing its parameters through to the
underlying <code class="docutils literal notranslate"><span class="pre">tweak</span></code> plan.</p></li>
<li><p>Silenced un-needed suspenders warnings</p></li>
<li><p>Fix bug in separating devices</p></li>
</ul>
</div>
<div class="section" id="id48">
<h3>Internal Changes<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Reduce unneeded usage of <code class="docutils literal notranslate"><span class="pre">bluesky.plans.single_gen</span></code>.</p></li>
<li><p>Don’t emit create/save messages with no reads in between.</p></li>
<li><p>Re-work exception handling in main run engine event loop.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-5-3-2016-06-06">
<h2>v0.5.3 (2016-06-06)<a class="headerlink" href="#v0-5-3-2016-06-06" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id49">
<h3>Breaking Changes<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LiveTable</span></code> only displays data from one event stream.</p></li>
<li><p>Remove used global state attribute <code class="docutils literal notranslate"><span class="pre">gs.COUNT_TIME</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id50">
<h3>Bug Fixes<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fix “infinite count”, <code class="docutils literal notranslate"><span class="pre">ct(num=None)</span></code>.</p></li>
<li><p>Allow the same data keys to be present in different event streams. But, as
before, a given data key can only appear once per event.</p></li>
<li><p>Make SPEC-style plan <code class="docutils literal notranslate"><span class="pre">ct</span></code> implement baseline readings, referring to
<code class="docutils literal notranslate"><span class="pre">gs.BASELINE_DETS</span></code>.</p></li>
<li><p>Upon resuming after a deferred pause, clear the deferred pause request.</p></li>
<li><p>Make <code class="docutils literal notranslate"><span class="pre">bluesky.utils.register_transform</span></code> character configurable.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-5-2-2016-05-25">
<h2>v0.5.2 (2016-05-25)<a class="headerlink" href="#v0-5-2-2016-05-25" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id51">
<h3>Features<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Plans were reimplemented as simple Python generators instead of custom Python
classes. The old “object-oriented” plans are maintained for
back-compatibility. See plans documentation to review new capabilities.</p></li>
</ul>
</div>
<div class="section" id="id52">
<h3>Breaking Changes<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>SPEC-style plans are now proper generators, not bound to the RunEngine.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-5-0-2016-05-11">
<h2>v0.5.0 (2016-05-11)<a class="headerlink" href="#v0-5-0-2016-05-11" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id53">
<h3>Breaking Changes<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Move <code class="docutils literal notranslate"><span class="pre">bluesky.scientific_callbacks</span></code> to <code class="docutils literal notranslate"><span class="pre">bluesky.callbacks.scientific</span></code>
and <code class="docutils literal notranslate"><span class="pre">bluesky.broker_callbacks</span></code> to <code class="docutils literal notranslate"><span class="pre">bluesky.callbacks.broker</span></code>.</p></li>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">bluesky.register_mds</span></code> whose usage can be replaced by:
<code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">metadatastore.commands;</span> <span class="pre">RE.subscribe_lossless('all',</span> <span class="pre">metadatastore.commands.insert)</span></code></p></li>
<li><p>In all occurrences, the argument <code class="docutils literal notranslate"><span class="pre">block_group</span></code> has been renamed <code class="docutils literal notranslate"><span class="pre">group</span></code>
for consistency. This affects the ‘trigger’ and ‘set’ messages.</p></li>
<li><p>The (not widely used) <code class="docutils literal notranslate"><span class="pre">Center</span></code> plan has been removed. It may be
distributed separately in the future.</p></li>
<li><p>Calling a “SPEC-like” plan now returns a generator that must be passed
to the RunEngine; it does not execute the plan with the global RunEngine in
gs.RE. There is a convenience wrapper available to restore the old behavior
as desired. But since that usage renders the plans un-composable, it is
discouraged.</p></li>
<li><p>The ‘time’ argument of the SPEC-like plans is a keyword-only argument.</p></li>
<li><p>The following special-case SPEC-like scans have been removed</p>
<blockquote>
<div><ul class="simple">
<li><p>hscan</p></li>
<li><p>kscan</p></li>
<li><p>lscan</p></li>
<li><p>tscan</p></li>
<li><p>dtscan</p></li>
<li><p>hklscan</p></li>
<li><p>hklmesh</p></li>
</ul>
</div></blockquote>
<p>They can be defined in configuration files as desired, and in that location
they will be easier to customize.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">describe</span></code> method on flyers, which returns an iterable of dicts of
data keys for one or more descriptors documents, has been renamed to
<code class="docutils literal notranslate"><span class="pre">describe_collect</span></code> to avoid confusion with <code class="docutils literal notranslate"><span class="pre">describe</span></code> on other devices,
which returns a dict of data keys for one descriptor document.</p></li>
<li><p>An obscure feature in <code class="docutils literal notranslate"><span class="pre">RunEngine.request_pause</span></code> has been removed, which
involved removing the optional arguments <code class="docutils literal notranslate"><span class="pre">callback</span></code> and <code class="docutils literal notranslate"><span class="pre">name</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-4-3-2016-03-03">
<h2>v0.4.3 (2016-03-03)<a class="headerlink" href="#v0-4-3-2016-03-03" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id54">
<h3>Bug Fixes<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Address serious performance problem in <code class="docutils literal notranslate"><span class="pre">LiveTable</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-4-2-2016-03-02">
<h2>v0.4.2 (2016-03-02)<a class="headerlink" href="#v0-4-2-2016-03-02" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id55">
<h3>Breaking Changes<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Stage the ultimate parent (“root”) when a device is staging its child, making
it impossible to leave a device in a partially-staged state.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-4-1-2016-02-29">
<h2>v0.4.1 (2016-02-29)<a class="headerlink" href="#v0-4-1-2016-02-29" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id56">
<h3>Features<a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Give every event stream a <code class="docutils literal notranslate"><span class="pre">name</span></code>, using <code class="docutils literal notranslate"><span class="pre">'primary'</span></code> by default.</p></li>
<li><p>Record a mapping of device/signal names to ordered data keys in the
EventDescriptor.</p></li>
<li><p>Let <code class="docutils literal notranslate"><span class="pre">LiveRaster</span></code> account for “snaked” trajectories.</p></li>
</ul>
</div>
<div class="section" id="id57">
<h3>Bug Fixes<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PeakStats.com</span></code> is a scalar, not a single-element array.</p></li>
<li><p>Restore Python 3.4 compatibility.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-4-0-2016-02-23">
<h2>v0.4.0 (2016-02-23)<a class="headerlink" href="#v0-4-0-2016-02-23" title="Permalink to this headline">¶</a></h2>
<p>(TO DO)</p>
</div>
<div class="section" id="v0-3-2-2015-10-28">
<h2>v0.3.2 (2015-10-28)<a class="headerlink" href="#v0-3-2-2015-10-28" title="Permalink to this headline">¶</a></h2>
<p>(TO DO)</p>
</div>
<div class="section" id="v0-3-1-2015-10-15">
<h2>v0.3.1 (2015-10-15)<a class="headerlink" href="#v0-3-1-2015-10-15" title="Permalink to this headline">¶</a></h2>
<p>(TO DO)</p>
</div>
<div class="section" id="v0-3-0-2015-10-14">
<h2>v0.3.0 (2015-10-14)<a class="headerlink" href="#v0-3-0-2015-10-14" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id58">
<h3>Breaking Changes<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Removed <code class="docutils literal notranslate"><span class="pre">RunEngine.persistent_fields</span></code>; all fields in <code class="docutils literal notranslate"><span class="pre">RE.md</span></code> persist
between runs by default.</p></li>
<li><p>No metadata fields are “reserved”; any can be overwritten by the user.</p></li>
<li><p>No metadata fields are absolutely required. The metadata validation function
is user-customizable. The default validation function behaves the same
as previous versions of bluesky, but it is no longer manditory.</p></li>
<li><p>The signature of <code class="docutils literal notranslate"><span class="pre">RunEngine</span></code> has changed. The <code class="docutils literal notranslate"><span class="pre">logbook</span></code> argument is now
keyword-only, and there is a new keyword-only argument, <code class="docutils literal notranslate"><span class="pre">md_validator</span></code>.
See docstring for details.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">configure</span></code> method on readable objects now takes a single optional
argument, a dictionary that the object can use to configure itself however
it sees fit. The <code class="docutils literal notranslate"><span class="pre">configure</span></code> method always has a new return value, a tuple
of dicts describing its old and new states:
<code class="docutils literal notranslate"><span class="pre">old,</span> <span class="pre">new</span> <span class="pre">=</span> <span class="pre">obj.configure(state)</span></code></p></li>
<li><p>Removed method <code class="docutils literal notranslate"><span class="pre">increment_scan_id</span></code></p></li>
<li><p><cite>callbacks.broker.post_run</cite> API and docstring brought into agreement.
The API is change to expect a callable with signature
<code class="docutils literal notranslate"><span class="pre">foo(doc_name,</span> <span class="pre">doc)</span></code> rather than</p>
<blockquote>
<div><ul class="simple">
<li><p>a callable which takes a document (as documented)</p></li>
<li><p>an object with <code class="docutils literal notranslate"><span class="pre">start</span></code>, <code class="docutils literal notranslate"><span class="pre">descriptor</span></code>, <code class="docutils literal notranslate"><span class="pre">event</span></code> and <code class="docutils literal notranslate"><span class="pre">stop</span></code>
methods (as implemented).</p></li>
</ul>
</div></blockquote>
<p>If classes derived from <code class="docutils literal notranslate"><span class="pre">CallbackBase</span></code> are being used this will not
not have any effect on user code.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="v0-2-3-2015-09-29">
<h2>v0.2.3 (2015-09-29)<a class="headerlink" href="#v0-2-3-2015-09-29" title="Permalink to this headline">¶</a></h2>
<p>(TO DO)</p>
</div>
<div class="section" id="v0-2-2-2015-09-24">
<h2>v0.2.2 (2015-09-24)<a class="headerlink" href="#v0-2-2-2015-09-24" title="Permalink to this headline">¶</a></h2>
<p>(TO DO)</p>
</div>
<div class="section" id="v0-2-1-2015-09-24">
<h2>v0.2.1 (2015-09-24)<a class="headerlink" href="#v0-2-1-2015-09-24" title="Permalink to this headline">¶</a></h2>
<p>(TO DO)</p>
</div>
<div class="section" id="v0-2-0-2015-09-22">
<h2>v0.2.0 (2015-09-22)<a class="headerlink" href="#v0-2-0-2015-09-22" title="Permalink to this headline">¶</a></h2>
<p>(TO DO)</p>
</div>
<div class="section" id="v0-1-0-2015-06-25">
<h2>v0.1.0 (2015-06-25)<a class="headerlink" href="#v0-1-0-2015-06-25" title="Permalink to this headline">¶</a></h2>
<p>Initial release</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="run_engine.html" class="btn btn-neutral float-left" title="The RunEngine run loop" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Brookhaven National Lab

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>