


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>databroker.Broker.__call__ &mdash; databroker 0.13.0.post9+gaef9fbc documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="databroker.Broker.__getitem__" href="databroker.Broker.__getitem__.html" />
    <link rel="prev" title="databroker.Broker.event_sources_by_name" href="databroker.Broker.event_sources_by_name.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> databroker
          

          
          </a>

          
            
            
              <div class="version">
                0.13.0.post9+gaef9fbc
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../api.html#the-broker-object">The Broker object</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="databroker.Broker.html">databroker.Broker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api.html#making-a-broker">Making a Broker</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../api.html#searching">Searching</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">databroker.Broker.__call__</a></li>
<li class="toctree-l4"><a class="reference internal" href="databroker.Broker.__getitem__.html">databroker.Broker.__getitem__</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api.html#loading-data">Loading Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api.html#saving-data">Saving Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api.html#configuring-filters-and-aliases">Configuring Filters and Aliases</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api.html#export-data-to-another-broker">Export Data to Another Broker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api.html#advanced-controlling-the-return-type">Advanced: Controlling the Return Type</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#the-header-object">The Header object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#configuration-utilities">Configuration Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#internals">Internals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#deprecated">Deprecated</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../assets.html">Assets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating.html">Creating a New Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="../archiver.html">Connection with Archiver Appliance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whats_new.html">Release History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DBEP/index.html">Databroker Enhancement Proposals</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">databroker</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../api.html">API Documentation</a> &raquo;</li>
        
      <li>databroker.Broker.__call__</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/generated/databroker.Broker.__call__.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="databroker-broker-call">
<h1>databroker.Broker.__call__<a class="headerlink" href="#databroker-broker-call" title="Permalink to this headline">¶</a></h1>
<dl class="method">
<dt id="databroker.Broker.__call__">
<code class="sig-prename descclassname">Broker.</code><code class="sig-name descname">__call__</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">text_search=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#databroker.Broker.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Search runs based on metadata.</p>
<p>This function returns an iterable of <a class="reference internal" href="databroker.Header.html#databroker.Header" title="databroker.Header"><code class="xref py py-class docutils literal notranslate"><span class="pre">Header</span></code></a> objects. Each
Header encapsulates the metadata for a run – start time, instruments
used, and so on, and provides methods for loading the data. In
addition to the Parameters below, advanced users can specify arbitrary
queries using the MongoDB query syntax.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">since</span></code> and <code class="docutils literal notranslate"><span class="pre">until</span></code> parameters accepts the following
representations of time:</p>
<ul class="simple">
<li><p>timestamps like <code class="docutils literal notranslate"><span class="pre">time.time()</span></code> and <code class="docutils literal notranslate"><span class="pre">datetime.datetime.now()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'2015'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'2015-01'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'2015-01-30'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'2015-03-30</span> <span class="pre">03:00:00'</span></code></p></li>
</ul>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>text_search</strong><span class="classifier">str, optional</span></dt><dd><p>search full text of RunStart documents</p>
</dd>
<dt><strong>since: str, optional</strong></dt><dd><p>Restrict results to runs that started after this time.</p>
</dd>
<dt><strong>until</strong><span class="classifier">str, optional</span></dt><dd><p>Restrict results to runs that started before this time.</p>
</dd>
<dt><strong>data_key</strong><span class="classifier">str, optional</span></dt><dd><p>Restrict results to runs that contained this data_key (a.k.a field)
such as ‘intensity’ or ‘temperature’.</p>
</dd>
<dt><strong>**kwargs</strong></dt><dd><p>query parameters</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt><strong>data</strong><span class="classifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></span></dt><dd><p>Iterable object encapsulating a results set of Headers</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Search by plan name.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="p">(</span><span class="n">plan_name</span><span class="o">=</span><span class="s1">&#39;scan&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Search for runs involving a motor with the name ‘eta’.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="p">(</span><span class="n">motor</span><span class="o">=</span><span class="s1">&#39;eta&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Search for runs operated by a given user—assuming this metadata was
recorded in the first place!</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="p">(</span><span class="n">operator</span><span class="o">=</span><span class="s1">&#39;Dan&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Search by time range. (These keywords have a special meaning.)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="p">(</span><span class="n">since</span><span class="o">=</span><span class="s1">&#39;2015-03-05&#39;</span><span class="p">,</span> <span class="n">until</span><span class="o">=</span><span class="s1">&#39;2015-03-10&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Perform text search on all values in the Run Start document.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="p">(</span><span class="s1">&#39;keyword&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that partial words are not matched, but partial phrases are. For
example, ‘good’ will match to ‘good sample’ but ‘goo’ will not.</p>
<p>Richer logic that simple ‘key=value’ searches are supported by the
Mongo query syntax.</p>
<p>Match all headers that include metadata for the key ‘sample’,
regardless of what its value is.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="p">(</span><span class="n">sample</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;$exists&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
</pre></div>
</div>
<p>Match all headers where the value of ‘plan_name’ is NOT
‘relative_scan’.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="p">(</span><span class="n">plan_name</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;$ne&#39;</span><span class="p">:</span> <span class="s1">&#39;relative_scan&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p>Read the
<a class="reference external" href="http://docs.mongodb.org/manual/tutorial/query-documents/">MongoDB query documentation</a> for more.</p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="databroker.Broker.__getitem__.html" class="btn btn-neutral float-right" title="databroker.Broker.__getitem__" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="databroker.Broker.event_sources_by_name.html" class="btn btn-neutral float-left" title="databroker.Broker.event_sources_by_name" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015 Brookhaven National Lab

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>