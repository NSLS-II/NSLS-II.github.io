


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Release History &mdash; databroker 1.0.3.post21+gfe80064 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Databroker Enhancement Proposals" href="DBEP/index.html" />
    <link rel="prev" title="Connection with Archiver Appliance" href="v1/archiver.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> databroker
          

          
          </a>

          
            
            
              <div class="version">
                1.0.3.post21+gfe80064
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="data-access-overview.html">Data Access Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Technical Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2/index.html">Version 2 Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1/index.html">Version 1 Interface</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Release History</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#v1-0-3-2020-05-12">v1.0.3 (2020-05-12)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#added">Added</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-0-2-2020-04-07">v1.0.2 (2020-04-07)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#fixed">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-0-1-2020-04-03">v1.0.1 (2020-04-03)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#changed">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v1-0-0-2020-03-13">v1.0.0 (2020-03-13)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-13-3-2019-08-21">v0.13.3 (2019-08-21)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#enhancements">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#documentation">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#packaging">Packaging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-13-2-2019-07-30">v0.13.2 (2019-07-30)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#bug-fixes">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">Packaging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-13-1-2019-07-30">v0.13.1 (2019-07-30)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id4">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-13-0-2019-06-06">v0.13.0 (2019-06-06)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#api-changes">API Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-12-2-2019-03-11">v0.12.2 (2019-03-11)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id5">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-12-1-2019-01-25">v0.12.1 (2019-01-25)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id7">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-12-0-2019-01-03">v0.12.0 (2019-01-03)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#enhancements-api-changes">Enhancements/API changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-11-3-2018-09-05">v0.11.3 (2018-09-05)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id9">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-11-2-2018-06-19">v0.11.2 (2018-06-19)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id10">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-11-1-2018-05-19">v0.11.1 (2018-05-19)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id11">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-11-0-2018-05-14">v0.11.0 (2018-05-14)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id12">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id13">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-10-0-2018-02-20">v0.10.0 (2018-02-20)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id14">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deprecations">Deprecations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id15">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-9-4-2017-12-06">v0.9.4 (2017-12-06)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id16">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id17">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-9-3-2017-09-13">v0.9.3 (2017-09-13)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id18">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-9-2-2017-09-11">v0.9.2 (2017-09-11)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id19">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-9-1-2017-09-06">v0.9.1 (2017-09-06)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id20">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-9-0-2017-08-22">v0.9.0 (2017-08-22)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id21">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#user-facing-api-changes">User-facing API Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id22">Deprecations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#internal-api-changes">Internal API Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-8-4-2017-05-24">v0.8.4 (2017-05-24)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-8-3-2017-05-23">v0.8.3 (2017-05-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-8-2-2017-05-22">v0.8.2 (2017-05-22)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-8-1-2017-05-22">v0.8.1 (2017-05-22)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-8-0">v0.8.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id23">API Changes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#databroker-core"><code class="docutils literal notranslate"><span class="pre">databroker.core</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#header"><code class="docutils literal notranslate"><span class="pre">Header</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#header-from-run-start"><code class="docutils literal notranslate"><span class="pre">Header.from_run_start</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#changes-to-functions-in-databroker-core">Changes to functions in <code class="docutils literal notranslate"><span class="pre">databroker.core</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#break-up-internal-structure-of-databroker">Break up internal structure of databroker</a></li>
<li class="toctree-l4"><a class="reference internal" href="#top-level-insert">Top level insert</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-7-0-2016-12-21">v0.7.0 (2016-12-21)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id24">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id25">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-6-2-2016-09-28">v0.6.2 (2016-09-28)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-6-1-2016-09-23">v0.6.1 (2016-09-23)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id26">Enhancements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-6-0-2016-09-07">v0.6.0 (2016-09-07)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id27">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id28">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id29">API Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-5-0-2016-07-25">v0.5.0 (2016-07-25)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id30">API Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id31">Enhancements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-4-1-2016-05-09">v0.4.1 (2016-05-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-4-0-2016-05-02">v0.4.0 (2016-05-02)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-3-3-2016-02-26">v0.3.3 (2016-02-26)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-3-2-2016-02-23">v0.3.2 (2016-02-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-3-1-2016-02-04">v0.3.1 (2016-02-04)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-3-1-2015-09-29">v0.3.1 (2015-09-29)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataportal-v0-2-2">dataportal v0.2.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id32">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dataportal-v0-2-1">dataportal v0.2.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id33">API Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dataportal-v0-2-0-2015-09-15">dataportal v0.2.0 (2015-09-15)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id34">API Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dataportal-v0-0-6">Dataportal v0.0.6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id35">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id36">API Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id37">Bug Fixes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="DBEP/index.html">Databroker Enhancement Proposals</a></li>
</ul>
<p class="caption"><span class="caption-text">Bluesky Project</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://blueskyproject.io">Homepage</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/bluesky">GitHub</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Help</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://gitter.im/NSLS-II/DAMA">Gitter</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">databroker</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Release History</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/whats_new.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="release-history">
<span id="whats-new"></span><h1>Release History<a class="headerlink" href="#release-history" title="Permalink to this headline">¶</a></h1>
<p>A catalog of new features, improvements, and bug-fixes in each release. Follow
links to the relevant GitHub issue or pull request for specific code changes
and any related discussion.</p>
<div class="section" id="v1-0-3-2020-05-12">
<h2>v1.0.3 (2020-05-12)<a class="headerlink" href="#v1-0-3-2020-05-12" title="Permalink to this headline">¶</a></h2>
<div class="section" id="added">
<h3>Added<a class="headerlink" href="#added" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added SingleRunCache which collects the documents from a single run, and when
complete, provides a BlueskyRun.</p></li>
</ul>
</div>
</div>
<div class="section" id="v1-0-2-2020-04-07">
<h2>v1.0.2 (2020-04-07)<a class="headerlink" href="#v1-0-2-2020-04-07" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fixed">
<h3>Fixed<a class="headerlink" href="#fixed" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>databroker now supports mongo backends with authentication.</p></li>
</ul>
</div>
</div>
<div class="section" id="v1-0-1-2020-04-03">
<h2>v1.0.1 (2020-04-03)<a class="headerlink" href="#v1-0-1-2020-04-03" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>Added<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>When a <a class="reference internal" href="v2/developer/reference.html#databroker.v2.Broker" title="databroker.v2.Broker"><code class="xref py py-class docutils literal notranslate"><span class="pre">Broker</span></code></a> is constructed from a YAML
configuration file, the <code class="docutils literal notranslate"><span class="pre">root_map</span></code> values may be given as <em>relative</em> paths
interpreted relative to the location of that configuration file.</p></li>
</ul>
</div>
<div class="section" id="changed">
<h3>Changed<a class="headerlink" href="#changed" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The minimum version of the dependency <code class="docutils literal notranslate"><span class="pre">intake</span></code> has been increased to
<code class="docutils literal notranslate"><span class="pre">v0.5.5</span></code> and various internal changes have been made to adjust for changes
in <code class="docutils literal notranslate"><span class="pre">intake</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id2">
<h3>Fixed<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The object <code class="xref py py-class docutils literal notranslate"><span class="pre">LazyMap</span></code> object now support pickling.</p></li>
<li><p>The query <code class="xref py py-class docutils literal notranslate"><span class="pre">TimeRange</span></code> now properly propagates its
<code class="docutils literal notranslate"><span class="pre">timezone</span></code> parameter through <code class="xref py py-meth docutils literal notranslate"><span class="pre">replace()</span></code>.</p></li>
<li><p>If installation with <code class="docutils literal notranslate"><span class="pre">python2</span></code> is attempted, a helpful error message is
shown.</p></li>
</ul>
</div>
</div>
<div class="section" id="v1-0-0-2020-03-13">
<h2>v1.0.0 (2020-03-13)<a class="headerlink" href="#v1-0-0-2020-03-13" title="Permalink to this headline">¶</a></h2>
<p>This release amounts to a full rewrite of databroker. See
<a class="reference internal" href="overview.html#transition-plan"><span class="std std-ref">Transition Plan</span></a> for details.</p>
<p>See the
<a class="reference external" href="https://github.com/bluesky/databroker/milestone/11?closed=1">v1.0.0 GitHub milestone</a>
for a full enumeration of the changes in this release.</p>
</div>
<div class="section" id="v0-13-3-2019-08-21">
<h2>v0.13.3 (2019-08-21)<a class="headerlink" href="#v0-13-3-2019-08-21" title="Permalink to this headline">¶</a></h2>
<div class="section" id="enhancements">
<h3>Enhancements<a class="headerlink" href="#enhancements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Replaced deprecated unordered bulk write (requires <code class="docutils literal notranslate"><span class="pre">pymongo</span> <span class="pre">&gt;=</span> <span class="pre">3.0</span></code>).</p></li>
</ul>
</div>
<div class="section" id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Update the links in the sidebar to point to the Bluesky Project.</p></li>
</ul>
</div>
<div class="section" id="packaging">
<h3>Packaging<a class="headerlink" href="#packaging" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added missing files in the source distribution for PyPI.</p></li>
</ul>
<p>See
<a class="reference external" href="https://github.com/bluesky/databroker/milestone/10?closed=1">the v0.13.3 GitHub milestone</a>
for a full enumeration of the changes in this release.</p>
</div>
</div>
<div class="section" id="v0-13-2-2019-07-30">
<h2>v0.13.2 (2019-07-30)<a class="headerlink" href="#v0-13-2-2019-07-30" title="Permalink to this headline">¶</a></h2>
<div class="section" id="bug-fixes">
<h3>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Support round trip of databroker configs, reporting the config, module and
class.</p></li>
</ul>
</div>
<div class="section" id="id3">
<h3>Packaging<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Removed vestigial dependency on <code class="docutils literal notranslate"><span class="pre">dask</span></code>, which is no longer used.</p></li>
</ul>
<p>See
<a class="reference external" href="https://github.com/bluesky/databroker/milestone/9?closed=1">the v0.13.2 GitHub milestone</a>
for a full enumeration of the changes in this release.</p>
</div>
</div>
<div class="section" id="v0-13-1-2019-07-30">
<h2>v0.13.1 (2019-07-30)<a class="headerlink" href="#v0-13-1-2019-07-30" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id4">
<h3>Bug Fixes<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Make sqlite-backed assets registry threadsafe, for compatibility with bluesky
1.6.0.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-13-0-2019-06-06">
<h2>v0.13.0 (2019-06-06)<a class="headerlink" href="#v0-13-0-2019-06-06" title="Permalink to this headline">¶</a></h2>
<div class="section" id="api-changes">
<h3>API Changes<a class="headerlink" href="#api-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Drop support for Python 2</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-12-2-2019-03-11">
<h2>v0.12.2 (2019-03-11)<a class="headerlink" href="#v0-12-2-2019-03-11" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id5">
<h3>Bug Fixes<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Support round trip of resource</p></li>
</ul>
</div>
<div class="section" id="id6">
<h3>Documentation<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fix typos in the tutorial</p></li>
<li><p>Update installing sentinel code example</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-12-1-2019-01-25">
<h2>v0.12.1 (2019-01-25)<a class="headerlink" href="#v0-12-1-2019-01-25" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id7">
<h3>Bug Fixes<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed a bug in EventSourceShim.docs_given_header when filtering the
fields.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-12-0-2019-01-03">
<h2>v0.12.0 (2019-01-03)<a class="headerlink" href="#v0-12-0-2019-01-03" title="Permalink to this headline">¶</a></h2>
<div class="section" id="enhancements-api-changes">
<h3>Enhancements/API changes<a class="headerlink" href="#enhancements-api-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="generated/databroker.Header.documents.html#databroker.Header.documents" title="databroker.Header.documents"><code class="xref py py-meth docutils literal notranslate"><span class="pre">documents()</span></code></a> now yields any Resource and Datum
documents referenced by Event documents.</p></li>
<li><p><a class="reference internal" href="generated/databroker.Header.documents.html#databroker.Header.documents" title="databroker.Header.documents"><code class="xref py py-meth docutils literal notranslate"><span class="pre">documents()</span></code></a> now yields documents in strict time
order which may interlace Events from different streams.  Previously documents
were yielded in time order by descriptor.</p></li>
<li><p>Added <code class="xref py py-attr docutils literal notranslate"><span class="pre">event_sources_by_name</span></code> property to
<code class="xref py py-class docutils literal notranslate"><span class="pre">BrokerES</span></code> class</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">event_sources</span></code> kwarg to <a class="reference internal" href="generated/databroker.Broker.html#databroker.Broker" title="databroker.Broker"><code class="xref py py-class docutils literal notranslate"><span class="pre">Broker</span></code></a> class</p></li>
<li><p>Replaced <code class="docutils literal notranslate"><span class="pre">url</span></code>, <code class="docutils literal notranslate"><span class="pre">timezone</span></code> and <code class="docutils literal notranslate"><span class="pre">pvs</span></code> kwargs in
<code class="xref py py-class docutils literal notranslate"><span class="pre">ArchiverEventSource</span></code> class with a <code class="docutils literal notranslate"><span class="pre">config</span></code> dictionary
kwarg and updated other methods to use this.</p></li>
<li><p>Added <code class="xref py py-attr docutils literal notranslate"><span class="pre">name</span></code> and
<code class="xref py py-attr docutils literal notranslate"><span class="pre">pvs</span></code> attributes to
<code class="xref py py-class docutils literal notranslate"><span class="pre">ArchiverEventSource</span></code> class and updated other methods to
use these.</p></li>
<li><p>Added <code class="xref py py-meth docutils literal notranslate"><span class="pre">tables_given_times()</span></code> method to
<code class="xref py py-class docutils literal notranslate"><span class="pre">ArchiverEventSource</span></code> class.</p></li>
<li><p>Added <code class="xref py py-attr docutils literal notranslate"><span class="pre">name</span></code> property to
<code class="xref py py-class docutils literal notranslate"><span class="pre">EventSourceShim</span></code> class</p></li>
</ul>
</div>
<div class="section" id="id8">
<h3>Bug Fixes<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed an issue in the tutorial where importing databroker was forgotten.</p></li>
<li><p>The docstring for the <code class="xref py py-class docutils literal notranslate"><span class="pre">RegistryTemplate</span></code> class has been
fixed.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-11-3-2018-09-05">
<h2>v0.11.3 (2018-09-05)<a class="headerlink" href="#v0-11-3-2018-09-05" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id9">
<h3>Bug Fixes<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Removes an assumption that Descriptors have a ‘name’ field.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-11-2-2018-06-19">
<h2>v0.11.2 (2018-06-19)<a class="headerlink" href="#v0-11-2-2018-06-19" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id10">
<h3>Bug Fixes<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed a number of typos in the documentation</p></li>
<li><p>Fixed  rendering issue of the README.md file on PyPI.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-11-1-2018-05-19">
<h2>v0.11.1 (2018-05-19)<a class="headerlink" href="#v0-11-1-2018-05-19" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id11">
<h3>Bug Fixes<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed limitation whereby sqlite backend could not be used by multiple
threads. One important problem with limitation is that it broke the ability
to insert documents generated by “monitoring” in bluesky.</p></li>
<li><p>Removed accidental call to <code class="docutils literal notranslate"><span class="pre">print</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-11-0-2018-05-14">
<h2>v0.11.0 (2018-05-14)<a class="headerlink" href="#v0-11-0-2018-05-14" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id12">
<h3>Enhancements<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Broker objects now have a <code class="docutils literal notranslate"><span class="pre">db.name</span></code> attribute which is the name passed into
<code class="docutils literal notranslate"><span class="pre">Broker.named</span></code> or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p>Header objects now an <code class="docutils literal notranslate"><span class="pre">ext</span></code> attribute, containing a <code class="docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>. By
default, it is empty. It is intended to be used to pull metadata from
external data sources, such as sample metadata, comments or tags, or proposal
information. To register a datasource, add an item to the dictionary
<code class="docutils literal notranslate"><span class="pre">Broker.external_fetchers</span></code>. The value, which should be a callable, will be
passed two arguments, the RunStart document and RunStop document, and the
result will be added to <code class="docutils literal notranslate"><span class="pre">ext</span></code> using the key. The callable is expected to
handle all special cases (errors, etc.) internally and return <code class="docutils literal notranslate"><span class="pre">None</span></code> if it
has nothing to add.</p></li>
<li><p>Accept Resource and Datum documents via the generic <code class="docutils literal notranslate"><span class="pre">insert</span></code> method. To
facilitate the “asset refactor” transition in bluesky and ophyd, ignore
duplicate attempts to insert a document with the same <code class="docutils literal notranslate"><span class="pre">uid</span></code>. (This is
controllable by a new flag <code class="docutils literal notranslate"><span class="pre">ignore_duplicate_error</span></code> on the Registry insert
methods.)</p></li>
</ul>
</div>
<div class="section" id="id13">
<h3>Bug Fixes<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">Header.fields()</span></code> method wrongly ignored its <code class="docutils literal notranslate"><span class="pre">stream_name</span></code> argument.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-10-0-2018-02-20">
<h2>v0.10.0 (2018-02-20)<a class="headerlink" href="#v0-10-0-2018-02-20" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id14">
<h3>Enhancements<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Add special name <code class="docutils literal notranslate"><span class="pre">Broker.named('temp')</span></code> which creates new, temporary
storage each time it is called. This is convenient for testing and teaching.</p></li>
</ul>
</div>
<div class="section" id="deprecations">
<h3>Deprecations<a class="headerlink" href="#deprecations" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The <a class="reference internal" href="generated/databroker.Broker.__call__.html#databroker.Broker.__call__" title="databroker.Broker.__call__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Broker.__call__()</span></code></a> method for searching headers by metadata accepted
special keyword arguments, <code class="docutils literal notranslate"><span class="pre">start_time</span></code> and/or <code class="docutils literal notranslate"><span class="pre">end_time</span></code>, which filtered
results by RunStart time. These names proved to be confusing, so they have
been renamed <code class="docutils literal notranslate"><span class="pre">since</span></code> and <code class="docutils literal notranslate"><span class="pre">until</span></code> (terminology inspired by <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code>).
The original names still work, but warn if used.</p></li>
</ul>
</div>
<div class="section" id="id15">
<h3>Bug Fixes<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The mongoquery backend returned identical references (i.e. the same
dictionary) on subsequent queries, meaning that mutations could propagate
across results sets.</p></li>
<li><p>Ensure there is only one definition of a <code class="docutils literal notranslate"><span class="pre">DuplicateHandler</span></code> exception.</p></li>
<li><p>Remove invalid keyword argument from <code class="docutils literal notranslate"><span class="pre">get_images</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-9-4-2017-12-06">
<h2>v0.9.4 (2017-12-06)<a class="headerlink" href="#v0-9-4-2017-12-06" title="Permalink to this headline">¶</a></h2>
<p>This release contains bug fixes and experimental new features.</p>
<div class="section" id="id16">
<h3>Enhancements<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Add experimental integration with glue.</p></li>
<li><p>The HDF5 handlers have been refactored, and a new HDF5 handler returning dask
objects has been added.</p></li>
</ul>
</div>
<div class="section" id="id17">
<h3>Bug Fixes<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Rendering the HTML repr (<code class="docutils literal notranslate"><span class="pre">_repr_html_</span></code>) of a Header produced an unnecesary
warning.</p></li>
<li><p>Headers without a stop document wrongly produced an error and could not be
created. This was a regression.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-9-3-2017-09-13">
<h2>v0.9.3 (2017-09-13)<a class="headerlink" href="#v0-9-3-2017-09-13" title="Permalink to this headline">¶</a></h2>
<p>This release contains one bug fix for a feature that was new in v0.9.0.</p>
<div class="section" id="id18">
<h3>Bug Fixes<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Properly implement “filling” of external data in the case of multiple event
streams with different data keys. This case generated a <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> in
v0.9.2.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-9-2-2017-09-11">
<h2>v0.9.2 (2017-09-11)<a class="headerlink" href="#v0-9-2-2017-09-11" title="Permalink to this headline">¶</a></h2>
<p>This release contains one bug fix for a feature that was new in v0.9.0.</p>
<div class="section" id="id19">
<h3>Bug Fixes<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Allow handlers to be registered via a configuration file. This feature was
intended to be added in v0.9.0, but it was broken and unusable.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-9-1-2017-09-06">
<h2>v0.9.1 (2017-09-06)<a class="headerlink" href="#v0-9-1-2017-09-06" title="Permalink to this headline">¶</a></h2>
<p>This is release contains small but important bug fixes. It is recommended that
all users upgrade from v0.9.0.</p>
<div class="section" id="id20">
<h3>Bug Fixes<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Respect the <code class="docutils literal notranslate"><span class="pre">fill</span></code> kwargs in <a class="reference internal" href="generated/databroker.Header.table.html#databroker.Header.table" title="databroker.Header.table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Header.table()</span></code></a> and
<a class="reference internal" href="generated/databroker.Broker.get_table.html#databroker.Broker.get_table" title="databroker.Broker.get_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Broker.get_table()</span></code></a>. In v0.9.0, a regression was introduced that always
set it to <code class="docutils literal notranslate"><span class="pre">True</span></code> regardless of the user input.</p></li>
<li><p>Omit the special value <code class="docutils literal notranslate"><span class="pre">'_legacy_config'</span></code> from the results returned by
<a class="reference internal" href="generated/databroker.list_configs.html#databroker.list_configs" title="databroker.list_configs"><code class="xref py py-func docutils literal notranslate"><span class="pre">list_configs()</span></code></a> because it should a (private) synonym for one of the
other values.</p></li>
<li><p>Make document retrieval lazy (as it was intended to be) by removing an
internal call to <code class="docutils literal notranslate"><span class="pre">check_fields_exist</span></code>.</p></li>
<li><p>Do not attempt to fill external data that has already been filled.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-9-0-2017-08-22">
<h2>v0.9.0 (2017-08-22)<a class="headerlink" href="#v0-9-0-2017-08-22" title="Permalink to this headline">¶</a></h2>
<div class="section" id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h3>
<p>This is a major update to databroker.</p>
<ul class="simple">
<li><p>The packages metadatastore, filestore, portable-mds, portable-fs,
metadataservice, and metadataclient have all been merged into databroker
itself. The individual packages have been deprecated; all future development
will occur in databroker.</p></li>
<li><p>In response to feedback, new convenience functions and methods have been
added.</p></li>
<li><p>The configuration management has been completely overhauled.</p></li>
</ul>
</div>
<div class="section" id="id21">
<h3>Enhancements<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<p>See the new <a class="reference internal" href="v1/tutorial.html"><span class="doc">Tutorial</span></a> and the <a class="reference internal" href="v1/api.html"><span class="doc">API Documentation</span></a>.</p>
</div>
<div class="section" id="user-facing-api-changes">
<h3>User-facing API Changes<a class="headerlink" href="#user-facing-api-changes" title="Permalink to this headline">¶</a></h3>
<p>The following changes may break old user code.</p>
<ul>
<li><p>DataBroker used to rely indirectly on configuration files located at:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/etc/metadatastore.yml</span></code> or <code class="docutils literal notranslate"><span class="pre">~/.config/metadatastore/connection.yml</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/etc/filestore.yml</span></code> or <code class="docutils literal notranslate"><span class="pre">~/.config/filestore/connection.yml</span></code></p></li>
</ul>
</div></blockquote>
<p>These configuration files are now <strong>completely ignored</strong>. Users must adopt
the <a class="reference internal" href="v1/configuration.html"><span class="doc">new configuration system</span></a>.</p>
</li>
<li><p>The order of parameters to these methods has been rearranged to be mutally
consistent.</p>
<ul class="simple">
<li><p><a class="reference internal" href="generated/databroker.Broker.get_events.html#databroker.Broker.get_events" title="databroker.Broker.get_events"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Broker.get_events()</span></code></a></p></li>
<li><p><a class="reference internal" href="generated/databroker.Broker.get_table.html#databroker.Broker.get_table" title="databroker.Broker.get_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Broker.get_table()</span></code></a></p></li>
<li><p><a class="reference internal" href="generated/databroker.Broker.get_documents.html#databroker.Broker.get_documents" title="databroker.Broker.get_documents"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Broker.get_documents()</span></code></a></p></li>
<li><p><a class="reference internal" href="generated/databroker.Header.table.html#databroker.Header.table" title="databroker.Header.table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Header.table()</span></code></a></p></li>
<li><p><a class="reference internal" href="generated/databroker.Header.documents.html#databroker.Header.documents" title="databroker.Header.documents"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Header.documents()</span></code></a></p></li>
</ul>
<p>We judge that the short-term pain of updating some user code now is less
than the long-term pain of asking everyone to keep mental track of random,
inconsistent parameter orderings forever.</p>
</li>
<li><p>The option <code class="docutils literal notranslate"><span class="pre">handler_override</span></code>, which overrode handlers by field name,
has been removed from all methods and functions that formerly supported it.
Use the option <code class="docutils literal notranslate"><span class="pre">handler_registry</span></code> instead, which overrides handlers by
handler spec name—a less complex, less error-prone operation.</p></li>
<li><p>The method <a class="reference internal" href="generated/databroker.Header.events.html#databroker.Header.events" title="databroker.Header.events"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Header.events()</span></code></a> defaults to returning only events from the
‘primary’ stream, not all events.</p></li>
<li><p>Documents refer to other documents by a uid. In past versions of databroker
they were dereferenced. That is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Assume run_start, run_stop, descriptor, and event are documents.</span>

<span class="c1"># True for databroker version &lt; 0.9.0:</span>
<span class="n">event</span><span class="p">[</span><span class="s1">&#39;descriptor&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">descriptor</span>
<span class="n">descriptor</span><span class="p">[</span><span class="s1">&#39;run_start&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">run_start</span>
<span class="n">run_stop</span><span class="p">[</span><span class="s1">&#39;run_start&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">run_start</span>

<span class="c1"># True for databroker version 0.9.0:</span>
<span class="n">event</span><span class="p">[</span><span class="s1">&#39;descriptor&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">descriptor</span><span class="p">[</span><span class="s1">&#39;uid&#39;</span><span class="p">]</span>
<span class="n">descriptor</span><span class="p">[</span><span class="s1">&#39;run_start&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">run_start</span><span class="p">[</span><span class="s1">&#39;uid&#39;</span><span class="p">]</span>
<span class="n">run_stop</span><span class="p">[</span><span class="s1">&#39;run_start&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">run_start</span><span class="p">[</span><span class="s1">&#39;uid&#39;</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>The type of db.filters changed from list to dict.</p></li>
</ul>
</div>
<div class="section" id="id22">
<h3>Deprecations<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
<p>The following changes to <em>recommended</em> usage may produce warnings in user code,
but it will not break user code in this release. It may break user code in a
future release, so the warnings should be heeded during this cycle if possible.</p>
<ul>
<li><p>The following usages are deprecated and will stop being supported in a future
release:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># THIS USAGE IS DEPRECATED</span>

<span class="kn">from</span> <span class="nn">databroker</span> <span class="kn">import</span> <span class="n">db</span>
<span class="c1"># or, equivalently:</span>
<span class="kn">from</span> <span class="nn">databroker</span> <span class="kn">import</span> <span class="n">DataBroker</span>
</pre></div>
</div>
<p>Instead, do:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">databroker</span> <span class="kn">import</span> <span class="n">Broker</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">Broker</span><span class="p">(</span><span class="s1">&#39;example&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">example</span></code> is the name of some configuration. This new approach makes
it possible to connect to multiple Brokers in the same process.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">db1</span> <span class="o">=</span> <span class="n">Broker</span><span class="p">(</span><span class="s1">&#39;laptop&#39;</span><span class="p">)</span>
<span class="n">db2</span> <span class="o">=</span> <span class="n">Broker</span><span class="p">(</span><span class="s1">&#39;beamline&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This is useful for transferring data, among other things.</p>
<p>Likewise, the top-level functions for fetching data are deprecated and will
be removed in a future release:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># THIS USAGE IS DEPRECATED</span>

<span class="kn">from</span> <span class="nn">databroker</span> <span class="kn">import</span> <span class="n">db</span><span class="p">,</span> <span class="n">get_table</span><span class="p">,</span> <span class="n">get_events</span><span class="p">,</span> <span class="n">get_images</span>

<span class="n">h</span> <span class="o">=</span> <span class="n">db</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">get_table</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
</pre></div>
</div>
<p>See the new <a class="reference internal" href="v1/tutorial.html"><span class="doc">Tutorial</span></a> for the recommended usage. The short version is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">databroker</span> <span class="kn">import</span> <span class="n">Broker</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">Broker</span><span class="o">.</span><span class="n">named</span><span class="p">(</span><span class="s1">&#39;example&#39;</span><span class="p">)</span>

<span class="n">h</span> <span class="o">=</span> <span class="n">db</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">h</span><span class="o">.</span><span class="n">table</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p>The method <a class="reference internal" href="generated/databroker.Broker.get_images.html#databroker.Broker.get_images" title="databroker.Broker.get_images"><code class="xref py py-class docutils literal notranslate"><span class="pre">Broker.get_images</span></code></a> and the class <code class="docutils literal notranslate"><span class="pre">Images</span></code> are deprecated
and may be removed in a future release.
See <a class="reference external" href="https://github.com/NSLS-II/databroker/issues/232">issue</a> for the
motivating discussion. Use the new method <a class="reference internal" href="generated/databroker.Header.data.html#databroker.Header.data" title="databroker.Header.data"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Header.data()</span></code></a>, as illustrated
in the <a class="reference internal" href="v1/tutorial.html"><span class="doc">Tutorial</span></a>.</p></li>
<li><p>Databroker uses a custom dictionary subclass that supports dot access like
<code class="docutils literal notranslate"><span class="pre">event.data</span></code> as a synonym for item lookup like <code class="docutils literal notranslate"><span class="pre">event['data']</span></code>. Employing
a custom dictionary subclass has downsides, including performance and
complexity. We are <em>considering</em> defaulting to plain dictionaries in a future
release, which would break any user code that relies on dot access. To
prepare for this possible change, the usage <code class="docutils literal notranslate"><span class="pre">event.data</span></code> now produces a
warning advising users to switch to <code class="docutils literal notranslate"><span class="pre">event['data']</span></code>. More detail is
available in the section <a class="reference internal" href="v1/api.html#controlling-return-type"><span class="std std-ref">Advanced: Controlling the Return Type</span></a>.</p></li>
<li><p>The method <a class="reference internal" href="generated/databroker.Header.stream.html#databroker.Header.stream" title="databroker.Header.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Header.stream()</span></code></a> has been renamed <a class="reference internal" href="generated/databroker.Header.documents.html#databroker.Header.documents" title="databroker.Header.documents"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Header.documents()</span></code></a>.
The old name issues a warning in this release; it will be removed in a future
one.</p></li>
<li><p>The modules <code class="docutils literal notranslate"><span class="pre">databroker.broker</span></code> and <code class="docutils literal notranslate"><span class="pre">databroker.core</span></code> have been combined,
and all public members are importable from just <code class="docutils literal notranslate"><span class="pre">databroker</span></code>. The old
modules will be maintained as shims to avoid breaking user code.</p></li>
</ul>
</div>
<div class="section" id="internal-api-changes">
<h3>Internal API Changes<a class="headerlink" href="#internal-api-changes" title="Permalink to this headline">¶</a></h3>
<p>The following API changes affect the libraries that have been merged into
databroker in this release (metadatastore, filestore, portable-mds,
portable-fs, metadataclient, metadataservice). <strong>These changes are internal to
databroker and will only affect advanced users.</strong></p>
<ul class="simple">
<li><p>All <code class="docutils literal notranslate"><span class="pre">FileStore</span></code> classes have been renamed to <code class="docutils literal notranslate"><span class="pre">Registry</span></code>.</p></li>
<li><p>The method <code class="docutils literal notranslate"><span class="pre">change_root</span></code>, which is implemented on various <code class="docutils literal notranslate"><span class="pre">Registry</span></code>
classes, has been renamed to <code class="docutils literal notranslate"><span class="pre">move_files</span></code>.</p></li>
<li><p>The method <code class="docutils literal notranslate"><span class="pre">get_datum</span></code> on <code class="docutils literal notranslate"><span class="pre">Registry</span></code> classes is fully removed. Use
<code class="docutils literal notranslate"><span class="pre">retrieve</span></code> instead.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">version</span></code> keyword argument has been removed from all <code class="docutils literal notranslate"><span class="pre">Registry</span></code>
classes and <code class="docutils literal notranslate"><span class="pre">MDS</span></code> classes. It is now part of the <code class="docutils literal notranslate"><span class="pre">config</span></code> dictionary.</p></li>
<li><p>A script for launching the “metadataservice” server has been moved to a CLI
named <code class="docutils literal notranslate"><span class="pre">start_md_server</span></code>.</p></li>
<li><p>The “writers” formerly in filestore now require a <code class="docutils literal notranslate"><span class="pre">Registry</span></code> as an
argument.</p></li>
<li><p>The modules <code class="docutils literal notranslate"><span class="pre">filestore.commands</span></code> and <code class="docutils literal notranslate"><span class="pre">filestore.api</span></code> have been removed.
Same for <code class="docutils literal notranslate"><span class="pre">metadatastore.commands</span></code> and <code class="docutils literal notranslate"><span class="pre">metadatastore.api</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Registry.correct_root</span></code> supports uids as args, verify is now optional and
defaults to False, arg <code class="docutils literal notranslate"><span class="pre">resource`</span> <span class="pre">is</span> <span class="pre">now</span> <span class="pre">``resource_or_uid</span></code></p></li>
</ul>
</div>
</div>
<div class="section" id="v0-8-4-2017-05-24">
<h2>v0.8.4 (2017-05-24)<a class="headerlink" href="#v0-8-4-2017-05-24" title="Permalink to this headline">¶</a></h2>
<p>(TO DO)</p>
</div>
<div class="section" id="v0-8-3-2017-05-23">
<h2>v0.8.3 (2017-05-23)<a class="headerlink" href="#v0-8-3-2017-05-23" title="Permalink to this headline">¶</a></h2>
<p>(TO DO)</p>
</div>
<div class="section" id="v0-8-2-2017-05-22">
<h2>v0.8.2 (2017-05-22)<a class="headerlink" href="#v0-8-2-2017-05-22" title="Permalink to this headline">¶</a></h2>
<p>(TO DO)</p>
</div>
<div class="section" id="v0-8-1-2017-05-22">
<h2>v0.8.1 (2017-05-22)<a class="headerlink" href="#v0-8-1-2017-05-22" title="Permalink to this headline">¶</a></h2>
<p>(TO DO)</p>
</div>
<div class="section" id="v0-8-0">
<h2>v0.8.0<a class="headerlink" href="#v0-8-0" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id23">
<h3>API Changes<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<div class="section" id="databroker-core">
<h4><code class="docutils literal notranslate"><span class="pre">databroker.core</span></code><a class="headerlink" href="#databroker-core" title="Permalink to this headline">¶</a></h4>
<p>This module is semi-private</p>
<ul class="simple">
<li><p>Removed <code class="docutils literal notranslate"><span class="pre">process</span></code>, <code class="docutils literal notranslate"><span class="pre">stream</span></code>, and <code class="docutils literal notranslate"><span class="pre">restream</span></code> as top-level
functions.  The implementation now lives in
<cite>databroker.broker.BrokerES</cite>.  These functions knew too much about the
internals of the databroker to remain as separate functions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Broker.__call__</span></code> returns an iterable <code class="docutils literal notranslate"><span class="pre">Results</span></code> object, akin to a
generator, instead of a list. This means that queries with large results sets
return quickly. Iterating through the Headers in the result set is up to the
caller.</p></li>
</ul>
</div>
<div class="section" id="header">
<h4><code class="docutils literal notranslate"><span class="pre">Header</span></code><a class="headerlink" href="#header" title="Permalink to this headline">¶</a></h4>
<p>Change <code class="docutils literal notranslate"><span class="pre">Header`</span> <span class="pre">from</span> <span class="pre">a</span> <span class="pre">``doct.Document</span></code> subclass to a <code class="docutils literal notranslate"><span class="pre">attr</span></code> based
class.  A majority of the API has been maintained, however there are
changes in what exceptions are raised when trying to mutate the
instance.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 32%" />
<col style="width: 48%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Old Exception</p></th>
<th class="head"><p>New Exception</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">h.pop</span></code></p></td>
<td><p><cite>doc.DocumentIsReadOnly</cite></p></td>
<td><p><cite>AttributeError</cite></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">h.update</span></code></p></td>
<td><p><cite>doc.DocumentIsReadOnly</cite></p></td>
<td><p><cite>AttributeError</cite></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">del</span> <span class="pre">h.x</span></code></p></td>
<td><p><cite>doc.DocumentIsReadOnly</cite></p></td>
<td><p><cite>attr.exceptions.FrozenInstanceError</cite></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">del</span> <span class="pre">h['x']</span></code></p></td>
<td><p><cite>doc.DocumentIsReadOnly</cite></p></td>
<td><p><cite>TypeError</cite></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">h.x</span> <span class="pre">=</span> <span class="pre">V</span></code></p></td>
<td><p><cite>doc.DocumentIsReadOnly</cite></p></td>
<td><p><cite>attr.exceptions.FrozenInstanceError</cite></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">h['x']</span> <span class="pre">*</span> <span class="pre">V</span></code></p></td>
<td><p><cite>doc.DocumentIsReadOnly</cite></p></td>
<td><p><cite>TypeError</cite></p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="header-from-run-start">
<h4><code class="docutils literal notranslate"><span class="pre">Header.from_run_start</span></code><a class="headerlink" href="#header-from-run-start" title="Permalink to this headline">¶</a></h4>
<p>Take a <a class="reference internal" href="generated/databroker.Broker.html#databroker.Broker" title="databroker.Broker"><code class="xref py py-class docutils literal notranslate"><span class="pre">Broker</span></code></a> object instead of a <code class="docutils literal notranslate"><span class="pre">MetadataStore</span></code> object.  This
is now tacked on the <a class="reference internal" href="generated/databroker.Header.html#databroker.Header" title="databroker.Header"><code class="xref py py-class docutils literal notranslate"><span class="pre">Header</span></code></a> object.</p>
</div>
<div class="section" id="changes-to-functions-in-databroker-core">
<h4>Changes to functions in <code class="docutils literal notranslate"><span class="pre">databroker.core</span></code><a class="headerlink" href="#changes-to-functions-in-databroker-core" title="Permalink to this headline">¶</a></h4>
<p>Explicitly passed mds/fs have been removed, instead relying on the
DataBroker instance included in the header.</p>
</div>
<div class="section" id="break-up-internal-structure-of-databroker">
<h4>Break up internal structure of databroker<a class="headerlink" href="#break-up-internal-structure-of-databroker" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>The core functions that touch events have a new required argument, <code class="docutils literal notranslate"><span class="pre">es</span></code>.
This does not affect the API of the <code class="docutils literal notranslate"><span class="pre">Broker</span></code> object, only the functions in
the <code class="docutils literal notranslate"><span class="pre">core</span></code> module.</p></li>
</ul>
</div>
<div class="section" id="top-level-insert">
<h4>Top level insert<a class="headerlink" href="#top-level-insert" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="generated/databroker.Broker.html#databroker.Broker" title="databroker.Broker"><code class="xref py py-class docutils literal notranslate"><span class="pre">Broker</span></code></a> now has an <code class="docutils literal notranslate"><span class="pre">insert</span></code> method, use this over <code class="docutils literal notranslate"><span class="pre">db.mds.insert</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="v0-7-0-2016-12-21">
<h2>v0.7.0 (2016-12-21)<a class="headerlink" href="#v0-7-0-2016-12-21" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id24">
<h3>Enhancements<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Add convenience method for exporting from one Broker instance into another.</p></li>
<li><p>Experimental: support regex-based field selection in Broker methods.</p></li>
</ul>
</div>
<div class="section" id="id25">
<h3>Bug Fixes<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fix handling of timezones. To summarize: all times are <em>stored</em> as a float
number that is a UNIX timestamp (number of seconds since 1970 in Greenwich).
The <code class="docutils literal notranslate"><span class="pre">get_events</span></code> method simply returns this raw number. The <code class="docutils literal notranslate"><span class="pre">get_table</span></code>
method provides the option (on by default) to convert these float numbers to
datetime objects, which can be more convenient in some circumstances. There
are two flags for controlling this feature: <code class="docutils literal notranslate"><span class="pre">convert_times</span></code> and
<code class="docutils literal notranslate"><span class="pre">localize_times</span></code>. By default, <code class="docutils literal notranslate"><span class="pre">convert_times=True</span></code> and
<code class="docutils literal notranslate"><span class="pre">localize_times=True</span></code>. This returns pandas datetime64 objects that are
“naive” (meaning they don’t have a timezone attached) and are in the local
time. This tells you the wall clock time when the experiment was performed in
timezone configured in <code class="docutils literal notranslate"><span class="pre">db.mds.config['timezone']</span></code>. If
<code class="docutils literal notranslate"><span class="pre">localize_times=False</span></code>, the datetime objects are again “naive” but in UTC
time. This tells you the wall clock time of a clock in Greenwich when the
experiment was performed.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-6-2-2016-09-28">
<h2>v0.6.2 (2016-09-28)<a class="headerlink" href="#v0-6-2-2016-09-28" title="Permalink to this headline">¶</a></h2>
<p>(TO DO)</p>
</div>
<div class="section" id="v0-6-1-2016-09-23">
<h2>v0.6.1 (2016-09-23)<a class="headerlink" href="#v0-6-1-2016-09-23" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id26">
<h3>Enhancements<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Remove hard dependency on metadatastore and filestore packages so that
other providers of metadatastore and filestore interface may be used instead.</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-6-0-2016-09-07">
<h2>v0.6.0 (2016-09-07)<a class="headerlink" href="#v0-6-0-2016-09-07" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id27">
<h3>Bug Fixes<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h3>
<p>Make <code class="docutils literal notranslate"><span class="pre">get_table</span></code> properly respect its <code class="docutils literal notranslate"><span class="pre">stream_name</span></code> argument. (Previously
any value but default returned an empty result.)</p>
</div>
<div class="section" id="id28">
<h3>Enhancements<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Allow <code class="docutils literal notranslate"><span class="pre">Broker</span></code> to be imported without configuration present.</p></li>
<li><p>Add stateful “filters” to restrict searches.</p></li>
<li><p>Add aliases to save searches during a session.</p></li>
<li><p>Overhaul documents and tests.</p></li>
</ul>
</div>
<div class="section" id="id29">
<h3>API Changes<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The default value of <code class="docutils literal notranslate"><span class="pre">stream_name</span></code> in <code class="docutils literal notranslate"><span class="pre">get_events</span></code> is now <code class="docutils literal notranslate"><span class="pre">ALL</span></code>, a
sentinel value. (The default for <code class="docutils literal notranslate"><span class="pre">get_table</span></code> is still <code class="docutils literal notranslate"><span class="pre">'primary'</span></code>, but it
now also accepts <code class="docutils literal notranslate"><span class="pre">ALL</span></code>.)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-5-0-2016-07-25">
<h2>v0.5.0 (2016-07-25)<a class="headerlink" href="#v0-5-0-2016-07-25" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id30">
<h3>API Changes<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Change kwarg <code class="docutils literal notranslate"><span class="pre">name</span></code> to <code class="docutils literal notranslate"><span class="pre">stream_name</span></code> to select a descriptor by name</p></li>
<li><p>Requires filestore &gt;= v0.5.0</p></li>
</ul>
</div>
<div class="section" id="id31">
<h3>Enhancements<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Learned how to get all of the FS resource documents from a header</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-4-1-2016-05-09">
<h2>v0.4.1 (2016-05-09)<a class="headerlink" href="#v0-4-1-2016-05-09" title="Permalink to this headline">¶</a></h2>
<p>(TO DO)</p>
</div>
<div class="section" id="v0-4-0-2016-05-02">
<h2>v0.4.0 (2016-05-02)<a class="headerlink" href="#v0-4-0-2016-05-02" title="Permalink to this headline">¶</a></h2>
<p>(TO DO)</p>
</div>
<div class="section" id="v0-3-3-2016-02-26">
<h2>v0.3.3 (2016-02-26)<a class="headerlink" href="#v0-3-3-2016-02-26" title="Permalink to this headline">¶</a></h2>
<p>(TO DO)</p>
</div>
<div class="section" id="v0-3-2-2016-02-23">
<h2>v0.3.2 (2016-02-23)<a class="headerlink" href="#v0-3-2-2016-02-23" title="Permalink to this headline">¶</a></h2>
<p>(TO DO)</p>
</div>
<div class="section" id="v0-3-1-2016-02-04">
<h2>v0.3.1 (2016-02-04)<a class="headerlink" href="#v0-3-1-2016-02-04" title="Permalink to this headline">¶</a></h2>
<p>(TO DO)</p>
</div>
<div class="section" id="v0-3-1-2015-09-29">
<h2>v0.3.1 (2015-09-29)<a class="headerlink" href="#v0-3-1-2015-09-29" title="Permalink to this headline">¶</a></h2>
<p>(TO DO)</p>
</div>
<div class="section" id="dataportal-v0-2-2">
<h2>dataportal v0.2.2<a class="headerlink" href="#dataportal-v0-2-2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id32">
<h3>Bug Fixes<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Times, as returned by pandas-aware functions, are now reported correctly.
Previously, these times were being reported as UTC, which is 4 or 5 hours
different from US/Eastern time, depending on the time of year. (<a class="reference external" href="https://github.com/bluesky/databroker/issues/209">GH209</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="dataportal-v0-2-1">
<h2>dataportal v0.2.1<a class="headerlink" href="#dataportal-v0-2-1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id33">
<h3>API Changes<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><cite>get_images</cite> (as alias for <cite>Images</cite>) added for consistency with other
function names</p></li>
<li><p><cite>SubtractedImages</cite> removed; prefer PIMS pipeline feature.</p></li>
</ul>
</div>
</div>
<div class="section" id="dataportal-v0-2-0-2015-09-15">
<h2>dataportal v0.2.0 (2015-09-15)<a class="headerlink" href="#dataportal-v0-2-0-2015-09-15" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id34">
<h3>API Changes<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><cite>DataBroker[]</cite> for slicing by scan ID(s) or recency</p></li>
<li><p><cite>DataBroker()</cite> for building queries from keyword arguments</p></li>
<li><p><cite>get_events</cite>  return events generator</p></li>
<li><p><cite>get_table</cite>  return DataFrame</p></li>
<li><p><cite>Header</cite>, vastly simplified: it is merely <cite>Document</cite> with a dedicated
constructor that accepts a Run Start Document</p></li>
</ul>
</div>
</div>
<div class="section" id="dataportal-v0-0-6">
<h2>Dataportal v0.0.6<a class="headerlink" href="#dataportal-v0-0-6" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id35">
<h3>Enhancements<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>A new <code class="docutils literal notranslate"><span class="pre">StepScan</span></code> interface acts like <code class="docutils literal notranslate"><span class="pre">DataBroker</span></code>
but immediately returns tabular data as a DataFrame in one step.
(<a class="reference external" href="https://github.com/bluesky/databroker/issues/136">GH136</a>)</p></li>
<li><p>Look up scans by the name of a detector or motor used.
For example, to get all scans that measured ‘Tsam’, use
<code class="docutils literal notranslate"><span class="pre">DataBroker.find_headers(data_key='Tsam')</span></code>. (<a class="reference external" href="https://github.com/bluesky/databroker/issues/88">GH88</a>, <a class="reference external" href="https://github.com/bluesky/databroker/issues/107">GH107</a>)</p></li>
<li><p>Look up scans using the first few characters of its unique ID,
like <code class="docutils literal notranslate"><span class="pre">DataBroker['aow23oif']</span></code>. To be clear this is the
ophyd-provided uid, not the mongo _id. (<a class="reference external" href="https://github.com/bluesky/databroker/issues/130">GH130</a>, <a class="reference external" href="https://github.com/bluesky/databroker/issues/131">GH131</a>)</p></li>
<li><p>Replay remembers settings when flipping between scans, and it
retains these settings between sessions. (<a class="reference external" href="https://github.com/bluesky/databroker/issues/114">GH114</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataMuxer.to_sparse_dataframe</span></code> returns all data with one Event
per row. (<a class="reference external" href="https://github.com/bluesky/databroker/issues/134">GH134</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataMuxer.plan.bin_on</span></code> and <code class="docutils literal notranslate"><span class="pre">DataMuxer.plan.bin_by_edges</span></code>
explain the planned operation of <code class="docutils literal notranslate"><span class="pre">DataMuxer.bin_on</span></code> and
<code class="docutils literal notranslate"><span class="pre">DataMuxer.bin_by_edges</span></code> for a given data set and given arguments.
(<a class="reference external" href="https://github.com/bluesky/databroker/issues/134">GH134</a>)</p></li>
</ul>
</div>
<div class="section" id="id36">
<h3>API Changes<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>The Event documents are reorganized to be more intuitive
and require less typing. Formerly, <code class="docutils literal notranslate"><span class="pre">event.data</span></code> returned
a dictionary of <code class="docutils literal notranslate"><span class="pre">(value,</span> <span class="pre">timestamp)</span></code> tuples.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">event</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;motor1&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">),</span>
              <span class="s1">&#39;motor2&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)}</span>
</pre></div>
</div>
<p>Now, <code class="docutils literal notranslate"><span class="pre">event.data</span></code> is dictionary of the data</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">event</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;motor1&#39;</span><span class="p">:</span> <span class="n">value</span><span class="p">,</span> <span class="s1">&#39;motor2&#39;</span><span class="p">:</span> <span class="n">value</span><span class="p">}</span>
</pre></div>
</div>
<p>and <code class="docutils literal notranslate"><span class="pre">event.timestamp</span></code> is a dictionary of the timestamps.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">event</span><span class="o">.</span><span class="n">timestamps</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;motor1&#39;</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span> <span class="s1">&#39;motor2&#39;</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">}</span>
</pre></div>
</div>
<p>(<a class="reference external" href="https://github.com/bluesky/databroker/issues/129">GH129</a>, <a class="reference external" href="https://github.com/bluesky/databroker/issues/132">GH132</a>)</p>
</li>
<li><p>All functions that return Documents, including Headers,
Events, and everything stored in metadatastore and filestore,
now return Python generators, iterable objects that load
data one element at a time. To convert these to normal Python
lists, simply use <code class="docutils literal notranslate"><span class="pre">list(gen)</span></code>. (<a class="reference external" href="https://github.com/bluesky/databroker/issues/127">GH127</a>)</p></li>
<li><p>The output of <code class="docutils literal notranslate"><span class="pre">DataMuxer.bin_*</span></code> functions is indexed by
bin number (0, 1, 2…). The Event time is given as a column.</p></li>
<li><p>Metadatastore and filestore require configuration settings.
They look in the following locations, in increasing order of
precedence. Use #3 or #4 to customize your own metadatastore
and filestore.</p>
<ol class="arabic simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">CONDA_ENV/etc/</span><em><span class="pre">name</span></em><span class="pre">.yaml</span></code> (if <code class="docutils literal notranslate"><span class="pre">CONDA_ETC_</span></code> env is defined)</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">/etc/</span><em><span class="pre">name</span></em><span class="pre">.yaml</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">~/.config/</span><em><span class="pre">name</span></em><span class="pre">/connection.yml</span></code></p></li>
<li><p>reading environmental variables formatted like <code class="docutils literal notranslate"><span class="pre">MDS_DATABASE</span></code> or <code class="docutils literal notranslate"><span class="pre">FS_DATABASE</span></code></p></li>
</ol>
<p>For example, in <code class="file docutils literal notranslate"><span class="pre">~/.config/metadatastore/connection.yaml</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">host</span><span class="p">:</span> <span class="n">localhost</span>
<span class="n">port</span><span class="p">:</span> <span class="mi">27017</span>
<span class="n">database</span><span class="p">:</span> <span class="n">my_metadatastore</span>
<span class="n">timezone</span><span class="p">:</span> <span class="n">US</span><span class="o">/</span><span class="n">Eastern</span>
</pre></div>
</div>
<p>and likewise with filestore/connection.yaml.
(Filestore does not need a timezone field, however.)
If no configuration can be found, they will raise an error on
import. We avoid defaults so that experimental data cannot be
accidentally saved to an unsafe destination.</p>
</li>
<li><p>Metadatastore configuration also requires a <code class="docutils literal notranslate"><span class="pre">timezone</span></code> field,
which is uses to interpret human-friendly datetimes.</p></li>
</ul>
</div>
<div class="section" id="id37">
<h3>Bug Fixes<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>All DataMuxer output is sorted by Event time. (<a class="reference external" href="https://github.com/bluesky/databroker/issues/134">GH134</a>)</p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="DBEP/index.html" class="btn btn-neutral float-right" title="Databroker Enhancement Proposals" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="v1/archiver.html" class="btn btn-neutral float-left" title="Connection with Archiver Appliance" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015 Brookhaven National Lab

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>